(()=>{var e={39:e=>{"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJDYXBhXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHdpZHRoPSIyOTIuMzYycHgiIGhlaWdodD0iMjkyLjM2MXB4IiB2aWV3Qm94PSIwIDAgMjkyLjM2MiAyOTIuMzYxIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAyOTIuMzYyIDI5Mi4zNjE7IgoJIHhtbDpzcGFjZT0icHJlc2VydmUiPgo8Zz4KCTxwYXRoIGQ9Ik0yODYuOTM1LDE5Ny4yODdMMTU5LjAyOCw2OS4zODFjLTMuNjEzLTMuNjE3LTcuODk1LTUuNDI0LTEyLjg0Ny01LjQyNHMtOS4yMzMsMS44MDctMTIuODUsNS40MjRMNS40MjQsMTk3LjI4NwoJCUMxLjgwNywyMDAuOTA0LDAsMjA1LjE4NiwwLDIxMC4xMzRzMS44MDcsOS4yMzMsNS40MjQsMTIuODQ3YzMuNjIxLDMuNjE3LDcuOTAyLDUuNDI1LDEyLjg1LDUuNDI1aDI1NS44MTMKCQljNC45NDksMCw5LjIzMy0xLjgwOCwxMi44NDgtNS40MjVjMy42MTMtMy42MTMsNS40MjctNy44OTgsNS40MjctMTIuODQ3UzI5MC41NDgsMjAwLjkwNCwyODYuOTM1LDE5Ny4yODd6Ii8+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPC9zdmc+"},45:(e,t,n)=>{var r=n(738).default;e.exports=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=r(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},56:(e,t,n)=>{"use strict";e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},72:e=>{"use strict";var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var o={},i=[],s=0;s<e.length;s++){var l=e[s],c=r.base?l[0]+r.base:l[0],u=o[c]||0,d="".concat(c," ").concat(u);o[c]=u+1;var A=n(d),h={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==A)t[A].references++,t[A].updater(h);else{var f=a(h,r);r.byIndex=s,t.splice(s,0,{identifier:d,updater:f,references:1})}i.push(d)}return i}function a(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,a){var o=r(e=e||[],a=a||{});return function(e){e=e||[];for(var i=0;i<o.length;i++){var s=n(o[i]);t[s].references--}for(var l=r(e,a),c=0;c<o.length;c++){var u=n(o[c]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}o=l}}},79:e=>{e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r},e.exports.__esModule=!0,e.exports.default=e.exports},113:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},122:(e,t,n)=>{var r=n(79);e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},155:e=>{"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJDYXBhXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHdpZHRoPSIyOTIuMzYycHgiIGhlaWdodD0iMjkyLjM2MnB4IiB2aWV3Qm94PSIwIDAgMjkyLjM2MiAyOTIuMzYyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAyOTIuMzYyIDI5Mi4zNjI7IgoJIHhtbDpzcGFjZT0icHJlc2VydmUiPgo8Zz4KCTxwYXRoIGQ9Ik0yODYuOTM1LDY5LjM3N2MtMy42MTQtMy42MTctNy44OTgtNS40MjQtMTIuODQ4LTUuNDI0SDE4LjI3NGMtNC45NTIsMC05LjIzMywxLjgwNy0xMi44NSw1LjQyNAoJCUMxLjgwNyw3Mi45OTgsMCw3Ny4yNzksMCw4Mi4yMjhjMCw0Ljk0OCwxLjgwNyw5LjIyOSw1LjQyNCwxMi44NDdsMTI3LjkwNywxMjcuOTA3YzMuNjIxLDMuNjE3LDcuOTAyLDUuNDI4LDEyLjg1LDUuNDI4CgkJczkuMjMzLTEuODExLDEyLjg0Ny01LjQyOEwyODYuOTM1LDk1LjA3NGMzLjYxMy0zLjYxNyw1LjQyNy03Ljg5OCw1LjQyNy0xMi44NDdDMjkyLjM2Miw3Ny4yNzksMjkwLjU0OCw3Mi45OTgsMjg2LjkzNSw2OS4zNzd6Ii8+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPC9zdmc+"},156:e=>{e.exports=function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return s}},e.exports.__esModule=!0,e.exports.default=e.exports},213:function(e,t,n){var r,a;void 0===(a="function"==typeof(r=function(){"use strict";function t(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){s(r.response,t,n)},r.onerror=function(){console.error("could not download file")},r.send()}function r(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function a(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(n){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var o="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n.g&&n.g.global===n.g?n.g:void 0,i=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),s=o.saveAs||("object"!=typeof window||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!i?function(e,n,i){var s=o.URL||o.webkitURL,l=document.createElement("a");n=n||e.name||"download",l.download=n,l.rel="noopener","string"==typeof e?(l.href=e,l.origin===location.origin?a(l):r(l.href)?t(e,n,i):a(l,l.target="_blank")):(l.href=s.createObjectURL(e),setTimeout(function(){s.revokeObjectURL(l.href)},4e4),setTimeout(function(){a(l)},0))}:"msSaveOrOpenBlob"in navigator?function(e,n,o){if(n=n||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}(e,o),n);else if(r(e))t(e,n,o);else{var i=document.createElement("a");i.href=e,i.target="_blank",setTimeout(function(){a(i)})}}:function(e,n,r,a){if((a=a||open("","_blank"))&&(a.document.title=a.document.body.innerText="downloading..."),"string"==typeof e)return t(e,n,r);var s="application/octet-stream"===e.type,l=/constructor/i.test(o.HTMLElement)||o.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||s&&l||i)&&"undefined"!=typeof FileReader){var u=new FileReader;u.onloadend=function(){var e=u.result;e=c?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=e:location=e,a=null},u.readAsDataURL(e)}else{var d=o.URL||o.webkitURL,A=d.createObjectURL(e);a?a.location=A:location.href=A,a=null,setTimeout(function(){d.revokeObjectURL(A)},4e4)}});o.saveAs=s.saveAs=s,e.exports=s})?r.apply(t,[]):r)||(e.exports=a)},309:e=>{"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJDYXBhXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHdpZHRoPSI0MDEuOTk4cHgiIGhlaWdodD0iNDAxLjk5OHB4IiB2aWV3Qm94PSIwIDAgNDAxLjk5OCA0MDEuOTk4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0MDEuOTk4IDQwMS45OTg7IgoJIHhtbDpzcGFjZT0icHJlc2VydmUiPgo8Zz4KCTxnPgoJCTxwYXRoIGQ9Ik03My4wOTIsMTY0LjQ1MmgyNTUuODEzYzQuOTQ5LDAsOS4yMzMtMS44MDcsMTIuODQ4LTUuNDI0YzMuNjEzLTMuNjE2LDUuNDI3LTcuODk4LDUuNDI3LTEyLjg0NwoJCQljMC00Ljk0OS0xLjgxMy05LjIyOS01LjQyNy0xMi44NUwyMTMuODQ2LDUuNDI0QzIxMC4yMzIsMS44MTIsMjA1Ljk1MSwwLDIwMC45OTksMHMtOS4yMzMsMS44MTItMTIuODUsNS40MjRMNjAuMjQyLDEzMy4zMzEKCQkJYy0zLjYxNywzLjYxNy01LjQyNCw3LjkwMS01LjQyNCwxMi44NWMwLDQuOTQ4LDEuODA3LDkuMjMxLDUuNDI0LDEyLjg0N0M2My44NjMsMTYyLjY0NSw2OC4xNDQsMTY0LjQ1Miw3My4wOTIsMTY0LjQ1MnoiLz4KCQk8cGF0aCBkPSJNMzI4LjkwNSwyMzcuNTQ5SDczLjA5MmMtNC45NTIsMC05LjIzMywxLjgwOC0xMi44NSw1LjQyMWMtMy42MTcsMy42MTctNS40MjQsNy44OTgtNS40MjQsMTIuODQ3CgkJCWMwLDQuOTQ5LDEuODA3LDkuMjMzLDUuNDI0LDEyLjg0OEwxODguMTQ5LDM5Ni41N2MzLjYyMSwzLjYxNyw3LjkwMiw1LjQyOCwxMi44NSw1LjQyOHM5LjIzMy0xLjgxMSwxMi44NDctNS40MjhsMTI3LjkwNy0xMjcuOTA2CgkJCWMzLjYxMy0zLjYxNCw1LjQyNy03Ljg5OCw1LjQyNy0xMi44NDhjMC00Ljk0OC0xLjgxMy05LjIyOS01LjQyNy0xMi44NDdDMzM4LjEzOSwyMzkuMzUzLDMzMy44NTQsMjM3LjU0OSwzMjguOTA1LDIzNy41NDl6Ii8+Cgk8L2c+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPC9zdmc+"},314:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n}).join("")},t.i=function(e,n,r,a,o){"string"==typeof e&&(e=[[null,e,void 0]]);var i={};if(r)for(var s=0;s<this.length;s++){var l=this[s][0];null!=l&&(i[l]=!0)}for(var c=0;c<e.length;c++){var u=[].concat(e[c]);r&&i[u[0]]||(void 0!==o&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=o),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),a&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=a):u[4]="".concat(a)),t.push(u))}},t}},354:e=>{"use strict";e.exports=function(e){var t=e[1],n=e[3];if(!n)return t;if("function"==typeof btoa){var r=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),a="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),o="/*# ".concat(a," */");return[t].concat([o]).join("\n")}return[t].join("\n")}},383:e=>{e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},389:function(e,t){!function(e){"use strict";var t,n=void 0===Number.MAX_SAFE_INTEGER?9007199254740991:Number.MAX_SAFE_INTEGER,r=536870912,a=1073741824,o=new WeakMap,i=function(e,t){return function(o){var i=t.get(o),s=void 0===i?o.size:i<a?i+1:0;if(!o.has(s))return e(o,s);if(o.size<r){for(;o.has(s);)s=Math.floor(Math.random()*a);return e(o,s)}if(o.size>n)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;o.has(s);)s=Math.floor(Math.random()*n);return e(o,s)}}((t=o,function(e,n){return t.set(e,n),n}),o),s=function(e){return function(t){var n=e(t);return t.add(n),n}}(i);e.addUniqueNumber=s,e.generateUniqueNumber=i}(t)},417:e=>{"use strict";e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]|(%20)/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e):e}},540:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},579:(e,t,n)=>{var r=n(736);function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,r(a.key),a)}}e.exports=function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},659:e=>{"use strict";var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},664:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(354),a=n.n(r),o=n(314),i=n.n(o)()(a());i.push([e.id,'.channel-strip{background-color:#4a4f57;border:1px solid #282c34;border-radius:8px;padding:10px;width:300px;display:flex;flex-direction:column;gap:10px}.channel-strip .controls{display:flex;flex-direction:column;gap:10px}.channel-strip .play-controls{display:flex;gap:10px}.channel-strip .play-controls button{flex-grow:1}.channel-strip .play-controls .cue-btn{background-color:#5a5f67;color:#fff}.channel-strip .play-controls .cue-btn.active{background-color:#ff9800;color:#282c34}.channel-strip .time-controls{display:flex;align-items:center;gap:10px;width:100%}.channel-strip .time-controls .time-slider{flex-grow:1}.channel-strip .time-controls .time-current,.channel-strip .time-controls .time-remaining{font-family:"Courier New",Courier,monospace;font-size:14px;font-weight:bold;min-width:40px;text-align:center}.channel-strip .knob-row{display:flex;justify-content:space-around;width:100%;margin-top:10px}.channel-strip button{background-color:var(--accent-color, #61dafb);border:none;color:var(--background-color, #282c34);padding:8px;border-radius:4px;cursor:pointer;font-weight:bold;transition:background-color .2s;display:flex;align-items:center;justify-content:center}.channel-strip button:hover{filter:brightness(1.2)}.channel-strip button svg{width:20px;height:20px;fill:currentColor}.crossfader{height:15px;margin:10px 0}#master-controls{justify-content:flex-start;align-items:center;gap:15px}#master-controls #visualizer{background-color:#282c34;border:1px solid #5a5f67;border-radius:4px;width:100%;height:100px}#master-controls .volume-controls{display:flex;width:100%;gap:20px;justify-content:space-around}#master-controls .recorder-controls{display:flex;width:100%;gap:10px;margin-top:10px}#master-controls .recorder-controls button{flex-grow:1}#master-controls .recorder-controls #record-btn.active{background-color:#e91e63;color:#fff}#master-controls .recorder-controls button:disabled{background-color:#5a5f67;cursor:not-allowed}#master-controls .effects-rack{width:100%;display:flex;flex-direction:column;gap:10px;margin-top:10px}#master-controls .effects-rack h3{margin:0;text-align:center}#master-controls .effects-rack .knob-row{display:flex;justify-content:space-around;width:100%}#master-controls .effects-rack .fader-group{display:flex;flex-direction:column;align-items:center;gap:5px}#master-controls .effects-rack .fader-group label{font-weight:bold}.track-item{display:flex;justify-content:space-between;align-items:center;padding:8px 12px;cursor:pointer;border-bottom:1px solid #444;transition:background-color .2s ease}.track-item:hover{background-color:#3a3f4b}.track-item.selected{background-color:#61dafb;color:#282c34}.track-item .track-name{flex-grow:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.track-item .bpm{margin-left:16px;font-weight:bold;color:#888}#skin-toggler{position:fixed;top:10px;left:10px;z-index:100;display:flex;align-items:center}#skin-toggle-btn{width:40px;height:40px;padding:5px;border-radius:50%;z-index:10;flex-shrink:0}.skin-buttons-container{position:relative;left:1em;display:flex;gap:5px;background-color:var(--primary-color, #3a3f47);padding:5px 10px;border-radius:25px;opacity:0;transform:translateX(-20px);pointer-events:none;transition:opacity .3s ease,transform .3s ease}.skin-buttons-container.visible{opacity:1;transform:translateX(0);pointer-events:all}.skin-btn{font-size:12px;padding:5px 10px;margin:0;white-space:nowrap}.knob-container{position:relative;width:50px;height:50px;cursor:pointer}.knob-container .knob{width:100%;height:100%;border-radius:50%;background-color:#555;border:2px solid #333;box-shadow:inset 0 0 10px rgba(0,0,0,.5);display:flex;justify-content:center;align-items:center;transition:transform .1s;position:relative}.knob-container .knob::after{content:"";position:absolute;top:5px;width:4px;height:15px;background-color:var(--accent-color, #61dafb);border-radius:2px}.knob-container .knob-value{font-size:12px;font-weight:bold;color:#fff;text-shadow:1px 1px 2px rgba(0,0,0,.7);z-index:1;user-select:none;-webkit-user-select:none}.sampler-pads{width:100%;display:flex;flex-direction:column;gap:5px;margin-top:15px}.sampler-row{display:flex;justify-content:space-around;gap:5px}.sampler-pad{flex:1;height:60px;border-radius:4px;cursor:pointer;position:relative;overflow:hidden;transition:background-color .2s,transform .1s;border:2px solid var(--border-color, #5a5f67);background-color:#5a5f67}.sampler-pad.loaded{background-color:var(--accent-color, #006400)}.sampler-pad:active{transform:scale(0.95)}.sampler-pad .trash-icon{position:absolute;top:5px;right:5px;width:20px;height:20px;background-color:rgba(0,0,0,.5);border-radius:50%;display:flex;align-items:center;justify-content:center;opacity:0;pointer-events:none;transition:opacity .2s}.sampler-pad .trash-icon::before,.sampler-pad .trash-icon::after{content:"";position:absolute;width:12px;height:2px;background-color:#fff}.sampler-pad .trash-icon::before{transform:rotate(45deg)}.sampler-pad .trash-icon::after{transform:rotate(-45deg)}.sampler-pad.delete-active .trash-icon{opacity:1;pointer-events:all}#header-art{box-sizing:border-box;margin:0 auto 15px auto;padding:10px;font-family:"Courier New",Courier,monospace;font-size:3px;font-weight:bold;text-align:center;color:var(--accent-color, #61dafb);white-space:pre;overflow:hidden;user-select:none;-webkit-user-select:none}.modal{position:fixed;z-index:1000;left:0;top:0;width:100%;height:100%;overflow:auto;background-color:rgba(0,0,0,.6);display:flex;align-items:flex-start;justify-content:center;padding-top:10vh}.modal-content{background-color:var(--primary-color, #fefefe);color:var(--text-color, #000);margin:auto;padding:20px;border:1px solid var(--accent-color, #888);width:80%;max-width:500px;border-radius:10px;text-align:center;position:relative}.modal-content .close-btn{position:absolute;top:10px;right:20px;color:#aaa;font-size:28px;font-weight:bold;cursor:pointer}.modal-content .close-btn:hover,.modal-content .close-btn:focus{color:var(--accent-color, black);text-decoration:none}.modal-content h2{margin-top:0}.modal-content .donation-options{margin:20px 0}.modal-content .donation-btn{display:inline-block;padding:10px 20px;background-color:var(--accent-color, #007bff);color:var(--primary-color, white);text-decoration:none;border-radius:5px;margin-bottom:10px}.modal-content .donation-btn.paypal{background-color:#00457c}.modal-content .crypto-donations{margin-top:15px}.modal-content .crypto-donations p{margin:5px 0}.modal-content .crypto-donations code{background-color:rgba(0,0,0,.1);padding:3px 5px;border-radius:3px;word-wrap:break-word}.modal-content .download-now-btn{padding:10px 20px;background-color:#28a745;color:#fff;border:none;border-radius:5px;cursor:pointer;font-size:16px}@media(max-width: 768px){#header-art{font-size:6px}.mixer-container.mobile-layout{flex-direction:column;width:100%;gap:1em;padding:0;border-radius:0}.channel-strip{width:100%;border-radius:0;margin:0;box-sizing:border-box}}@media(max-width: 900px)and (orientation: landscape){.mixer-container.mobile-layout{display:grid;grid-template-columns:repeat(auto-fit, minmax(200px, 1fr));flex-direction:row}}body.skin-light{--background-color: #ffffff;--primary-color: #f0fff0;--accent-color: #3cb371;--text-color: #000000;--border-color: #90ee90;--tracklist-bg: #f5f5f5;--tracklist-hover-bg: #e0e0e0;--tracklist-selected-bg: var(--accent-color);--tracklist-selected-text: #ffffff;background:radial-gradient(ellipse at center, var(--primary-color) 0%, var(--background-color) 100%);background-attachment:fixed;color:var(--text-color)}body.skin-light .channel-strip{background-color:var(--primary-color);border:2px solid var(--border-color)}body.skin-light .channel-strip h2,body.skin-light .effects-rack h3{color:var(--accent-color)}body.skin-light button{background-color:var(--accent-color);color:var(--background-color);border:1px solid var(--border-color)}body.skin-light .play-btn.active,body.skin-light button.active{background-color:gold}body.skin-light input[type=range]::-webkit-slider-thumb{background:var(--accent-color)}body.skin-light input[type=range]::-moz-range-thumb{background:var(--accent-color)}body.skin-light .tracklist{height:200px;background-color:var(--tracklist-bg);border:1px solid var(--border-color);border-radius:4px;overflow-y:auto;padding:0}body.skin-light .tracklist .gridjs-tr:hover .gridjs-td{background-color:var(--tracklist-hover-bg)}body.skin-light .tracklist .gridjs-tr-selected .gridjs-td{background-color:var(--tracklist-selected-bg);color:var(--tracklist-selected-text);font-weight:bold}body.skin-dark{--background-color: #000000;--primary-color: #1a1a1a;--accent-color: #ff0000;--text-color: #ffffff;--border-color: #444444;--tracklist-bg: #282c34;--tracklist-hover-bg: #5a5f67;--tracklist-selected-bg: var(--accent-color);--tracklist-selected-text: #ffffff;background:radial-gradient(ellipse at center, var(--primary-color) 0%, var(--background-color) 100%);background-attachment:fixed;color:var(--text-color)}body.skin-dark .channel-strip{background-color:var(--primary-color);border:2px solid var(--border-color)}body.skin-dark .channel-strip h2,body.skin-dark .effects-rack h3{color:var(--accent-color)}body.skin-dark button{background-color:var(--accent-color);color:var(--background-color);border:1px solid var(--border-color)}body.skin-dark .play-btn.active,body.skin-dark button.active{background-color:#fff;color:red}body.skin-dark input[type=range]::-webkit-slider-thumb{background:var(--accent-color)}body.skin-dark input[type=range]::-moz-range-thumb{background:var(--accent-color)}body.skin-dark .tracklist{height:200px;background-color:var(--tracklist-bg);border:1px solid var(--border-color);border-radius:4px;overflow-y:auto;padding:0}body.skin-dark .tracklist .gridjs-tr:hover .gridjs-td{background-color:var(--tracklist-hover-bg)}body.skin-dark .tracklist .gridjs-tr-selected .gridjs-td{background-color:var(--tracklist-selected-bg);color:var(--tracklist-selected-text);font-weight:bold}body.skin-reggae{--background-color: #000000;--primary-color: #1a1a1a;--accent-color: #006400;--text-color: #ffff00;--border-color: #444444;--tracklist-bg: #111;--tracklist-hover-bg: #444;--tracklist-selected-bg: var(--text-color);--tracklist-selected-text: #000000;background:radial-gradient(ellipse at center, var(--primary-color) 0%, var(--background-color) 100%);background-attachment:fixed;color:var(--text-color)}body.skin-reggae .channel-strip{background-color:var(--primary-color);border:2px solid var(--border-color)}body.skin-reggae .channel-strip h2,body.skin-reggae .effects-rack h3{color:var(--accent-color)}body.skin-reggae button{background-color:var(--accent-color);color:var(--background-color);border:1px solid var(--border-color)}body.skin-reggae .play-btn.active,body.skin-reggae button.active{background-color:#ff0;color:#000}body.skin-reggae input[type=range]::-webkit-slider-thumb{background:var(--accent-color)}body.skin-reggae input[type=range]::-moz-range-thumb{background:var(--accent-color)}body.skin-reggae .tracklist{height:200px;background-color:var(--tracklist-bg);border:1px solid var(--border-color);border-radius:4px;overflow-y:auto;padding:0}body.skin-reggae .tracklist .gridjs-tr:hover .gridjs-td{background-color:var(--tracklist-hover-bg)}body.skin-reggae .tracklist .gridjs-tr-selected .gridjs-td{background-color:var(--tracklist-selected-bg);color:var(--tracklist-selected-text);font-weight:bold}body.skin-hack{--background-color: #36393f;--primary-color: #2f3136;--accent-color: #5865f2;--text-color: #ffffff;--border-color: #4f545c;--tracklist-bg: #202225;--tracklist-hover-bg: #4f545c;--tracklist-selected-bg: var(--accent-color);--tracklist-selected-text: #ffffff;background:radial-gradient(ellipse at center, var(--primary-color) 0%, var(--background-color) 100%);background-attachment:fixed;color:var(--text-color)}body.skin-hack .channel-strip{background-color:var(--primary-color);border:2px solid var(--border-color)}body.skin-hack .channel-strip h2,body.skin-hack .effects-rack h3{color:var(--accent-color)}body.skin-hack button{background-color:var(--accent-color);color:var(--background-color);border:1px solid var(--border-color)}body.skin-hack .play-btn.active,body.skin-hack button.active{background-color:#f9a825}body.skin-hack input[type=range]::-webkit-slider-thumb{background:var(--accent-color)}body.skin-hack input[type=range]::-moz-range-thumb{background:var(--accent-color)}body.skin-hack .tracklist{height:200px;background-color:var(--tracklist-bg);border:1px solid var(--border-color);border-radius:4px;overflow-y:auto;padding:0}body.skin-hack .tracklist .gridjs-tr:hover .gridjs-td{background-color:var(--tracklist-hover-bg)}body.skin-hack .tracklist .gridjs-tr-selected .gridjs-td{background-color:var(--tracklist-selected-bg);color:var(--tracklist-selected-text);font-weight:bold}body.skin-vice{--background-color: #d3d3d3;--primary-color: #e6e6fa;--accent-color: #ff69b4;--text-color: #4b0082;--border-color: #8a2be2;--tracklist-bg: #f5f5f5;--tracklist-hover-bg: #e0e0e0;--tracklist-selected-bg: var(--accent-color);--tracklist-selected-text: #ffffff;background:radial-gradient(ellipse at center, var(--primary-color) 0%, var(--background-color) 100%);background-attachment:fixed;color:var(--text-color)}body.skin-vice .channel-strip{background-color:var(--primary-color);border:2px solid var(--border-color)}body.skin-vice .channel-strip h2,body.skin-vice .effects-rack h3{color:var(--accent-color)}body.skin-vice button{background-color:var(--accent-color);color:#fff;border:1px solid var(--border-color)}body.skin-vice .play-btn.active,body.skin-vice button.active{background-color:#8a2be2}body.skin-vice input[type=range]::-webkit-slider-thumb{background:var(--accent-color)}body.skin-vice input[type=range]::-moz-range-thumb{background:var(--accent-color)}body.skin-vice .tracklist{height:200px;background-color:var(--tracklist-bg);border:1px solid var(--border-color);border-radius:4px;overflow-y:auto;padding:0}body.skin-vice .tracklist .gridjs-tr:hover .gridjs-td{background-color:var(--tracklist-hover-bg)}body.skin-vice .tracklist .gridjs-tr-selected .gridjs-td{background-color:var(--tracklist-selected-bg);color:var(--tracklist-selected-text);font-weight:bold}body.skin-funk{--background-color: #ffffff;--primary-color: #f5f5dc;--accent-color: #000080;--text-color: #000000;--border-color: #ffd700;--tracklist-bg: #fafad2;--tracklist-hover-bg: #eee8aa;--tracklist-selected-bg: var(--accent-color);--tracklist-selected-text: #ffffff;background:radial-gradient(ellipse at center, var(--primary-color) 0%, var(--background-color) 100%);background-attachment:fixed;color:var(--text-color)}body.skin-funk .channel-strip{background-color:var(--primary-color);border:2px solid var(--border-color)}body.skin-funk .channel-strip h2,body.skin-funk .effects-rack h3{color:var(--accent-color)}body.skin-funk button{background-color:var(--accent-color);color:#fff;border:1px solid var(--border-color)}body.skin-funk .play-btn.active,body.skin-funk button.active{background-color:gold;color:#000}body.skin-funk input[type=range]::-webkit-slider-thumb{background:var(--accent-color)}body.skin-funk input[type=range]::-moz-range-thumb{background:var(--accent-color)}body.skin-funk .tracklist{height:200px;background-color:var(--tracklist-bg);border:1px solid var(--border-color);border-radius:4px;overflow-y:auto;padding:0}body.skin-funk .tracklist .gridjs-tr:hover .gridjs-td{background-color:var(--tracklist-hover-bg)}body.skin-funk .tracklist .gridjs-tr-selected .gridjs-td{background-color:var(--tracklist-selected-bg);color:var(--tracklist-selected-text);font-weight:bold}body.skin-grime{--background-color: #000000;--primary-color: #1c1c1c;--accent-color: #ffffff;--text-color: #a9a9a9;--border-color: #444;--tracklist-bg: #111;--tracklist-hover-bg: #333;--tracklist-selected-bg: var(--accent-color);--tracklist-selected-text: #000000;background:radial-gradient(ellipse at center, var(--primary-color) 0%, var(--background-color) 100%);background-attachment:fixed;color:var(--text-color)}body.skin-grime .channel-strip{background-color:var(--primary-color);border:2px solid var(--border-color)}body.skin-grime .channel-strip h2,body.skin-grime .effects-rack h3{color:var(--accent-color)}body.skin-grime button{background-color:var(--accent-color);color:#000;border:1px solid var(--border-color)}body.skin-grime .play-btn.active,body.skin-grime button.active{background-color:#a9a9a9;color:#000}body.skin-grime input[type=range]::-webkit-slider-thumb{background:var(--accent-color)}body.skin-grime input[type=range]::-moz-range-thumb{background:var(--accent-color)}body.skin-grime .tracklist{height:200px;background-color:var(--tracklist-bg);border:1px solid var(--border-color);border-radius:4px;overflow-y:auto;padding:0}body.skin-grime .tracklist .gridjs-tr:hover .gridjs-td{background-color:var(--tracklist-hover-bg)}body.skin-grime .tracklist .gridjs-tr-selected .gridjs-td{background-color:var(--tracklist-selected-bg);color:var(--tracklist-selected-text);font-weight:bold}body.skin-jazz{--background-color: #f5f5f5;--primary-color: #dcdcdc;--accent-color: #b22222;--text-color: #000000;--border-color: #808080;--tracklist-bg: #ffffff;--tracklist-hover-bg: #f0f0f0;--tracklist-selected-bg: var(--accent-color);--tracklist-selected-text: #ffffff;background:radial-gradient(ellipse at center, var(--primary-color) 0%, var(--background-color) 100%);background-attachment:fixed;color:var(--text-color)}body.skin-jazz .channel-strip{background-color:var(--primary-color);border:2px solid var(--border-color)}body.skin-jazz .channel-strip h2,body.skin-jazz .effects-rack h3{color:var(--accent-color)}body.skin-jazz button{background-color:var(--accent-color);color:#fff;border:1px solid var(--border-color)}body.skin-jazz .play-btn.active,body.skin-jazz button.active{background-color:#000;color:#fff}body.skin-jazz input[type=range]::-webkit-slider-thumb{background:var(--accent-color)}body.skin-jazz input[type=range]::-moz-range-thumb{background:var(--accent-color)}body.skin-jazz .tracklist{height:200px;background-color:var(--tracklist-bg);border:1px solid var(--border-color);border-radius:4px;overflow-y:auto;padding:0}body.skin-jazz .tracklist .gridjs-tr:hover .gridjs-td{background-color:var(--tracklist-hover-bg)}body.skin-jazz .tracklist .gridjs-tr-selected .gridjs-td{background-color:var(--tracklist-selected-bg);color:var(--tracklist-selected-text);font-weight:bold}html,body{overflow:auto}body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;background-color:#282c34;margin:0;padding:1em;box-sizing:border-box;min-height:100vh;display:grid;place-items:center}h1,h2{text-align:center}#app{text-align:center}#interface-wrapper{display:inline-block;text-align:left}.mixer-container{display:grid;grid-template-columns:repeat(auto-fit, minmax(200px, 1fr));gap:10px;padding:10px;background-color:#3a3f47;border-radius:10px;box-shadow:0 0 20px rgba(0,0,0,.5)}.knob-container,h2,h3,input[type=range],button,label,.selected-path{user-select:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none}input[type=range]{-webkit-appearance:none;width:100%;height:8px;background:#282c34;border-radius:4px;outline:none}input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:12px;height:24px;background:var(--accent-color, #61dafb);cursor:pointer;border-radius:2px}input[type=range]::-moz-range-thumb{width:12px;height:24px;background:var(--accent-color, #61dafb);cursor:pointer;border-radius:2px}',"",{version:3,sources:["webpack://./src/styles/components/channels.scss","webpack://./src/styles/components/mixer.scss","webpack://./src/styles/components/_tracklist.scss","webpack://./src/styles/components/_skin-toggler.scss","webpack://./src/styles/components/_knobs.scss","webpack://./src/styles/components/_sampler.scss","webpack://./src/styles/components/_header-art.scss","webpack://./src/styles/components/_donation-modal.scss","webpack://./src/styles/components/_mobile.scss","webpack://./src/styles/skins/light.scss","webpack://./src/styles/skins/dark.scss","webpack://./src/styles/skins/reggae.scss","webpack://./src/styles/skins/hack.scss","webpack://./src/styles/skins/vice.scss","webpack://./src/styles/skins/funk.scss","webpack://./src/styles/skins/grime.scss","webpack://./src/styles/skins/jazz.scss","webpack://./src/styles/main.scss"],names:[],mappings:"AAAA,eACI,wBAAA,CACA,wBAAA,CACA,iBAAA,CACA,YAAA,CACA,WAAA,CACA,YAAA,CACA,qBAAA,CACA,QAAA,CAEA,yBACI,YAAA,CACA,qBAAA,CACA,QAAA,CAGJ,8BACI,YAAA,CACA,QAAA,CAEA,qCACI,WAAA,CAGJ,uCACI,wBAAA,CACA,UAAA,CAEA,8CACI,wBAAA,CACA,aAAA,CAKZ,8BACI,YAAA,CACA,kBAAA,CACA,QAAA,CACA,UAAA,CAEA,2CACI,WAAA,CAGJ,0FACI,2CAAA,CACA,cAAA,CACA,gBAAA,CACA,cAAA,CACA,iBAAA,CAIR,yBACI,YAAA,CACA,4BAAA,CACA,UAAA,CACA,eAAA,CAGJ,sBACI,6CAAA,CACA,WAAA,CACA,sCAAA,CACA,WAAA,CACA,iBAAA,CACA,cAAA,CACA,gBAAA,CACA,+BAAA,CACA,YAAA,CACA,kBAAA,CACA,sBAAA,CAEA,4BACI,sBAAA,CAGJ,0BACI,UAAA,CACA,WAAA,CACA,iBAAA,CCjFZ,YACI,WAAA,CACA,aAAA,CAIJ,iBACI,0BAAA,CACA,kBAAA,CACA,QAAA,CAEA,6BACI,wBAAA,CACA,wBAAA,CACA,iBAAA,CACA,UAAA,CACA,YAAA,CAGJ,kCACI,YAAA,CACA,UAAA,CACA,QAAA,CACA,4BAAA,CAGJ,oCACI,YAAA,CACA,UAAA,CACA,QAAA,CACA,eAAA,CAEA,2CACI,WAAA,CAGJ,uDACI,wBAAA,CACA,UAAA,CAGJ,oDACI,wBAAA,CACA,kBAAA,CAIR,+BACI,UAAA,CACA,YAAA,CACA,qBAAA,CACA,QAAA,CACA,eAAA,CAEA,kCACI,QAAA,CACA,iBAAA,CAGJ,yCACI,YAAA,CACA,4BAAA,CACA,UAAA,CAGJ,4CACI,YAAA,CACA,qBAAA,CACA,kBAAA,CACA,OAAA,CAEA,kDACI,gBAAA,CCxEhB,YACE,YAAA,CACA,6BAAA,CACA,kBAAA,CACA,gBAAA,CACA,cAAA,CACA,4BAAA,CACA,oCAAA,CAEA,kBACE,wBAAA,CAGF,qBACE,wBAAA,CACA,aAAA,CAGF,wBACE,WAAA,CACA,kBAAA,CACA,eAAA,CACA,sBAAA,CAGF,iBACE,gBAAA,CACA,gBAAA,CACA,UAAA,CC5BJ,cACE,cAAA,CACA,QAAA,CACA,SAAA,CACA,WAAA,CACA,YAAA,CACA,kBAAA,CAGF,iBACE,UAAA,CACA,WAAA,CACA,WAAA,CACA,iBAAA,CACA,UAAA,CACA,aAAA,CAGF,wBACE,iBAAA,CACA,QAAA,CACA,YAAA,CACA,OAAA,CACA,8CAAA,CACA,gBAAA,CACA,kBAAA,CAGA,SAAA,CACA,2BAAA,CACA,mBAAA,CACA,8CAAA,CAEA,gCACE,SAAA,CACA,uBAAA,CACA,kBAAA,CAIJ,UACE,cAAA,CACA,gBAAA,CACA,QAAA,CACA,kBAAA,CC5CF,gBACE,iBAAA,CACA,UAAA,CACA,WAAA,CACA,cAAA,CAEA,sBACE,UAAA,CACA,WAAA,CACA,iBAAA,CACA,qBAAA,CACA,qBAAA,CACA,wCAAA,CACA,YAAA,CACA,sBAAA,CACA,kBAAA,CACA,wBAAA,CACA,iBAAA,CAGA,6BACE,UAAA,CACA,iBAAA,CACA,OAAA,CACA,SAAA,CACA,WAAA,CACA,6CAAA,CACA,iBAAA,CAIJ,4BACE,cAAA,CACA,gBAAA,CACA,UAAA,CACA,sCAAA,CACA,SAAA,CACA,gBAAA,CACA,wBAAA,CCtCJ,cACE,UAAA,CACA,YAAA,CACA,qBAAA,CACA,OAAA,CACA,eAAA,CAGF,aACE,YAAA,CACA,4BAAA,CACA,OAAA,CAGF,aACE,MAAA,CACA,WAAA,CACA,iBAAA,CACA,cAAA,CACA,iBAAA,CACA,eAAA,CACA,6CAAA,CACA,6CAAA,CACA,wBAAA,CAEA,oBACE,6CAAA,CAGF,oBACE,qBAAA,CAGF,yBACE,iBAAA,CACA,OAAA,CACA,SAAA,CACA,UAAA,CACA,WAAA,CACA,+BAAA,CACA,iBAAA,CACA,YAAA,CACA,kBAAA,CACA,sBAAA,CACA,SAAA,CACA,mBAAA,CACA,sBAAA,CAEA,iEACE,UAAA,CACA,iBAAA,CACA,UAAA,CACA,UAAA,CACA,qBAAA,CAEF,iCAAA,uBAAA,CACA,gCAAA,wBAAA,CAGF,uCACE,SAAA,CACA,kBAAA,CC7DJ,YACE,qBAAA,CACA,uBAAA,CACA,YAAA,CACA,2CAAA,CACA,aAAA,CACA,gBAAA,CACA,iBAAA,CACA,kCAAA,CACA,eAAA,CACA,eAAA,CACA,gBAAA,CACA,wBAAA,CCZF,OACE,cAAA,CACA,YAAA,CACA,MAAA,CACA,KAAA,CACA,UAAA,CACA,WAAA,CACA,aAAA,CACA,+BAAA,CACA,YAAA,CACA,sBAAA,CACA,sBAAA,CACA,gBAAA,CAGF,eACE,8CAAA,CACA,6BAAA,CACA,WAAA,CACA,YAAA,CACA,0CAAA,CACA,SAAA,CACA,eAAA,CACA,kBAAA,CACA,iBAAA,CACA,iBAAA,CAEA,0BACE,iBAAA,CACA,QAAA,CACA,UAAA,CACA,UAAA,CACA,cAAA,CACA,gBAAA,CACA,cAAA,CAEA,gEAEE,gCAAA,CACA,oBAAA,CAIJ,kBACE,YAAA,CAGF,iCACE,aAAA,CAGF,6BACE,oBAAA,CACA,iBAAA,CACA,6CAAA,CACA,iCAAA,CACA,oBAAA,CACA,iBAAA,CACA,kBAAA,CAEA,oCACE,wBAAA,CAIJ,iCACE,eAAA,CAEA,mCACE,YAAA,CAGF,sCACE,+BAAA,CACA,eAAA,CACA,iBAAA,CACA,oBAAA,CAIJ,iCACE,iBAAA,CACA,wBAAA,CACA,UAAA,CACA,WAAA,CACA,iBAAA,CACA,cAAA,CACA,cAAA,CCvFJ,yBACE,YACE,aAAA,CAGF,+BACE,qBAAA,CACA,UAAA,CACA,OAAA,CACA,SAAA,CACA,eAAA,CAGF,eACE,UAAA,CACA,eAAA,CACA,QAAA,CACA,qBAAA,CAAA,CAIJ,qDACE,+BACE,YAAA,CACA,0DAAA,CACA,kBAAA,CAAA,CCzBJ,gBACE,2BAAA,CACA,wBAAA,CACA,uBAAA,CACA,qBAAA,CACA,uBAAA,CACA,uBAAA,CACA,6BAAA,CACA,4CAAA,CACA,kCAAA,CAEA,oGAAA,CACA,2BAAA,CACA,uBAAA,CAEA,+BACE,qCAAA,CACA,oCAAA,CAGF,mEACE,yBAAA,CAGF,uBACE,oCAAA,CACA,6BAAA,CACA,oCAAA,CAGF,+DACE,qBAAA,CAGF,wDAAA,8BAAA,CACA,oDAAA,8BAAA,CAEA,2BACE,YAAA,CACA,oCAAA,CACA,oCAAA,CACA,iBAAA,CACA,eAAA,CACA,SAAA,CACA,uDAAA,0CAAA,CACA,0DACE,6CAAA,CACA,oCAAA,CACA,gBAAA,CChDN,eACE,2BAAA,CACA,wBAAA,CACA,uBAAA,CACA,qBAAA,CACA,uBAAA,CACA,uBAAA,CACA,6BAAA,CACA,4CAAA,CACA,kCAAA,CAEA,oGAAA,CACA,2BAAA,CACA,uBAAA,CAEA,8BACE,qCAAA,CACA,oCAAA,CAGF,iEACE,yBAAA,CAGF,sBACE,oCAAA,CACA,6BAAA,CACA,oCAAA,CAGF,6DACE,qBAAA,CACA,SAAA,CAGF,uDAAA,8BAAA,CACA,mDAAA,8BAAA,CAEA,0BACE,YAAA,CACA,oCAAA,CACA,oCAAA,CACA,iBAAA,CACA,eAAA,CACA,SAAA,CACA,sDAAA,0CAAA,CACA,yDACE,6CAAA,CACA,oCAAA,CACA,gBAAA,CCjDN,iBACE,2BAAA,CACA,wBAAA,CACA,uBAAA,CACA,qBAAA,CACA,uBAAA,CACA,oBAAA,CACA,0BAAA,CACA,0CAAA,CACA,kCAAA,CAEA,oGAAA,CACA,2BAAA,CACA,uBAAA,CAEA,gCACE,qCAAA,CACA,oCAAA,CAGF,qEACE,yBAAA,CAGF,wBACE,oCAAA,CACA,6BAAA,CACA,oCAAA,CAGF,iEACE,qBAAA,CACA,UAAA,CAGF,yDAAA,8BAAA,CACA,qDAAA,8BAAA,CAEA,4BACE,YAAA,CACA,oCAAA,CACA,oCAAA,CACA,iBAAA,CACA,eAAA,CACA,SAAA,CACA,wDAAA,0CAAA,CACA,2DACE,6CAAA,CACA,oCAAA,CACA,gBAAA,CCjDN,eACE,2BAAA,CACA,wBAAA,CACA,uBAAA,CACA,qBAAA,CACA,uBAAA,CACA,uBAAA,CACA,6BAAA,CACA,4CAAA,CACA,kCAAA,CAEA,oGAAA,CACA,2BAAA,CACA,uBAAA,CAEA,8BACE,qCAAA,CACA,oCAAA,CAGF,iEACE,yBAAA,CAGF,sBACE,oCAAA,CACA,6BAAA,CACA,oCAAA,CAGF,6DACE,wBAAA,CAGF,uDAAA,8BAAA,CACA,mDAAA,8BAAA,CAEA,0BACE,YAAA,CACA,oCAAA,CACA,oCAAA,CACA,iBAAA,CACA,eAAA,CACA,SAAA,CACA,sDAAA,0CAAA,CACA,yDACE,6CAAA,CACA,oCAAA,CACA,gBAAA,CChDN,eACE,2BAAA,CACA,wBAAA,CACA,uBAAA,CACA,qBAAA,CACA,uBAAA,CACA,uBAAA,CACA,6BAAA,CACA,4CAAA,CACA,kCAAA,CAEA,oGAAA,CACA,2BAAA,CACA,uBAAA,CAEA,8BACE,qCAAA,CACA,oCAAA,CAGF,iEACE,yBAAA,CAGF,sBACE,oCAAA,CACA,UAAA,CACA,oCAAA,CAGF,6DACE,wBAAA,CAGF,uDAAA,8BAAA,CACA,mDAAA,8BAAA,CAEA,0BACE,YAAA,CACA,oCAAA,CACA,oCAAA,CACA,iBAAA,CACA,eAAA,CACA,SAAA,CACA,sDAAA,0CAAA,CACA,yDACE,6CAAA,CACA,oCAAA,CACA,gBAAA,CChDN,eACE,2BAAA,CACA,wBAAA,CACA,uBAAA,CACA,qBAAA,CACA,uBAAA,CACA,uBAAA,CACA,6BAAA,CACA,4CAAA,CACA,kCAAA,CAEA,oGAAA,CACA,2BAAA,CACA,uBAAA,CAEA,8BACE,qCAAA,CACA,oCAAA,CAGF,iEACE,yBAAA,CAGF,sBACE,oCAAA,CACA,UAAA,CACA,oCAAA,CAGF,6DACE,qBAAA,CACA,UAAA,CAGF,uDAAA,8BAAA,CACA,mDAAA,8BAAA,CAEA,0BACE,YAAA,CACA,oCAAA,CACA,oCAAA,CACA,iBAAA,CACA,eAAA,CACA,SAAA,CACA,sDAAA,0CAAA,CACA,yDACE,6CAAA,CACA,oCAAA,CACA,gBAAA,CCjDN,gBACE,2BAAA,CACA,wBAAA,CACA,uBAAA,CACA,qBAAA,CACA,oBAAA,CACA,oBAAA,CACA,0BAAA,CACA,4CAAA,CACA,kCAAA,CAEA,oGAAA,CACA,2BAAA,CACA,uBAAA,CAEA,+BACE,qCAAA,CACA,oCAAA,CAGF,mEACE,yBAAA,CAGF,uBACE,oCAAA,CACA,UAAA,CACA,oCAAA,CAGF,+DACE,wBAAA,CACA,UAAA,CAGF,wDAAA,8BAAA,CACA,oDAAA,8BAAA,CAEA,2BACE,YAAA,CACA,oCAAA,CACA,oCAAA,CACA,iBAAA,CACA,eAAA,CACA,SAAA,CACA,uDAAA,0CAAA,CACA,0DACE,6CAAA,CACA,oCAAA,CACA,gBAAA,CCjDN,eACE,2BAAA,CACA,wBAAA,CACA,uBAAA,CACA,qBAAA,CACA,uBAAA,CACA,uBAAA,CACA,6BAAA,CACA,4CAAA,CACA,kCAAA,CAEA,oGAAA,CACA,2BAAA,CACA,uBAAA,CAEA,8BACE,qCAAA,CACA,oCAAA,CAGF,iEACE,yBAAA,CAGF,sBACE,oCAAA,CACA,UAAA,CACA,oCAAA,CAGF,6DACE,qBAAA,CACA,UAAA,CAGF,uDAAA,8BAAA,CACA,mDAAA,8BAAA,CAEA,0BACE,YAAA,CACA,oCAAA,CACA,oCAAA,CACA,iBAAA,CACA,eAAA,CACA,SAAA,CACA,sDAAA,0CAAA,CACA,yDACE,6CAAA,CACA,oCAAA,CACA,gBAAA,CCzBN,UACI,aAAA,CAGJ,KACI,yFAAA,CACA,wBAAA,CACA,QAAA,CACA,WAAA,CACA,qBAAA,CACA,gBAAA,CACA,YAAA,CACA,kBAAA,CAGJ,MACI,iBAAA,CAGJ,KACE,iBAAA,CAGF,mBACE,oBAAA,CACA,eAAA,CAIF,iBACI,YAAA,CACA,0DAAA,CACA,QAAA,CACA,YAAA,CACA,wBAAA,CACA,kBAAA,CACA,kCAAA,CAIJ,oEAOE,gBAAA,CACA,wBAAA,CACA,qBAAA,CACA,oBAAA,CAIF,kBACE,uBAAA,CACA,UAAA,CACA,UAAA,CACA,kBAAA,CACA,iBAAA,CACA,YAAA,CAEA,wCACE,uBAAA,CACA,eAAA,CACA,UAAA,CACA,WAAA,CACA,uCAAA,CACA,cAAA,CACA,iBAAA,CAGF,oCACE,UAAA,CACA,WAAA,CACA,uCAAA,CACA,cAAA,CACA,iBAAA",sourcesContent:[".channel-strip {\n    background-color: #4a4f57;\n    border: 1px solid #282c34;\n    border-radius: 8px;\n    padding: 10px; // Reduced padding\n    width: 300px;\n    display: flex;\n    flex-direction: column;\n    gap: 10px; // Reduced gap\n\n    .controls {\n        display: flex;\n        flex-direction: column;\n        gap: 10px;\n    }\n\n    .play-controls {\n        display: flex;\n        gap: 10px;\n        \n        button {\n            flex-grow: 1;\n        }\n\n        .cue-btn {\n            background-color: #5a5f67;\n            color: #ffffff;\n\n            &.active {\n                background-color: #ff9800; // Bright color when active\n                color: #282c34;\n            }\n        }\n    }\n\n    .time-controls {\n        display: flex;\n        align-items: center;\n        gap: 10px;\n        width: 100%;\n\n        .time-slider {\n            flex-grow: 1;\n        }\n\n        .time-current, .time-remaining {\n            font-family: 'Courier New', Courier, monospace;\n            font-size: 14px;\n            font-weight: bold;\n            min-width: 40px; // Prevent layout shifts\n            text-align: center;\n        }\n    }\n\n    .knob-row {\n        display: flex;\n        justify-content: space-around;\n        width: 100%;\n        margin-top: 10px;\n    }\n\n    button {\n        background-color: var(--accent-color, #61dafb);\n        border: none;\n        color: var(--background-color, #282c34);\n        padding: 8px;\n        border-radius: 4px;\n        cursor: pointer;\n        font-weight: bold;\n        transition: background-color 0.2s;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n\n        &:hover {\n            filter: brightness(1.2);\n        }\n\n        svg {\n            width: 20px;\n            height: 20px;\n            fill: currentColor;\n        }\n    }\n}\n",".crossfader {\n    height: 15px; // Make the track taller\n    margin: 10px 0;\n}\n\n// Mixer-specific styles\n#master-controls {\n    justify-content: flex-start; // Align items to the top\n    align-items: center;\n    gap: 15px; // Reduced gap\n\n    #visualizer {\n        background-color: #282c34;\n        border: 1px solid #5a5f67;\n        border-radius: 4px;\n        width: 100%;\n        height: 100px;\n    }\n\n    .volume-controls {\n        display: flex;\n        width: 100%;\n        gap: 20px;\n        justify-content: space-around;\n    }\n\n    .recorder-controls {\n        display: flex;\n        width: 100%;\n        gap: 10px;\n        margin-top: 10px;\n\n        button {\n            flex-grow: 1;\n        }\n\n        #record-btn.active {\n            background-color: #e91e63; // Red color when recording\n            color: white;\n        }\n\n        button:disabled {\n            background-color: #5a5f67;\n            cursor: not-allowed;\n        }\n    }\n\n    .effects-rack {\n        width: 100%;\n        display: flex;\n        flex-direction: column;\n        gap: 10px;\n        margin-top: 10px;\n\n        h3 {\n            margin: 0;\n            text-align: center;\n        }\n\n        .knob-row {\n            display: flex;\n            justify-content: space-around;\n            width: 100%;\n        }\n\n        .fader-group {\n            display: flex;\n            flex-direction: column;\n            align-items: center;\n            gap: 5px;\n\n            label {\n                font-weight: bold;\n            }\n        }\n    }\n}",".track-item {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 8px 12px;\n  cursor: pointer;\n  border-bottom: 1px solid #444;\n  transition: background-color 0.2s ease;\n\n  &:hover {\n    background-color: #3a3f4b;\n  }\n\n  &.selected {\n    background-color: #61dafb;\n    color: #282c34;\n  }\n\n  .track-name {\n    flex-grow: 1;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n  }\n\n  .bpm {\n    margin-left: 16px;\n    font-weight: bold;\n    color: #888;\n  }\n}\n","#skin-toggler {\n  position: fixed;\n  top: 10px;\n  left: 10px;\n  z-index: 100;\n  display: flex;\n  align-items: center;\n}\n\n#skin-toggle-btn {\n  width: 40px;\n  height: 40px;\n  padding: 5px;\n  border-radius: 50%;\n  z-index: 10; // Keep button on top\n  flex-shrink: 0; // Prevent button from shrinking\n}\n\n.skin-buttons-container {\n  position: relative;\n  left: 1em; // Position to the right of the button\n  display: flex;\n  gap: 5px;\n  background-color: var(--primary-color, #3a3f47);\n  padding: 5px 10px;\n  border-radius: 25px;\n  \n  // Hiding/Showing logic\n  opacity: 0;\n  transform: translateX(-20px);\n  pointer-events: none;\n  transition: opacity 0.3s ease, transform 0.3s ease;\n\n  &.visible {\n    opacity: 1;\n    transform: translateX(0);\n    pointer-events: all;\n  }\n}\n\n.skin-btn {\n  font-size: 12px;\n  padding: 5px 10px;\n  margin: 0;\n  white-space: nowrap;\n}\n",".knob-container {\n  position: relative;\n  width: 50px;\n  height: 50px;\n  cursor: pointer;\n\n  .knob {\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n    background-color: #555;\n    border: 2px solid #333;\n    box-shadow: inset 0 0 10px rgba(0,0,0,0.5);\n    display: flex;\n    justify-content: center;\n    align-items: center; // Center the value display\n    transition: transform 0.1s;\n    position: relative; // For positioning the marker\n\n    // The rotating marker\n    &::after {\n      content: '';\n      position: absolute;\n      top: 5px;\n      width: 4px;\n      height: 15px;\n      background-color: var(--accent-color, #61dafb);\n      border-radius: 2px;\n    }\n  }\n\n  .knob-value {\n    font-size: 12px;\n    font-weight: bold;\n    color: #fff;\n    text-shadow: 1px 1px 2px rgba(0,0,0,0.7);\n    z-index: 1; // Ensure it's on top of the marker\n    user-select: none;\n    -webkit-user-select: none;\n  }\n}\n",".sampler-pads {\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  gap: 5px;\n  margin-top: 15px;\n}\n\n.sampler-row {\n  display: flex;\n  justify-content: space-around;\n  gap: 5px;\n}\n\n.sampler-pad {\n  flex: 1;\n  height: 60px;\n  border-radius: 4px;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n  transition: background-color 0.2s, transform 0.1s;\n  border: 2px solid var(--border-color, #5a5f67);\n  background-color: #5a5f67; // Default grey state\n\n  &.loaded {\n    background-color: var(--accent-color, #006400); // Green when loaded\n  }\n\n  &:active {\n    transform: scale(0.95);\n  }\n\n  .trash-icon {\n    position: absolute;\n    top: 5px;\n    right: 5px;\n    width: 20px;\n    height: 20px;\n    background-color: rgba(0, 0, 0, 0.5);\n    border-radius: 50%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    opacity: 0;\n    pointer-events: none;\n    transition: opacity 0.2s;\n\n    &::before, &::after {\n      content: '';\n      position: absolute;\n      width: 12px;\n      height: 2px;\n      background-color: white;\n    }\n    &::before { transform: rotate(45deg); }\n    &::after { transform: rotate(-45deg); }\n  }\n\n  &.delete-active .trash-icon {\n    opacity: 1;\n    pointer-events: all;\n  }\n}\n","#header-art {\n  box-sizing: border-box;\n  margin: 0 auto 15px auto;\n  padding: 10px;\n  font-family: 'Courier New', Courier, monospace;\n  font-size: 3px;\n  font-weight: bold; // Make font bold\n  text-align: center;\n  color: var(--accent-color, #61dafb);\n  white-space: pre;\n  overflow: hidden;\n  user-select: none;\n  -webkit-user-select: none;\n}\n",".modal {\n  position: fixed;\n  z-index: 1000;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  overflow: auto;\n  background-color: rgba(0, 0, 0, 0.6);\n  display: flex;\n  align-items: flex-start; /* Align to top */\n  justify-content: center;\n  padding-top: 10vh; /* Add space above */\n}\n\n.modal-content {\n  background-color: var(--primary-color, #fefefe);\n  color: var(--text-color, #000);\n  margin: auto;\n  padding: 20px;\n  border: 1px solid var(--accent-color, #888);\n  width: 80%;\n  max-width: 500px;\n  border-radius: 10px;\n  text-align: center;\n  position: relative;\n\n  .close-btn {\n    position: absolute;\n    top: 10px;\n    right: 20px;\n    color: #aaa;\n    font-size: 28px;\n    font-weight: bold;\n    cursor: pointer;\n\n    &:hover,\n    &:focus {\n      color: var(--accent-color, black);\n      text-decoration: none;\n    }\n  }\n\n  h2 {\n    margin-top: 0;\n  }\n\n  .donation-options {\n    margin: 20px 0;\n  }\n\n  .donation-btn {\n    display: inline-block;\n    padding: 10px 20px;\n    background-color: var(--accent-color, #007bff);\n    color: var(--primary-color, white);\n    text-decoration: none;\n    border-radius: 5px;\n    margin-bottom: 10px;\n\n    &.paypal {\n      background-color: #00457C;\n    }\n  }\n\n  .crypto-donations {\n    margin-top: 15px;\n\n    p {\n      margin: 5px 0;\n    }\n\n    code {\n      background-color: rgba(0, 0, 0, 0.1);\n      padding: 3px 5px;\n      border-radius: 3px;\n      word-wrap: break-word;\n    }\n  }\n\n  .download-now-btn {\n    padding: 10px 20px;\n    background-color: #28a745;\n    color: white;\n    border: none;\n    border-radius: 5px;\n    cursor: pointer;\n    font-size: 16px;\n  }\n}\n","@media (max-width: 768px) {\n  #header-art {\n    font-size: 6px;\n  }\n\n  .mixer-container.mobile-layout {\n    flex-direction: column;\n    width: 100%;\n    gap: 1em;\n    padding: 0;\n    border-radius: 0;\n  }\n\n  .channel-strip {\n    width: 100%;\n    border-radius: 0;\n    margin: 0;\n    box-sizing: border-box;\n  }\n}\n\n@media (max-width: 900px) and (orientation: landscape) {\n  .mixer-container.mobile-layout {\n    display: grid;\n    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n    flex-direction: row;\n  }\n}\n",'body.skin-light {\n  --background-color: #ffffff;\n  --primary-color: #f0fff0;\n  --accent-color: #3cb371;\n  --text-color: #000000;\n  --border-color: #90ee90;\n  --tracklist-bg: #f5f5f5;\n  --tracklist-hover-bg: #e0e0e0;\n  --tracklist-selected-bg: var(--accent-color);\n  --tracklist-selected-text: #ffffff;\n\n  background: radial-gradient(ellipse at center, var(--primary-color) 0%, var(--background-color) 100%);\n  background-attachment: fixed;\n  color: var(--text-color);\n\n  .channel-strip {\n    background-color: var(--primary-color);\n    border: 2px solid var(--border-color);\n  }\n\n  .channel-strip h2, .effects-rack h3 {\n    color: var(--accent-color);\n  }\n\n  button {\n    background-color: var(--accent-color);\n    color: var(--background-color);\n    border: 1px solid var(--border-color);\n  }\n\n  .play-btn.active, button.active {\n    background-color: #ffd700;\n  }\n\n  input[type="range"]::-webkit-slider-thumb { background: var(--accent-color); }\n  input[type="range"]::-moz-range-thumb { background: var(--accent-color); }\n\n  .tracklist {\n    height: 200px;\n    background-color: var(--tracklist-bg);\n    border: 1px solid var(--border-color);\n    border-radius: 4px;\n    overflow-y: auto;\n    padding: 0;\n    .gridjs-tr:hover .gridjs-td { background-color: var(--tracklist-hover-bg); }\n    .gridjs-tr-selected .gridjs-td {\n      background-color: var(--tracklist-selected-bg);\n      color: var(--tracklist-selected-text);\n      font-weight: bold;\n    }\n  }\n}','body.skin-dark {\n  --background-color: #000000;\n  --primary-color: #1a1a1a;\n  --accent-color: #ff0000;\n  --text-color: #ffffff;\n  --border-color: #444444;\n  --tracklist-bg: #282c34;\n  --tracklist-hover-bg: #5a5f67;\n  --tracklist-selected-bg: var(--accent-color);\n  --tracklist-selected-text: #ffffff;\n\n  background: radial-gradient(ellipse at center, var(--primary-color) 0%, var(--background-color) 100%);\n  background-attachment: fixed;\n  color: var(--text-color);\n\n  .channel-strip {\n    background-color: var(--primary-color);\n    border: 2px solid var(--border-color);\n  }\n\n  .channel-strip h2, .effects-rack h3 {\n    color: var(--accent-color);\n  }\n\n  button {\n    background-color: var(--accent-color);\n    color: var(--background-color);\n    border: 1px solid var(--border-color);\n  }\n\n  .play-btn.active, button.active {\n    background-color: #ffffff;\n    color: #ff0000;\n  }\n\n  input[type="range"]::-webkit-slider-thumb { background: var(--accent-color); }\n  input[type="range"]::-moz-range-thumb { background: var(--accent-color); }\n\n  .tracklist {\n    height: 200px;\n    background-color: var(--tracklist-bg);\n    border: 1px solid var(--border-color);\n    border-radius: 4px;\n    overflow-y: auto;\n    padding: 0;\n    .gridjs-tr:hover .gridjs-td { background-color: var(--tracklist-hover-bg); }\n    .gridjs-tr-selected .gridjs-td {\n      background-color: var(--tracklist-selected-bg);\n      color: var(--tracklist-selected-text);\n      font-weight: bold;\n    }\n  }\n}','body.skin-reggae {\n  --background-color: #000000;\n  --primary-color: #1a1a1a;\n  --accent-color: #006400;\n  --text-color: #ffff00;\n  --border-color: #444444;\n  --tracklist-bg: #111;\n  --tracklist-hover-bg: #444;\n  --tracklist-selected-bg: var(--text-color);\n  --tracklist-selected-text: #000000;\n\n  background: radial-gradient(ellipse at center, var(--primary-color) 0%, var(--background-color) 100%);\n  background-attachment: fixed;\n  color: var(--text-color);\n\n  .channel-strip {\n    background-color: var(--primary-color);\n    border: 2px solid var(--border-color);\n  }\n\n  .channel-strip h2, .effects-rack h3 {\n    color: var(--accent-color);\n  }\n\n  button {\n    background-color: var(--accent-color);\n    color: var(--background-color);\n    border: 1px solid var(--border-color);\n  }\n\n  .play-btn.active, button.active {\n    background-color: #ffff00;\n    color: #000000;\n  }\n\n  input[type="range"]::-webkit-slider-thumb { background: var(--accent-color); }\n  input[type="range"]::-moz-range-thumb { background: var(--accent-color); }\n\n  .tracklist {\n    height: 200px;\n    background-color: var(--tracklist-bg);\n    border: 1px solid var(--border-color);\n    border-radius: 4px;\n    overflow-y: auto;\n    padding: 0;\n    .gridjs-tr:hover .gridjs-td { background-color: var(--tracklist-hover-bg); }\n    .gridjs-tr-selected .gridjs-td {\n      background-color: var(--tracklist-selected-bg);\n      color: var(--tracklist-selected-text);\n      font-weight: bold;\n    }\n  }\n}\n','body.skin-hack {\n  --background-color: #36393f;\n  --primary-color: #2f3136;\n  --accent-color: #5865f2;\n  --text-color: #ffffff;\n  --border-color: #4f545c;\n  --tracklist-bg: #202225;\n  --tracklist-hover-bg: #4f545c;\n  --tracklist-selected-bg: var(--accent-color);\n  --tracklist-selected-text: #ffffff;\n\n  background: radial-gradient(ellipse at center, var(--primary-color) 0%, var(--background-color) 100%);\n  background-attachment: fixed;\n  color: var(--text-color);\n\n  .channel-strip {\n    background-color: var(--primary-color);\n    border: 2px solid var(--border-color);\n  }\n\n  .channel-strip h2, .effects-rack h3 {\n    color: var(--accent-color);\n  }\n\n  button {\n    background-color: var(--accent-color);\n    color: var(--background-color);\n    border: 1px solid var(--border-color);\n  }\n\n  .play-btn.active, button.active {\n    background-color: #f9a825;\n  }\n\n  input[type="range"]::-webkit-slider-thumb { background: var(--accent-color); }\n  input[type="range"]::-moz-range-thumb { background: var(--accent-color); }\n\n  .tracklist {\n    height: 200px;\n    background-color: var(--tracklist-bg);\n    border: 1px solid var(--border-color);\n    border-radius: 4px;\n    overflow-y: auto;\n    padding: 0;\n    .gridjs-tr:hover .gridjs-td { background-color: var(--tracklist-hover-bg); }\n    .gridjs-tr-selected .gridjs-td {\n      background-color: var(--tracklist-selected-bg);\n      color: var(--tracklist-selected-text);\n      font-weight: bold;\n    }\n  }\n}\n','body.skin-vice {\n  --background-color: #d3d3d3; // Light Grey\n  --primary-color: #e6e6fa;    // Lavender\n  --accent-color: #ff69b4;     // Hot Pink\n  --text-color: #4b0082;       // Indigo\n  --border-color: #8a2be2;     // Blue Violet\n  --tracklist-bg: #f5f5f5;\n  --tracklist-hover-bg: #e0e0e0;\n  --tracklist-selected-bg: var(--accent-color);\n  --tracklist-selected-text: #ffffff;\n\n  background: radial-gradient(ellipse at center, var(--primary-color) 0%, var(--background-color) 100%);\n  background-attachment: fixed;\n  color: var(--text-color);\n\n  .channel-strip {\n    background-color: var(--primary-color);\n    border: 2px solid var(--border-color);\n  }\n\n  .channel-strip h2, .effects-rack h3 {\n    color: var(--accent-color);\n  }\n\n  button {\n    background-color: var(--accent-color);\n    color: #ffffff;\n    border: 1px solid var(--border-color);\n  }\n\n  .play-btn.active, button.active {\n    background-color: #8a2be2;\n  }\n\n  input[type="range"]::-webkit-slider-thumb { background: var(--accent-color); }\n  input[type="range"]::-moz-range-thumb { background: var(--accent-color); }\n\n  .tracklist {\n    height: 200px;\n    background-color: var(--tracklist-bg);\n    border: 1px solid var(--border-color);\n    border-radius: 4px;\n    overflow-y: auto;\n    padding: 0;\n    .gridjs-tr:hover .gridjs-td { background-color: var(--tracklist-hover-bg); }\n    .gridjs-tr-selected .gridjs-td {\n      background-color: var(--tracklist-selected-bg);\n      color: var(--tracklist-selected-text);\n      font-weight: bold;\n    }\n  }\n}\n','body.skin-funk {\n  --background-color: #ffffff;\n  --primary-color: #f5f5dc;    // Beige\n  --accent-color: #000080;     // Navy (Marine Blue)\n  --text-color: #000000;\n  --border-color: #ffd700;     // Gold (Yellow)\n  --tracklist-bg: #fafad2;\n  --tracklist-hover-bg: #eee8aa;\n  --tracklist-selected-bg: var(--accent-color);\n  --tracklist-selected-text: #ffffff;\n\n  background: radial-gradient(ellipse at center, var(--primary-color) 0%, var(--background-color) 100%);\n  background-attachment: fixed;\n  color: var(--text-color);\n\n  .channel-strip {\n    background-color: var(--primary-color);\n    border: 2px solid var(--border-color);\n  }\n\n  .channel-strip h2, .effects-rack h3 {\n    color: var(--accent-color);\n  }\n\n  button {\n    background-color: var(--accent-color);\n    color: #ffffff;\n    border: 1px solid var(--border-color);\n  }\n\n  .play-btn.active, button.active {\n    background-color: #ffd700;\n    color: #000000;\n  }\n\n  input[type="range"]::-webkit-slider-thumb { background: var(--accent-color); }\n  input[type="range"]::-moz-range-thumb { background: var(--accent-color); }\n\n  .tracklist {\n    height: 200px;\n    background-color: var(--tracklist-bg);\n    border: 1px solid var(--border-color);\n    border-radius: 4px;\n    overflow-y: auto;\n    padding: 0;\n    .gridjs-tr:hover .gridjs-td { background-color: var(--tracklist-hover-bg); }\n    .gridjs-tr-selected .gridjs-td {\n      background-color: var(--tracklist-selected-bg);\n      color: var(--tracklist-selected-text);\n      font-weight: bold;\n    }\n  }\n}\n','body.skin-grime {\n  --background-color: #000000;\n  --primary-color: #1c1c1c;\n  --accent-color: #ffffff;\n  --text-color: #a9a9a9;     // Dark Grey\n  --border-color: #444;\n  --tracklist-bg: #111;\n  --tracklist-hover-bg: #333;\n  --tracklist-selected-bg: var(--accent-color);\n  --tracklist-selected-text: #000000;\n\n  background: radial-gradient(ellipse at center, var(--primary-color) 0%, var(--background-color) 100%);\n  background-attachment: fixed;\n  color: var(--text-color);\n\n  .channel-strip {\n    background-color: var(--primary-color);\n    border: 2px solid var(--border-color);\n  }\n\n  .channel-strip h2, .effects-rack h3 {\n    color: var(--accent-color);\n  }\n\n  button {\n    background-color: var(--accent-color);\n    color: #000000;\n    border: 1px solid var(--border-color);\n  }\n\n  .play-btn.active, button.active {\n    background-color: #a9a9a9;\n    color: #000000;\n  }\n\n  input[type="range"]::-webkit-slider-thumb { background: var(--accent-color); }\n  input[type="range"]::-moz-range-thumb { background: var(--accent-color); }\n\n  .tracklist {\n    height: 200px;\n    background-color: var(--tracklist-bg);\n    border: 1px solid var(--border-color);\n    border-radius: 4px;\n    overflow-y: auto;\n    padding: 0;\n    .gridjs-tr:hover .gridjs-td { background-color: var(--tracklist-hover-bg); }\n    .gridjs-tr-selected .gridjs-td {\n      background-color: var(--tracklist-selected-bg);\n      color: var(--tracklist-selected-text);\n      font-weight: bold;\n    }\n  }\n}\n','body.skin-jazz {\n  --background-color: #f5f5f5; // White Smoke\n  --primary-color: #dcdcdc;    // Gainsboro (Grey)\n  --accent-color: #b22222;     // Firebrick (Red)\n  --text-color: #000000;\n  --border-color: #808080;     // Grey\n  --tracklist-bg: #ffffff;\n  --tracklist-hover-bg: #f0f0f0;\n  --tracklist-selected-bg: var(--accent-color);\n  --tracklist-selected-text: #ffffff;\n\n  background: radial-gradient(ellipse at center, var(--primary-color) 0%, var(--background-color) 100%);\n  background-attachment: fixed;\n  color: var(--text-color);\n\n  .channel-strip {\n    background-color: var(--primary-color);\n    border: 2px solid var(--border-color);\n  }\n\n  .channel-strip h2, .effects-rack h3 {\n    color: var(--accent-color);\n  }\n\n  button {\n    background-color: var(--accent-color);\n    color: #ffffff;\n    border: 1px solid var(--border-color);\n  }\n\n  .play-btn.active, button.active {\n    background-color: #000000;\n    color: #ffffff;\n  }\n\n  input[type="range"]::-webkit-slider-thumb { background: var(--accent-color); }\n  input[type="range"]::-moz-range-thumb { background: var(--accent-color); }\n\n  .tracklist {\n    height: 200px;\n    background-color: var(--tracklist-bg);\n    border: 1px solid var(--border-color);\n    border-radius: 4px;\n    overflow-y: auto;\n    padding: 0;\n    .gridjs-tr:hover .gridjs-td { background-color: var(--tracklist-hover-bg); }\n    .gridjs-tr-selected .gridjs-td {\n      background-color: var(--tracklist-selected-bg);\n      color: var(--tracklist-selected-text);\n      font-weight: bold;\n    }\n  }\n}\n',"// Import component styles first, as required by Sass\n@use 'components/channels';\n@use 'components/effects';\n@use 'components/mixer';\n@use 'components/recorder';\n@use 'components/tracklist';\n@use 'components/skin-toggler';\n@use 'components/knobs';\n@use 'components/sampler';\n@use 'components/header-art';\n@use 'components/donation-modal';\n@use 'components/mobile';\n\n// --- Skin Imports ---\n@use 'skins/light';\n@use 'skins/dark';\n@use 'skins/reggae';\n@use 'skins/hack';\n@use 'skins/vice';\n@use 'skins/funk';\n@use 'skins/grime';\n@use 'skins/jazz';\n\n// Base styles\nhtml, body {\n    overflow: auto;\n}\n\nbody {\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;\n    background-color: #282c34;\n    margin: 0;\n    padding: 1em;\n    box-sizing: border-box;\n    min-height: 100vh;\n    display: grid;\n    place-items: center;\n}\n\nh1, h2 {\n    text-align: center;\n}\n\n#app {\n  text-align: center; // Center the wrapper\n}\n\n#interface-wrapper {\n  display: inline-block; // Shrink-wrap the content\n  text-align: left; // Reset text-align for the content\n}\n\n// Main container\n.mixer-container {\n    display: grid;\n    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n    gap: 10px; // Reduced gap\n    padding: 10px; // Reduced padding\n    background-color: #3a3f47;\n    border-radius: 10px;\n    box-shadow: 0 0 20px rgba(0,0,0,0.5);\n}\n\n// Disable text selection on interactive elements\n.knob-container,\nh2,\nh3,\ninput[type=\"range\"],\nbutton,\nlabel,\n.selected-path {\n  user-select: none;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n}\n\n// General Fader Styles\ninput[type=\"range\"] {\n  -webkit-appearance: none;\n  width: 100%;\n  height: 8px;\n  background: #282c34;\n  border-radius: 4px;\n  outline: none;\n\n  &::-webkit-slider-thumb {\n    -webkit-appearance: none;\n    appearance: none;\n    width: 12px;\n    height: 24px;\n    background: var(--accent-color, #61dafb);\n    cursor: pointer;\n    border-radius: 2px;\n  }\n\n  &::-moz-range-thumb {\n    width: 12px;\n    height: 24px;\n    background: var(--accent-color, #61dafb);\n    cursor: pointer;\n    border-radius: 2px;\n  }\n}\n"],sourceRoot:""}]);const s=i},711:(e,t,n)=>{"use strict";n.d(t,{A:()=>_});var r=n(354),a=n.n(r),o=n(314),i=n.n(o),s=n(417),l=n.n(s),c=new URL(n(309),n.b),u=new URL(n(39),n.b),d=new URL(n(155),n.b),A=i()(a()),h=l()(c),f=l()(u),p=l()(d);A.push([e.id,`.gridjs-head button, .gridjs-footer button {\n  cursor: pointer;\n  background-color: transparent;\n  background-image: none;\n  padding: 0;\n  margin: 0;\n  border: none;\n  outline: none;\n}\n\n.gridjs-temp {\n  position: relative;\n}\n\n.gridjs-head {\n  width: 100%;\n  margin-bottom: 5px;\n  padding: 5px 1px;\n}\n.gridjs-head::after {\n  content: "";\n  display: block;\n  clear: both;\n}\n.gridjs-head:empty {\n  padding: 0;\n  border: none;\n}\n\n.gridjs-container {\n  overflow: hidden;\n  display: inline-block;\n  padding: 2px;\n  color: #000;\n  position: relative;\n  z-index: 0;\n}\n\n.gridjs-footer {\n  display: block;\n  position: relative;\n  width: 100%;\n  z-index: 5;\n  padding: 12px 24px;\n  border-top: 1px solid #e5e7eb;\n  background-color: #fff;\n  box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.26);\n  border-radius: 0 0 8px 8px;\n  border-bottom-width: 1px;\n  border-color: #e5e7eb;\n}\n.gridjs-footer:empty {\n  padding: 0;\n  border: none;\n}\n\ninput.gridjs-input {\n  outline: none;\n  background-color: #fff;\n  border: 1px solid #d2d6dc;\n  border-radius: 5px;\n  padding: 10px 13px;\n  font-size: 14px;\n  line-height: 1.45;\n  -webkit-appearance: none;\n  -moz-appearance: none;\n  appearance: none;\n}\ninput.gridjs-input:focus {\n  box-shadow: 0 0 0 3px rgba(149, 189, 243, 0.5);\n  border-color: #9bc2f7;\n}\n\n.gridjs-pagination {\n  color: #3d4044;\n}\n.gridjs-pagination::after {\n  content: "";\n  display: block;\n  clear: both;\n}\n.gridjs-pagination .gridjs-summary {\n  float: left;\n  margin-top: 5px;\n}\n.gridjs-pagination .gridjs-pages {\n  float: right;\n}\n.gridjs-pagination .gridjs-pages button {\n  padding: 5px 14px;\n  border: 1px solid #d2d6dc;\n  background-color: #fff;\n  border-right: none;\n  outline: none;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n          user-select: none;\n}\n.gridjs-pagination .gridjs-pages button:focus {\n  box-shadow: 0 0 0 2px rgba(149, 189, 243, 0.5);\n  position: relative;\n  margin-right: -1px;\n  border-right: 1px solid #d2d6dc;\n}\n.gridjs-pagination .gridjs-pages button:hover {\n  background-color: #f7f7f7;\n  color: rgb(60, 66, 87);\n  outline: none;\n}\n.gridjs-pagination .gridjs-pages button:disabled,\n.gridjs-pagination .gridjs-pages button[disabled],\n.gridjs-pagination .gridjs-pages button:hover:disabled {\n  cursor: default;\n  background-color: #fff;\n  color: #6b7280;\n}\n.gridjs-pagination .gridjs-pages button.gridjs-spread {\n  cursor: default;\n  box-shadow: none;\n  background-color: #fff;\n}\n.gridjs-pagination .gridjs-pages button.gridjs-currentPage {\n  background-color: #f7f7f7;\n  font-weight: bold;\n}\n.gridjs-pagination .gridjs-pages button:last-child {\n  border-bottom-right-radius: 6px;\n  border-top-right-radius: 6px;\n  border-right: 1px solid #d2d6dc;\n}\n.gridjs-pagination .gridjs-pages button:first-child {\n  border-bottom-left-radius: 6px;\n  border-top-left-radius: 6px;\n}\n.gridjs-pagination .gridjs-pages button:last-child:focus {\n  margin-right: 0;\n}\n\nbutton.gridjs-sort {\n  float: right;\n  height: 24px;\n  width: 13px;\n  background-color: transparent;\n  background-repeat: no-repeat;\n  background-position-x: center;\n  cursor: pointer;\n  padding: 0;\n  margin: 0;\n  border: none;\n  outline: none;\n  background-size: contain;\n}\nbutton.gridjs-sort-neutral {\n  opacity: 0.3;\n  background-image: url(${h});\n  background-position-y: center;\n}\nbutton.gridjs-sort-asc {\n  background-image: url(${f});\n  background-position-y: 35%;\n  background-size: 10px;\n}\nbutton.gridjs-sort-desc {\n  background-image: url(${p});\n  background-position-y: 65%;\n  background-size: 10px;\n}\nbutton.gridjs-sort:focus {\n  outline: none;\n}\n\ntable.gridjs-table {\n  width: 100%;\n  max-width: 100%;\n  border-collapse: collapse;\n  text-align: left;\n  display: table;\n  margin: 0;\n  padding: 0;\n  overflow: auto;\n  table-layout: fixed;\n}\n\n.gridjs-tbody {\n  background-color: #fff;\n}\n\ntd.gridjs-td {\n  border: 1px solid #e5e7eb;\n  padding: 12px 24px;\n  background-color: #fff;\n  box-sizing: content-box;\n}\ntd.gridjs-td:first-child {\n  border-left: none;\n}\ntd.gridjs-td:last-child {\n  border-right: none;\n}\ntd.gridjs-message {\n  text-align: center;\n}\n\nth.gridjs-th {\n  position: relative;\n  color: #6b7280;\n  background-color: #f9fafb;\n  border: 1px solid #e5e7eb;\n  border-top: none;\n  padding: 14px 24px;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n          user-select: none;\n  box-sizing: border-box;\n  white-space: nowrap;\n  outline: none;\n  vertical-align: middle;\n}\nth.gridjs-th .gridjs-th-content {\n  text-overflow: ellipsis;\n  overflow: hidden;\n  width: 100%;\n  float: left;\n}\nth.gridjs-th-sort {\n  cursor: pointer;\n}\nth.gridjs-th-sort .gridjs-th-content {\n  width: calc(100% - 15px);\n}\nth.gridjs-th-sort:hover {\n  background-color: #e5e7eb;\n}\nth.gridjs-th-sort:focus {\n  background-color: #e5e7eb;\n}\nth.gridjs-th-fixed {\n  position: sticky;\n  box-shadow: 0 1px 0 0 #e5e7eb;\n}\n@supports (-moz-appearance: none) {\n  th.gridjs-th-fixed {\n    box-shadow: 0 0 0 1px #e5e7eb;\n  }\n}\nth.gridjs-th:first-child {\n  border-left: none;\n}\nth.gridjs-th:last-child {\n  border-right: none;\n}\n\n.gridjs-tr {\n  border: none;\n}\n.gridjs-tr-selected td {\n  background-color: #ebf5ff;\n}\n.gridjs-tr:last-child td {\n  border-bottom: 0;\n}\n\n.gridjs *,\n.gridjs :after,\n.gridjs :before {\n  box-sizing: border-box;\n}\n\n.gridjs-wrapper {\n  position: relative;\n  z-index: 1;\n  overflow: auto;\n  width: 100%;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.26);\n  border-radius: 8px 8px 0 0;\n  display: block;\n  border-top-width: 1px;\n  border-color: #e5e7eb;\n}\n.gridjs-wrapper:nth-last-of-type(2) {\n  border-radius: 8px;\n  border-bottom-width: 1px;\n}\n\n.gridjs-search {\n  float: left;\n}\n.gridjs-search-input {\n  width: 250px;\n}\n\n.gridjs-loading-bar {\n  z-index: 10;\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  background-color: #fff;\n  opacity: 0.5;\n}\n.gridjs-loading-bar::after {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  transform: translateX(-100%);\n  background-image: linear-gradient(90deg, rgba(204, 204, 204, 0) 0, rgba(204, 204, 204, 0.2) 20%, rgba(204, 204, 204, 0.5) 60%, rgba(204, 204, 204, 0));\n  animation: shimmer 2s infinite;\n  content: "";\n}\n@keyframes shimmer {\n  100% {\n    transform: translateX(100%);\n  }\n}\n\n.gridjs-td .gridjs-checkbox {\n  display: block;\n  margin: auto;\n  cursor: pointer;\n}\n\n.gridjs-resizable {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  width: 5px;\n}\n.gridjs-resizable:hover {\n  cursor: ew-resize;\n  background-color: #9bc2f7;\n}\n\n/*# sourceMappingURL=mermaid.css.map */`,"",{version:3,sources:["webpack://./node_modules/gridjs/src/theme/mermaid/button.scss","webpack://./node_modules/gridjs/dist/theme/mermaid.css","webpack://./node_modules/gridjs/src/theme/mermaid/shadow.scss","webpack://./node_modules/gridjs/src/theme/mermaid/head.scss","webpack://./node_modules/gridjs/src/theme/mermaid/container.scss","webpack://./node_modules/gridjs/src/theme/mermaid/colors.scss","webpack://./node_modules/gridjs/src/theme/mermaid/footer.scss","webpack://./node_modules/gridjs/src/theme/mermaid/input.scss","webpack://./node_modules/gridjs/src/theme/mermaid/pagination.scss","webpack://./node_modules/gridjs/src/theme/mermaid/sort.scss","webpack://./node_modules/gridjs/src/theme/mermaid/table.scss","webpack://./node_modules/gridjs/src/theme/mermaid/tbody.scss","webpack://./node_modules/gridjs/src/theme/mermaid/td.scss","webpack://./node_modules/gridjs/src/theme/mermaid/th.scss","webpack://./node_modules/gridjs/src/theme/mermaid/tr.scss","webpack://./node_modules/gridjs/src/theme/mermaid/thead.scss","webpack://./node_modules/gridjs/src/theme/mermaid/wrapper.scss","webpack://./node_modules/gridjs/src/theme/mermaid/search.scss","webpack://./node_modules/gridjs/src/theme/mermaid/loadingBar.scss","webpack://./node_modules/gridjs/src/theme/mermaid/checkbox.scss","webpack://./node_modules/gridjs/src/theme/mermaid/resizable.scss"],names:[],mappings:"AAGI;EACE,eAAA;EACA,6BAAA;EACA,sBAAA;EACA,UAAA;EACA,SAAA;EACA,YAAA;EACA,aAAA;ACFN;;ACRA;EACE,kBAAA;ADWF;;AEXE;EACE,WAAA;EACA,kBAAA;EACA,gBAAA;AFcJ;AEZI;EACE,WAAA;EACA,cAAA;EACA,WAAA;AFcN;AEVE;EACE,UAAA;EACA,YAAA;AFYJ;;AGxBE;EACE,gBAAA;EACA,qBAAA;EACA,YAAA;EACA,WCNI;EDOJ,kBAAA;EACA,UAAA;AH2BJ;;AKjCE;EACE,cAAA;EACA,kBAAA;EACA,WAAA;EACA,UAAA;EACA,kBAAA;EACA,6BAAA;EACA,sBDVI;ECWJ,2EAAA;EACA,0BAAA;EACA,wBAAA;EACA,qBDTI;AJ6CR;AKjCE;EACE,UAAA;EACA,YAAA;ALmCJ;;AMpDA;EACE,aAAA;EACA,sBFJM;EEKN,yBAAA;EACA,kBAAA;EACA,kBAAA;EACA,eAAA;EACA,iBAAA;EACA,wBAAA;EACA,qBAAA;EACA,gBAAA;ANuDF;AMrDE;EACE,8CAAA;EACA,qBFJI;AJ2DR;;AOrEA;EACE,cHKM;AJmER;AOtEE;EACE,WAAA;EACA,cAAA;EACA,WAAA;APwEJ;AOrEE;EACE,WAAA;EACA,eAAA;APuEJ;AOpEE;EACE,YAAA;APsEJ;AOpEI;EACE,iBAAA;EACA,yBAAA;EACA,sBHtBE;EGuBF,kBAAA;EACA,aAAA;EACA,yBAAA;KAAA,sBAAA;UAAA,iBAAA;APsEN;AOnEI;EACE,8CAAA;EACA,kBAAA;EACA,kBAAA;EACA,+BAAA;APqEN;AOlEI;EACE,yBHhCE;EGiCF,sBH3BM;EG4BN,aAAA;APoEN;AOjEI;;;EAGE,eAAA;EACA,sBH7CE;EG8CF,cHvCE;AJ0GR;AOhEI;EACE,eAAA;EACA,gBAAA;EACA,sBHpDE;AJsHR;AO/DI;EACE,yBHpDE;EGqDF,iBAAA;APiEN;AO9DI;EACE,+BAAA;EACA,4BAAA;EACA,+BAAA;APgEN;AO7DI;EACE,8BAAA;EACA,2BAAA;AP+DN;AO5DI;EACE,eAAA;AP8DN;;AQrIE;EACE,YAAA;EACA,YAAA;EACA,WAAA;EACA,6BAAA;EACA,4BAAA;EACA,6BAAA;EACA,eAAA;EACA,UAAA;EACA,SAAA;EACA,YAAA;EACA,aAAA;EACA,wBAAA;ARwIJ;AQtII;EACE,YAAA;EACA,yDAAA;EACA,6BAAA;ARwIN;AQrII;EACE,yDAAA;EACA,0BAAA;EACA,qBAAA;ARuIN;AQpII;EACE,yDAAA;EACA,0BAAA;EACA,qBAAA;ARsIN;AQlIE;EACE,aAAA;ARoIJ;;AStKE;EACE,WAAA;EACA,eAAA;EACA,yBAAA;EACA,gBAAA;EACA,cAAA;EACA,SAAA;EACA,UAAA;EACA,cAAA;EACA,mBAAA;ATyKJ;;AUhLE;EACE,sBNJI;AJuLR;;AWpLE;EACE,yBAAA;EACA,kBAAA;EACA,sBPNI;EOOJ,uBAAA;AXuLJ;AWpLE;EACE,iBAAA;AXsLJ;AWnLE;EACE,kBAAA;AXqLJ;AWlLE;EACE,kBAAA;AXoLJ;;AYpME;EACE,kBAAA;EACA,cREI;EQDJ,yBRHI;EQIJ,yBAAA;EACA,gBAAA;EACA,kBAAA;EACA,yBAAA;KAAA,sBAAA;UAAA,iBAAA;EACA,sBAAA;EACA,mBAAA;EACA,aAAA;EACA,sBAAA;AZuMJ;AYrMI;EACE,uBAAA;EACA,gBAAA;EACA,WAAA;EACA,WAAA;AZuMN;AYpMI;EACE,eAAA;AZsMN;AYpMM;EACE,wBAAA;AZsMR;AYlMI;EACE,yBR3BE;AJ+NR;AYjMI;EACE,yBR/BE;AJkOR;AYhMI;EACE,gBAAA;EACA,6BAAA;AZkMN;AYhMM;EAJF;IAKI,6BAAA;EZmMN;AACF;AY/LE;EACE,iBAAA;AZiMJ;AY9LE;EACE,kBAAA;AZgMJ;;AanPE;EACE,YAAA;AbsPJ;AapPI;EACE,yBTME;AJgPR;AalPE;EACE,gBAAA;AboPJ;;Ac7PE;;;EAGE,sBAAA;AdgQJ;;AenQE;EACE,kBAAA;EACA,UAAA;EACA,cAAA;EACA,WAAA;EACA,mCAAA;EACA,kCAAA;EACA,2EAAA;EACA,0BAAA;EACA,cAAA;EAEA,qBAAA;EACA,qBXVI;AJ+QR;AelQE;EACE,kBAAA;EACA,wBAAA;AfoQJ;;AgBvRE;EACE,WAAA;AhB0RJ;AgBxRI;EACE,YAAA;AhB0RN;;AiB5RE;EACE,WAAA;EACA,kBAAA;EACA,OAAA;EACA,QAAA;EACA,MAAA;EACA,SAAA;EACA,sBbVI;EaWJ,YAAA;AjB+RJ;AiB7RI;EACE,kBAAA;EACA,MAAA;EACA,QAAA;EACA,SAAA;EACA,OAAA;EACA,4BAAA;EACA,sJAAA;EAOA,8BAAA;EACA,WAAA;AjByRN;AiBtRI;EACE;IACE,2BAAA;EjBwRN;AACF;;AkBxTI;EACE,cAAA;EACA,YAAA;EACA,eAAA;AlB2TN;;AmB7TE;EACE,kBAAA;EACA,MAAA;EACA,SAAA;EACA,QAAA;EACA,UAAA;AnBgUJ;AmB9TI;EACE,iBAAA;EACA,yBAAA;AnBgUN;;AAMA,sCAAsC",sourceRoot:""}]);const _=A},715:(e,t,n)=>{var r=n(987),a=n(156),o=n(122),i=n(752);e.exports=function(e,t){return r(e)||a(e,t)||o(e,t)||i()},e.exports.__esModule=!0,e.exports.default=e.exports},736:(e,t,n)=>{var r=n(738).default,a=n(45);e.exports=function(e){var t=a(e,"string");return"symbol"==r(t)?t:t+""},e.exports.__esModule=!0,e.exports.default=e.exports},738:e=>{function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},752:e=>{e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},795:function(e,t,n){!function(e,t,n,r){"use strict";var a=function(e,t,n){return{endTime:t,insertTime:n,type:"exponentialRampToValue",value:e}},o=function(e,t,n){return{endTime:t,insertTime:n,type:"linearRampToValue",value:e}},i=function(e,t){return{startTime:t,type:"setValue",value:e}},s=function(e,t,n){return{duration:n,startTime:t,type:"setValueCurve",values:e}},l=function(e,t,n){var r=n.startTime,a=n.target,o=n.timeConstant;return a+(t-a)*Math.exp((r-e)/o)},c=function(e){return"exponentialRampToValue"===e.type},u=function(e){return"linearRampToValue"===e.type},d=function(e){return c(e)||u(e)},A=function(e){return"setValue"===e.type},h=function(e){return"setValueCurve"===e.type},f=function(e,t,n,r){var a=e[t];return void 0===a?r:d(a)||A(a)?a.value:h(a)?a.values[a.values.length-1]:l(n,f(e,t-1,a.startTime,r),a)},p=function(e,t,n,r,a){return void 0===n?[r.insertTime,a]:d(n)?[n.endTime,n.value]:A(n)?[n.startTime,n.value]:h(n)?[n.startTime+n.duration,n.values[n.values.length-1]]:[n.startTime,f(e,t-1,n.startTime,a)]},_=function(e){return"cancelAndHold"===e.type},m=function(e){return"cancelScheduledValues"===e.type},b=function(e){return _(e)||m(e)?e.cancelTime:c(e)||u(e)?e.endTime:e.startTime},g=function(e,t,n,r){var a=r.endTime,o=r.value;return n===o?o:0<n&&0<o||n<0&&o<0?n*Math.pow(o/n,(e-t)/(a-t)):0},v=function(e,t,n,r){return n+(e-t)/(r.endTime-t)*(r.value-n)},C=function(e,t){var n=t.duration,r=t.startTime,a=t.values;return function(e,t){var n=Math.floor(t),r=Math.ceil(t);return n===r?e[n]:(1-(t-n))*e[n]+(1-(r-t))*e[r]}(a,(e-r)/n*(a.length-1))},y=function(e){return"setTarget"===e.type},k=function(){return r(function e(t){n(this,e),this._automationEvents=[],this._currenTime=0,this._defaultValue=t},[{key:Symbol.iterator,value:function(){return this._automationEvents[Symbol.iterator]()}},{key:"add",value:function(e){var t=b(e);if(_(e)||m(e)){var n=this._automationEvents.findIndex(function(n){return m(e)&&h(n)?n.startTime+n.duration>=t:b(n)>=t}),r=this._automationEvents[n];if(-1!==n&&(this._automationEvents=this._automationEvents.slice(0,n)),_(e)){var l=this._automationEvents[this._automationEvents.length-1];if(void 0!==r&&d(r)){if(void 0!==l&&y(l))throw new Error("The internal list is malformed.");var A=void 0===l?r.insertTime:h(l)?l.startTime+l.duration:b(l),f=void 0===l?this._defaultValue:h(l)?l.values[l.values.length-1]:l.value,p=c(r)?g(t,A,f,r):v(t,A,f,r),C=c(r)?a(p,t,this._currenTime):o(p,t,this._currenTime);this._automationEvents.push(C)}if(void 0!==l&&y(l)&&this._automationEvents.push(i(this.getValue(t),t)),void 0!==l&&h(l)&&l.startTime+l.duration>t){var k=t-l.startTime,w=(l.values.length-1)/l.duration,x=Math.max(2,1+Math.ceil(k*w)),E=k/(x-1)*w,M=l.values.slice(0,x);if(E<1)for(var B=1;B<x;B+=1){var S=E*B%1;M[B]=l.values[B-1]*(1-S)+l.values[B]*S}this._automationEvents[this._automationEvents.length-1]=s(M,l.startTime,k)}}}else{var T=this._automationEvents.findIndex(function(e){return b(e)>t}),R=-1===T?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[T-1];if(void 0!==R&&h(R)&&b(R)+R.duration>t)return!1;var I=c(e)?a(e.value,e.endTime,this._currenTime):u(e)?o(e.value,t,this._currenTime):e;if(-1===T)this._automationEvents.push(I);else{if(h(e)&&t+e.duration>b(this._automationEvents[T]))return!1;this._automationEvents.splice(T,0,I)}}return!0}},{key:"flush",value:function(e){var t=this._automationEvents.findIndex(function(t){return b(t)>e});if(t>1){var n=this._automationEvents.slice(t-1),r=n[0];y(r)&&n.unshift(i(f(this._automationEvents,t-2,r.startTime,this._defaultValue),r.startTime)),this._automationEvents=n}}},{key:"getValue",value:function(e){if(0===this._automationEvents.length)return this._defaultValue;var n=this._automationEvents.findIndex(function(t){return b(t)>e}),r=this._automationEvents[n],a=(-1===n?this._automationEvents.length:n)-1,o=this._automationEvents[a];if(void 0!==o&&y(o)&&(void 0===r||!d(r)||r.insertTime>e))return l(e,f(this._automationEvents,a-1,o.startTime,this._defaultValue),o);if(void 0!==o&&A(o)&&(void 0===r||!d(r)))return o.value;if(void 0!==o&&h(o)&&(void 0===r||!d(r)||o.startTime+o.duration>e))return e<o.startTime+o.duration?C(e,o):o.values[o.values.length-1];if(void 0!==o&&d(o)&&(void 0===r||!d(r)))return o.value;if(void 0!==r&&c(r)){var i=p(this._automationEvents,a,o,r,this._defaultValue),s=t(i,2),_=s[0],m=s[1];return g(e,_,m,r)}if(void 0!==r&&u(r)){var k=p(this._automationEvents,a,o,r,this._defaultValue),w=t(k,2),x=w[0],E=w[1];return v(e,x,E,r)}return this._defaultValue}}])}();e.AutomationEventList=k,e.createCancelAndHoldAutomationEvent=function(e){return{cancelTime:e,type:"cancelAndHold"}},e.createCancelScheduledValuesAutomationEvent=function(e){return{cancelTime:e,type:"cancelScheduledValues"}},e.createExponentialRampToValueAutomationEvent=function(e,t){return{endTime:t,type:"exponentialRampToValue",value:e}},e.createLinearRampToValueAutomationEvent=function(e,t){return{endTime:t,type:"linearRampToValue",value:e}},e.createSetTargetAutomationEvent=function(e,t,n){return{startTime:t,target:e,timeConstant:n,type:"setTarget"}},e.createSetValueAutomationEvent=i,e.createSetValueCurveAutomationEvent=s}(t,n(715),n(383),n(579))},825:e=>{"use strict";e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var a=void 0!==n.layer;a&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,a&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var o=n.sourceMap;o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},987:e=>{e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={id:r,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.b=document&&document.baseURI||self.location.href,n.nc=void 0,(()=>{"use strict";const e={headerArt:document.getElementById("header-art"),skinToggler:document.querySelector("#skin-toggler"),appContainer:document.getElementById("app"),recordBtn:document.querySelector("#record-btn"),stopRecordBtn:document.querySelector("#stop-record-btn"),downloadBtn:document.querySelector("#download-btn"),masterVolume:document.querySelector("#master-volume"),headphoneVolume:document.querySelector("#headphone-volume"),crossfader:document.querySelector(".crossfader"),fxChorus:document.querySelector("#fx-chorus"),fxReverb:document.querySelector("#fx-reverb"),fxDelay:document.querySelector("#fx-delay"),samplerPads:document.querySelector(".sampler-pads"),channelA:{container:document.querySelector("#channel-a"),tracklist:document.querySelector("#channel-a .tracklist"),selectDirectory:document.querySelector("#channel-a .select-directory"),selectedPath:document.querySelector("#channel-a .selected-path"),playBtn:document.querySelector("#channel-a .play-btn"),stopBtn:document.querySelector("#channel-a .stop-btn"),cueBtn:document.querySelector("#channel-a .cue-btn"),timeSlider:document.querySelector("#channel-a .time-slider"),timeCurrent:document.querySelector("#channel-a .time-current"),timeRemaining:document.querySelector("#channel-a .time-remaining"),volumeSlider:document.querySelector("#channel-a .volume-slider"),tempoSlider:document.querySelector("#channel-a .tempo-slider"),tempoLabel:document.querySelector("#channel-a .tempo-label"),eqLow:document.querySelector("#eq-low-a"),eqMid:document.querySelector("#eq-mid-a"),eqHigh:document.querySelector("#eq-high-a")},channelB:{container:document.querySelector("#channel-b"),tracklist:document.querySelector("#channel-b .tracklist"),selectDirectory:document.querySelector("#channel-b .select-directory"),selectedPath:document.querySelector("#channel-b .selected-path"),playBtn:document.querySelector("#channel-b .play-btn"),stopBtn:document.querySelector("#channel-b .stop-btn"),cueBtn:document.querySelector("#channel-b .cue-btn"),timeSlider:document.querySelector("#channel-b .time-slider"),timeCurrent:document.querySelector("#channel-b .time-current"),timeRemaining:document.querySelector("#channel-b .time-remaining"),volumeSlider:document.querySelector("#channel-b .volume-slider"),tempoSlider:document.querySelector("#channel-b .tempo-slider"),tempoLabel:document.querySelector("#channel-b .tempo-label"),eqLow:document.querySelector("#eq-low-b"),eqMid:document.querySelector("#eq-mid-b"),eqHigh:document.querySelector("#eq-high-b")},visualizer:document.getElementById("visualizer")};var t=n(72),r=n.n(t),a=n(825),o=n.n(a),i=n(659),s=n.n(i),l=n(56),c=n.n(l),u=n(540),d=n.n(u),A=n(113),h=n.n(A),f=n(664),p={};p.styleTagTransform=h(),p.setAttributes=c(),p.insert=s().bind(null,"head"),p.domAPI=o(),p.insertStyleElement=d(),r()(f.A,p),f.A&&f.A.locals&&f.A.locals;var _=n(389);const m=new WeakMap,b=new WeakMap;var g=n(795);const v=new WeakSet,C=new WeakMap,y=new WeakMap,k=new WeakMap,w=new WeakMap,x=new WeakMap,E=new WeakMap,M=new WeakMap,B=new WeakMap,S=new WeakMap,T={construct:()=>T},R=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,I=(e,t)=>{const n=[];let r=e.replace(/^[\s]+/,""),a=r.match(R);for(;null!==a;){const e=a[1].slice(1,-1),o=a[0].replace(/([\s]+)?;?$/,"").replace(e,new URL(e,t).toString());n.push(o),r=r.slice(a[0].length).replace(/^[\s]+/,""),a=r.match(R)}return[n.join(";"),r]},O=e=>{if(void 0!==e&&!Array.isArray(e))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},N=e=>{if(!(e=>{try{new new Proxy(e,T)}catch{return!1}return!0})(e))throw new TypeError("The given value for processorCtor should be a constructor.");if(null===e.prototype||"object"!=typeof e.prototype)throw new TypeError("The given value for processorCtor should have a prototype.")},L=(e,t)=>{const n=e.get(t);if(void 0===n)throw new Error("A value with the given key could not be found.");return n},D=(e,t)=>{const n=Array.from(e).filter(t);if(n.length>1)throw Error("More than one element was found.");if(0===n.length)throw Error("No element was found.");const[r]=n;return e.delete(r),r},P=(e,t,n,r)=>{const a=L(e,t),o=D(a,e=>e[0]===n&&e[1]===r);return 0===a.size&&e.delete(t),o},j=e=>L(E,e),V=e=>{if(v.has(e))throw new Error("The AudioNode is already stored.");v.add(e),j(e).forEach(e=>e(!0))},z=e=>"port"in e,F=e=>{if(!v.has(e))throw new Error("The AudioNode is not stored.");v.delete(e),j(e).forEach(e=>e(!1))},q=(e,t)=>{!z(e)&&t.every(e=>0===e.size)&&F(e)},G={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},H=(e,t)=>e.context===t,Y=e=>{try{e.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},X=()=>new DOMException("","IndexSizeError"),W=e=>{var t;e.getChannelData=(t=e.getChannelData,n=>{try{return t.call(e,n)}catch(e){if(12===e.code)throw X();throw e}})},Z={numberOfChannels:1},U=-34028234663852886e22,Q=-U,K=e=>v.has(e),J={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},$=e=>L(C,e),ee=e=>L(k,e),te=(e,t)=>{const{activeInputs:n}=$(e);n.forEach(n=>n.forEach(([n])=>{t.includes(e)||te(n,[...t,e])}));const r=(e=>"playbackRate"in e)(e)?[e.playbackRate]:z(e)?Array.from(e.parameters.values()):(e=>"frequency"in e&&"gain"in e)(e)?[e.Q,e.detune,e.frequency,e.gain]:(e=>"offset"in e)(e)?[e.offset]:(e=>!("frequency"in e)&&"gain"in e)(e)?[e.gain]:(e=>"detune"in e&&"frequency"in e&&!("gain"in e))(e)?[e.detune,e.frequency]:(e=>"pan"in e)(e)?[e.pan]:[];for(const e of r){const n=ee(e);void 0!==n&&n.activeInputs.forEach(([e])=>te(e,t))}K(e)&&F(e)},ne=e=>"context"in e,re=e=>ne(e[0]),ae=(e,t,n,r)=>{for(const t of e)if(n(t)){if(r)return!1;throw Error("The set contains at least one similar element.")}return e.add(t),!0},oe=(e,t,[n,r],a)=>{ae(e,[t,n,r],e=>e[0]===t&&e[1]===n,a)},ie=(e,[t,n,r],a)=>{const o=e.get(t);void 0===o?e.set(t,new Set([[n,r]])):ae(o,[n,r],e=>e[0]===n,a)},se=e=>"inputs"in e,le=(e,t,n,r)=>{if(se(t)){const a=t.inputs[r];return e.connect(a,n,0),[a,n,0]}return e.connect(t,n,r),[t,n,r]},ce=(e,t,n)=>{for(const r of e)if(r[0]===t&&r[1]===n)return e.delete(r),r;return null},ue=(e,t)=>{if(!j(e).delete(t))throw new Error("Missing the expected event listener.")},de=(e,t,n)=>{const r=L(e,t),a=D(r,e=>e[0]===n);return 0===r.size&&e.delete(t),a},Ae=(e,t,n,r)=>{se(t)?e.disconnect(t.inputs[r],n,0):e.disconnect(t,n,r)},he=e=>L(y,e),fe=e=>L(w,e),pe=e=>M.has(e),_e=e=>!v.has(e),me=(e,t)=>new Promise(n=>{if(null!==t)n(!0);else{const t=e.createScriptProcessor(256,1,1),r=e.createGain(),a=e.createBuffer(1,2,44100),o=a.getChannelData(0);o[0]=1,o[1]=1;const i=e.createBufferSource();i.buffer=a,i.loop=!0,i.connect(t).connect(e.destination),i.connect(r),i.disconnect(r),t.onaudioprocess=r=>{const a=r.inputBuffer.getChannelData(0);Array.prototype.some.call(a,e=>1===e)?n(!0):n(!1),i.stop(),t.onaudioprocess=null,i.disconnect(t),t.disconnect(e.destination)},i.start()}}),be=(e,t)=>{const n=new Map;for(const t of e)for(const e of t){const t=n.get(e);n.set(e,void 0===t?1:t+1)}n.forEach((e,n)=>t(n,e))},ge=e=>"context"in e,ve=e=>{const t=new Map;var n,r;e.connect=(n=e.connect.bind(e),(e,r=0,a=0)=>{const o=ge(e)?n(e,r,a):n(e,r),i=t.get(e);return void 0===i?t.set(e,[{input:a,output:r}]):i.every(e=>e.input!==a||e.output!==r)&&i.push({input:a,output:r}),o}),e.disconnect=(r=e.disconnect,(n,a,o)=>{if(r.apply(e),void 0===n)t.clear();else if("number"==typeof n)for(const[e,r]of t){const a=r.filter(e=>e.output!==n);0===a.length?t.delete(e):t.set(e,a)}else if(t.has(n))if(void 0===a)t.delete(n);else{const e=t.get(n);if(void 0!==e){const r=e.filter(e=>e.output!==a&&(e.input!==o||void 0===o));0===r.length?t.delete(n):t.set(n,r)}}for(const[n,r]of t)r.forEach(t=>{ge(n)?e.connect(n,t.output,t.input):e.connect(n,t.output)})})},Ce=(e,t,n,r,a)=>{const[o,i]=((e,t,n,r)=>{const{activeInputs:a,passiveInputs:o}=$(t),i=ce(a[r],e,n);return null===i?[P(o,e,n,r)[2],!1]:[i[2],!0]})(e,n,r,a);if(null!==o&&(ue(e,o),!i||t||pe(e)||Ae(he(e),he(n),r,a)),K(n)){const{activeInputs:e}=$(n);q(n,e)}},ye=(e,t,n,r)=>{const[a,o]=((e,t,n)=>{const{activeInputs:r,passiveInputs:a}=ee(t),o=ce(r,e,n);return null===o?[de(a,e,n)[1],!1]:[o[2],!0]})(e,n,r);null!==a&&(ue(e,a),!o||t||pe(e)||he(e).disconnect(fe(n),r))};class ke{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e,t=null){return this._map.forEach((n,r)=>e.call(t,n,r,this))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}}function we(e,t,n,r,a){if("function"==typeof e.copyFromChannel)0===t[n].byteLength&&(t[n]=new Float32Array(128)),e.copyFromChannel(t[n],r,a);else{const o=e.getChannelData(r);if(0===t[n].byteLength)t[n]=o.slice(a,a+128);else{const e=new Float32Array(o.buffer,a*Float32Array.BYTES_PER_ELEMENT,128);t[n].set(e)}}}const xe=(e,t,n,r,a)=>{"function"==typeof e.copyToChannel?0!==t[n].byteLength&&e.copyToChannel(t[n],r,a):0!==t[n].byteLength&&e.getChannelData(r).set(t[n],a)},Ee=(e,t)=>{const n=[];for(let r=0;r<e;r+=1){const e=[],a="number"==typeof t?t:t[r];for(let t=0;t<a;t+=1)e.push(new Float32Array(128));n.push(e)}return n},Me=async(e,t,n,r,a,o,i)=>{const s=null===t?128*Math.ceil(e.context.length/128):t.length,l=r.channelCount*r.numberOfInputs,c=a.reduce((e,t)=>e+t,0),u=0===c?null:n.createBuffer(c,s,n.sampleRate);if(void 0===o)throw new Error("Missing the processor constructor.");const d=$(e),A=await((e,t)=>{const n=L(S,e),r=he(t);return L(n,r)})(n,e),h=Ee(r.numberOfInputs,r.channelCount),f=Ee(r.numberOfOutputs,a),p=Array.from(e.parameters.keys()).reduce((e,t)=>({...e,[t]:new Float32Array(128)}),{});for(let c=0;c<s;c+=128){if(r.numberOfInputs>0&&null!==t)for(let e=0;e<r.numberOfInputs;e+=1)for(let n=0;n<r.channelCount;n+=1)we(t,h[e],n,n,c);void 0!==o.parameterDescriptors&&null!==t&&o.parameterDescriptors.forEach(({name:e},n)=>{we(t,p,e,l+n,c)});for(let e=0;e<r.numberOfInputs;e+=1)for(let t=0;t<a[e];t+=1)0===f[e][t].byteLength&&(f[e][t]=new Float32Array(128));try{const e=h.map((e,t)=>0===d.activeInputs[t].size?[]:e),t=i(c/n.sampleRate,n.sampleRate,()=>A.process(e,f,p));if(null!==u)for(let e=0,t=0;e<r.numberOfOutputs;e+=1){for(let n=0;n<a[e];n+=1)xe(u,f[e],n,t+n,c);t+=a[e]}if(!t)break}catch(t){e.dispatchEvent(new ErrorEvent("processorerror",{colno:t.colno,filename:t.filename,lineno:t.lineno,message:t.message}));break}}return u},Be={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},Se={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},Te={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},Re={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},Ie={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},Oe=e=>{const{port1:t,port2:n}=new MessageChannel;return new Promise(r=>{const a=()=>{n.onmessage=null,t.close(),n.close(),r()};n.onmessage=()=>a();try{t.postMessage(e,[e])}catch{}finally{a()}})},Ne={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},Le=(e,t,n)=>{const r=t[n];if(void 0===r)throw e();return r},De={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},Pe={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},je=()=>new DOMException("","InvalidStateError"),Ve=()=>new DOMException("","InvalidAccessError"),ze={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},Fe=(e,t,n,r,a,o,i,s,l,c,u)=>{const d=c.length;let A=s;for(let s=0;s<d;s+=1){let d=n[0]*c[s];for(let t=1;t<a;t+=1){const r=A-t&l-1;d+=n[t]*o[r],d-=e[t]*i[r]}for(let e=a;e<r;e+=1)d+=n[e]*o[A-e&l-1];for(let n=a;n<t;n+=1)d-=e[n]*i[A-n&l-1];o[A]=c[s],i[A]=d,A=A+1&l-1,u[s]=d}return A},qe={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},Ge=e=>{const t=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const n=e.decodeAudioData(t.buffer,()=>{});return void 0!==n&&(n.catch(()=>{}),!0)}catch{}return!1},He=(e,t,n)=>{const r=t[n];void 0!==r&&r!==e[n]&&(e[n]=r)},Ye=(e,t)=>{He(e,t,"channelCount"),He(e,t,"channelCountMode"),He(e,t,"channelInterpretation")},Xe=e=>"function"==typeof e.getFloatTimeDomainData,We=(e,t,n)=>{const r=t[n];void 0!==r&&r!==e[n].value&&(e[n].value=r)},Ze=e=>{var t;e.start=(t=e.start,(n=0,r=0,a)=>{if("number"==typeof a&&a<0||r<0||n<0)throw new RangeError("The parameters can't be negative.");t.call(e,n,r,a)})},Ue=e=>{var t;e.stop=(t=e.stop,(n=0)=>{if(n<0)throw new RangeError("The parameter can't be negative.");t.call(e,n)})},Qe=(e,t)=>null===e?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(e*t))))),Ke=(e,t)=>{const n=e.createBiquadFilter();return Ye(n,t),We(n,t,"Q"),We(n,t,"detune"),We(n,t,"frequency"),We(n,t,"gain"),He(n,t,"type"),n},Je=(e,t)=>{const n=e.createChannelSplitter(t.numberOfOutputs);return Ye(n,t),(e=>{const t=e.numberOfOutputs;Object.defineProperty(e,"channelCount",{get:()=>t,set:e=>{if(e!==t)throw je()}}),Object.defineProperty(e,"channelCountMode",{get:()=>"explicit",set:e=>{if("explicit"!==e)throw je()}}),Object.defineProperty(e,"channelInterpretation",{get:()=>"discrete",set:e=>{if("discrete"!==e)throw je()}})})(n),n},$e=(e,t)=>(e.connect=t.connect.bind(t),e.disconnect=t.disconnect.bind(t),e),et=(e,t)=>{const n=e.createDelay(t.maxDelayTime);return Ye(n,t),We(n,t,"delayTime"),n},tt=(e,t)=>{const n=e.createGain();return Ye(n,t),We(n,t,"gain"),n};function nt(e,t){const n=t[0]*t[0]+t[1]*t[1];return[(e[0]*t[0]+e[1]*t[1])/n,(e[1]*t[0]-e[0]*t[1])/n]}function rt(e,t){return[e[0]*t[0]-e[1]*t[1],e[0]*t[1]+e[1]*t[0]]}function at(e,t){let n=[0,0];for(let r=e.length-1;r>=0;r-=1)n=rt(n,t),n[0]+=e[r];return n}const ot=(e,t,n,r)=>e.createScriptProcessor(t,n,r),it=()=>new DOMException("","NotSupportedError"),st={numberOfChannels:1},lt={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},ct={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},ut={disableNormalization:!1},dt={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},At={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},ht=(e,t,n)=>void 0===e.copyFromChannel?e.getChannelData(n)[0]:(e.copyFromChannel(t,n),t[0]),ft=e=>{if(null===e)return!1;const t=e.length;return t%2!=0?0!==e[Math.floor(t/2)]:e[t/2-1]+e[t/2]!==0},pt=(e,t,n,r)=>{let a=e;for(;!a.hasOwnProperty(t);)a=Object.getPrototypeOf(a);const{get:o,set:i}=Object.getOwnPropertyDescriptor(a,t);Object.defineProperty(e,t,{get:n(o),set:r(i)})},_t=(e,t,n)=>{try{e.setValueAtTime(t,n)}catch(r){if(9!==r.code)throw r;_t(e,t,n+1e-7)}},mt=e=>{const t=e.createOscillator();try{t.start(-1)}catch(e){return e instanceof RangeError}return!1},bt=e=>{const t=e.createBuffer(1,1,44100),n=e.createBufferSource();n.buffer=t,n.start(),n.stop();try{return n.stop(),!0}catch{return!1}},gt=e=>{const t=e.createOscillator();try{t.stop(-1)}catch(e){return e instanceof RangeError}return!1},vt=(e,t)=>{const n=t.createGain();e.connect(n);const r=(a=e.disconnect,()=>{a.call(e,n),e.removeEventListener("ended",r)});var a;e.addEventListener("ended",r),$e(e,n),e.stop=(t=>{let r=!1;return(a=0)=>{if(r)try{t.call(e,a)}catch{n.gain.setValueAtTime(0,a)}else t.call(e,a),r=!0}})(e.stop)},Ct=(e,t)=>n=>{const r={value:e};return Object.defineProperties(n,{currentTarget:r,target:r}),"function"==typeof t?t.call(e,n):t.handleEvent.call(e,n)},yt=(e=>(t,n,[r,a,o],i)=>{e(t[a],[n,r,o],e=>e[0]===n&&e[1]===r,i)})(ae),kt=(e=>(t,n,[r,a,o],i)=>{const s=t.get(r);void 0===s?t.set(r,new Set([[a,n,o]])):e(s,[a,n,o],e=>e[0]===a&&e[1]===n,i)})(ae),wt=(e=>(t,n,r,a)=>e(t[a],e=>e[0]===n&&e[1]===r))(D),xt=new WeakMap,Et=(e=>t=>{var n;return null!==(n=e.get(t))&&void 0!==n?n:0})(xt),Mt=(Bt=new Map,St=new WeakMap,(e,t)=>{const n=St.get(e);if(void 0!==n)return n;const r=Bt.get(e);if(void 0!==r)return r;try{const n=t();return n instanceof Promise?(Bt.set(e,n),n.catch(()=>!1).then(t=>(Bt.delete(e),St.set(e,t),t))):(St.set(e,n),n)}catch{return St.set(e,!1),!1}});var Bt,St;const Tt="undefined"==typeof window?null:window,Rt=((e,t)=>(n,r)=>{const a=n.createAnalyser();if(Ye(a,r),!(r.maxDecibels>r.minDecibels))throw t();return He(a,r,"fftSize"),He(a,r,"maxDecibels"),He(a,r,"minDecibels"),He(a,r,"smoothingTimeConstant"),e(Xe,()=>Xe(a))||(e=>{e.getFloatTimeDomainData=t=>{const n=new Uint8Array(t.length);e.getByteTimeDomainData(n);const r=Math.max(n.length,e.fftSize);for(let e=0;e<r;e+=1)t[e]=.0078125*(n[e]-128);return t}})(a),a})(Mt,X),It=(e=>t=>{const n=e(t);if(null===n.renderer)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return n.renderer})($),Ot=((e,t,n)=>async(r,a,o)=>{const i=e(r);await Promise.all(i.activeInputs.map((e,i)=>Array.from(e).map(async([e,s])=>{const l=t(e),c=await l.render(e,a),u=r.context.destination;n(e)||r===u&&n(r)||c.connect(o,s,i)})).reduce((e,t)=>[...e,...t],[]))})($,It,pe),Nt=((e,t,n)=>()=>{const r=new WeakMap;return{render(a,o){const i=r.get(o);return void 0!==i?Promise.resolve(i):(async(a,o)=>{let i=t(a);if(!H(i,o)){const t={channelCount:i.channelCount,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,fftSize:i.fftSize,maxDecibels:i.maxDecibels,minDecibels:i.minDecibels,smoothingTimeConstant:i.smoothingTimeConstant};i=e(o,t)}return r.set(o,i),await n(a,o,i),i})(a,o)}}})(Rt,he,Ot),Lt=(Dt=x,e=>{const t=Dt.get(e);if(void 0===t)throw je();return t});var Dt;const Pt=(e=>null===e?null:e.hasOwnProperty("OfflineAudioContext")?e.OfflineAudioContext:e.hasOwnProperty("webkitOfflineAudioContext")?e.webkitOfflineAudioContext:null)(Tt),jt=(e=>t=>null!==e&&t instanceof e)(Pt),Vt=new WeakMap,zt=(e=>class{constructor(e){this._nativeEventTarget=e,this._listeners=new WeakMap}addEventListener(t,n,r){if(null!==n){let a=this._listeners.get(n);void 0===a&&(a=e(this,n),"function"==typeof n&&this._listeners.set(n,a)),this._nativeEventTarget.addEventListener(t,a,r)}}dispatchEvent(e){return this._nativeEventTarget.dispatchEvent(e)}removeEventListener(e,t,n){const r=null===t?void 0:this._listeners.get(t);this._nativeEventTarget.removeEventListener(e,void 0===r?null:r,n)}})(Ct),Ft=(e=>null===e?null:e.hasOwnProperty("AudioContext")?e.AudioContext:e.hasOwnProperty("webkitAudioContext")?e.webkitAudioContext:null)(Tt),qt=(e=>t=>null!==e&&t instanceof e)(Ft),Gt=(e=>t=>null!==e&&"function"==typeof e.AudioNode&&t instanceof e.AudioNode)(Tt),Ht=(e=>t=>null!==e&&"function"==typeof e.AudioParam&&t instanceof e.AudioParam)(Tt),Yt=(e=>null===e?null:e.hasOwnProperty("AudioWorkletNode")?e.AudioWorkletNode:null)(Tt),Xt=((e,t,n,r,a,o,i,s,l,c,u,d,A,h,f,p)=>class extends c{constructor(t,r,a,o){super(a),this._context=t,this._nativeAudioNode=a;const i=u(t);d(i)&&!0!==n(me,()=>me(i,p))&&ve(a),y.set(this,a),E.set(this,new Set),"closed"!==t.state&&r&&V(this),e(this,o,a)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(e){this._nativeAudioNode.channelCount=e}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(e){this._nativeAudioNode.channelCountMode=e}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(e){this._nativeAudioNode.channelInterpretation=e}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(e,n=0,s=0){if(n<0||n>=this._nativeAudioNode.numberOfOutputs)throw a();const c=u(this._context),d=f(c);if(A(e)||h(e))throw o();if(ne(e)){const a=he(e);try{const t=le(this._nativeAudioNode,a,n,s),r=_e(this);(d||r)&&this._nativeAudioNode.disconnect(...t),"closed"!==this.context.state&&!r&&_e(e)&&V(e)}catch(e){if(12===e.code)throw o();throw e}if(t(this,e,n,s,d)){const t=l([this],e);be(t,r(d))}return e}const p=fe(e);if("playbackRate"===p.name&&1024===p.maxValue)throw i();try{this._nativeAudioNode.connect(p,n),(d||_e(this))&&this._nativeAudioNode.disconnect(p,n)}catch(e){if(12===e.code)throw o();throw e}if(((e,t,n,r)=>{const{activeInputs:a,passiveInputs:o}=ee(t),{outputs:i}=$(e),s=j(e),l=i=>{const s=he(e),l=fe(t);if(i){const t=de(o,e,n);oe(a,e,t,!1),r||pe(e)||s.connect(l,n)}else{const t=((e,t,n)=>D(e,e=>e[0]===t&&e[1]===n))(a,e,n);ie(o,t,!1),r||pe(e)||s.disconnect(l,n)}};return!!ae(i,[t,n],e=>e[0]===t&&e[1]===n,!0)&&(s.add(l),K(e)?oe(a,e,[n,l],!0):ie(o,[e,n,l],!0),!0)})(this,e,n,d)){const t=l([this],e);be(t,r(d))}}disconnect(e,t,n){let r;const i=u(this._context),c=f(i);if(void 0===e)r=((e,t)=>{const n=$(e),r=[];for(const a of n.outputs)re(a)?Ce(e,t,...a):ye(e,t,...a),r.push(a[0]);return n.outputs.clear(),r})(this,c);else if("number"==typeof e){if(e<0||e>=this.numberOfOutputs)throw a();r=((e,t,n)=>{const r=$(e),a=[];for(const o of r.outputs)o[1]===n&&(re(o)?Ce(e,t,...o):ye(e,t,...o),a.push(o[0]),r.outputs.delete(o));return a})(this,c,e)}else{if(void 0!==t&&(t<0||t>=this.numberOfOutputs))throw a();if(ne(e)&&void 0!==n&&(n<0||n>=e.numberOfInputs))throw a();if(r=((e,t,n,r,a)=>{const o=$(e);return Array.from(o.outputs).filter(e=>!(e[0]!==n||void 0!==r&&e[1]!==r||void 0!==a&&e[2]!==a)).map(n=>(re(n)?Ce(e,t,...n):ye(e,t,...n),o.outputs.delete(n),n[0]))})(this,c,e,t,n),0===r.length)throw o()}for(const e of r){const t=l([this],e);be(t,s)}}})((Wt=C,(e,t,n)=>{const r=[];for(let e=0;e<n.numberOfInputs;e+=1)r.push(new Set);Wt.set(e,{activeInputs:r,outputs:new Set,passiveInputs:new WeakMap,renderer:t})}),((e,t,n,r,a,o,i,s,l,c,u,d,A)=>{const h=new WeakMap;return(f,p,_,m,b)=>{const{activeInputs:g,passiveInputs:v}=o(p),{outputs:C}=o(f),y=s(f),k=o=>{const s=l(p),c=l(f);if(o){const t=P(v,f,_,m);e(g,f,t,!1),b||d(f)||n(c,s,_,m),A(p)&&V(p)}else{const e=r(g,f,_,m);t(v,m,e,!1),b||d(f)||a(c,s,_,m);const n=i(p);if(0===n)u(p)&&q(p,g);else{const e=h.get(p);void 0!==e&&clearTimeout(e),h.set(p,setTimeout(()=>{u(p)&&q(p,g)},1e3*n))}}};return!!c(C,[p,_,m],e=>e[0]===p&&e[1]===_&&e[2]===m,!0)&&(y.add(k),u(f)?e(g,f,[_,m,k],!0):t(v,m,[f,_,k],!0),!0)}})(yt,kt,le,wt,Ae,$,Et,j,he,ae,K,pe,_e),Mt,((e,t,n,r,a,o)=>i=>(s,l)=>{const c=e.get(s);if(void 0===c){if(!i&&o(s)){const e=r(s),{outputs:o}=n(s);for(const n of o)if(re(n)){const a=r(n[0]);t(e,a,n[1],n[2])}else{const t=a(n[0]);e.disconnect(t,n[1])}}e.set(s,l)}else e.set(s,c+l)})(M,Ae,$,he,fe,K),X,Ve,it,((e,t,n,r,a,o,i,s)=>(l,c)=>{const u=t.get(l);if(void 0===u)throw new Error("Missing the expected cycle count.");const d=o(l.context),A=s(d);if(u===c){if(t.delete(l),!A&&i(l)){const t=r(l),{outputs:o}=n(l);for(const n of o)if(re(n)){const a=r(n[0]);e(t,a,n[1],n[2])}else{const e=a(n[0]);t.connect(e,n[1])}}}else t.set(l,u-c)})(le,M,$,he,fe,Lt,K,jt),((e,t,n)=>function r(a,o){const i=ne(o)?o:n(e,o);if((e=>"delayTime"in e)(i))return[];if(a[0]===i)return[a];if(a.includes(i))return[];const{outputs:s}=t(i);return Array.from(s).map(e=>r([...a,i],e[0])).reduce((e,t)=>e.concat(t),[])})(Vt,$,L),zt,Lt,qt,Gt,Ht,jt,Yt);var Wt;const Zt=((e,t,n,r,a,o)=>class extends e{constructor(e,n){const i=a(e),s={...G,...n},l=r(i,s);super(e,!1,l,o(i)?t():null),this._nativeAnalyserNode=l}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(e){this._nativeAnalyserNode.fftSize=e}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(e){const t=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=e,!(e>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=t,n()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(e){const t=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=e,!(this._nativeAnalyserNode.maxDecibels>e))throw this._nativeAnalyserNode.minDecibels=t,n()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(e){this._nativeAnalyserNode.smoothingTimeConstant=e}getByteFrequencyData(e){this._nativeAnalyserNode.getByteFrequencyData(e)}getByteTimeDomainData(e){this._nativeAnalyserNode.getByteTimeDomainData(e)}getFloatFrequencyData(e){this._nativeAnalyserNode.getFloatFrequencyData(e)}getFloatTimeDomainData(e){this._nativeAnalyserNode.getFloatTimeDomainData(e)}})(Xt,Nt,X,Rt,Lt,jt),Ut=new WeakSet,Qt=(e=>null===e?null:e.hasOwnProperty("AudioBuffer")?e.AudioBuffer:null)(Tt),Kt=(Jt=new Uint32Array(1),e=>(Jt[0]=e,Jt[0]));var Jt;const $t=((e,t)=>n=>{n.copyFromChannel=(r,a,o=0)=>{const i=e(o),s=e(a);if(s>=n.numberOfChannels)throw t();const l=n.length,c=n.getChannelData(s),u=r.length;for(let e=i<0?-i:0;e+i<l&&e<u;e+=1)r[e]=c[e+i]},n.copyToChannel=(r,a,o=0)=>{const i=e(o),s=e(a);if(s>=n.numberOfChannels)throw t();const l=n.length,c=n.getChannelData(s),u=r.length;for(let e=i<0?-i:0;e+i<l&&e<u;e+=1)c[e+i]=r[e]}})(Kt,X),en=(e=>t=>{t.copyFromChannel=(n=>(r,a,o=0)=>{const i=e(o),s=e(a);if(i<t.length)return n.call(t,r,s,i)})(t.copyFromChannel),t.copyToChannel=(n=>(r,a,o=0)=>{const i=e(o),s=e(a);if(i<t.length)return n.call(t,r,s,i)})(t.copyToChannel)})(Kt),tn=((e,t,n,r,a,o,i,s)=>{let l=null;return class c{constructor(c){if(null===a)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:u,numberOfChannels:d,sampleRate:A}={...Z,...c};null===l&&(l=new a(1,1,44100));const h=null!==r&&t(o,o)?new r({length:u,numberOfChannels:d,sampleRate:A}):l.createBuffer(d,u,A);if(0===h.numberOfChannels)throw n();return"function"!=typeof h.copyFromChannel?(i(h),W(h)):t(Y,()=>Y(h))||s(h),e.add(h),h}static[Symbol.hasInstance](t){return null!==t&&"object"==typeof t&&Object.getPrototypeOf(t)===c.prototype||e.has(t)}}})(Ut,Mt,it,Qt,Pt,(e=>()=>{if(null===e)return!1;try{new e({length:1,sampleRate:44100})}catch{return!1}return!0})(Qt),$t,en),nn=(e=>(t,n)=>{const r=e(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});n.connect(r).connect(t.destination);const a=()=>{n.removeEventListener("ended",a),n.disconnect(r),r.disconnect()};n.addEventListener("ended",a)})(tt),rn=((e,t,n)=>async(r,a,o)=>{const i=t(r);await Promise.all(Array.from(i.activeInputs).map(async([t,r])=>{const i=e(t),s=await i.render(t,a);n(t)||s.connect(o,r)}))})(It,ee,pe),an=(e=>(t,n,r)=>e(n,t,r))(rn),on=((e,t,n,r,a,o,i,s,l,c,u)=>(l,d)=>{const A=l.createBufferSource();return Ye(A,d),We(A,d,"playbackRate"),He(A,d,"buffer"),He(A,d,"loop"),He(A,d,"loopEnd"),He(A,d,"loopStart"),t(n,()=>n(l))||(e=>{e.start=(t=>{let n=!1;return(r=0,a=0,o)=>{if(n)throw je();t.call(e,r,a,o),n=!0}})(e.start)})(A),t(r,()=>r(l))||(e=>{var t;e.start=(t=e.start,(n=0,r=0,a)=>{const o=e.buffer,i=null===o?r:Math.min(o.duration,r);null!==o&&i>o.duration-.5/e.context.sampleRate?t.call(e,n,0,0):t.call(e,n,i,a)})})(A),t(a,()=>a(l))||c(A,l),t(o,()=>o(l))||Ze(A),t(i,()=>i(l))||u(A,l),t(s,()=>s(l))||Ue(A),e(l,A),A})(nn,Mt,e=>{const t=e.createBufferSource();t.start();try{t.start()}catch{return!0}return!1},e=>{const t=e.createBufferSource(),n=e.createBuffer(1,1,44100);t.buffer=n;try{t.start(0,1)}catch{return!1}return!0},e=>{const t=e.createBufferSource();t.start();try{t.stop()}catch{return!1}return!0},mt,bt,gt,0,(e=>(t,n)=>{const r=n.createBuffer(1,1,44100);null===t.buffer&&(t.buffer=r),e(t,"buffer",e=>()=>{const n=e.call(t);return n===r?null:n},e=>n=>e.call(t,null===n?r:n))})(pt),vt),sn=((e,t)=>(n,r,a)=>(e(r).replay(a),t(r,n,a)))((e=>t=>{const n=e(t);if(null===n.renderer)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return n.renderer})(ee),rn),ln=((e,t,n,r,a)=>()=>{const o=new WeakMap;let i=null,s=null;return{set start(e){i=e},set stop(e){s=e},render(l,c){const u=o.get(c);return void 0!==u?Promise.resolve(u):(async(l,c)=>{let u=n(l);const d=H(u,c);if(!d){const e={buffer:u.buffer,channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,loop:u.loop,loopEnd:u.loopEnd,loopStart:u.loopStart,playbackRate:u.playbackRate.value};u=t(c,e),null!==i&&u.start(...i),null!==s&&u.stop(s)}return o.set(c,u),d?await e(c,l.playbackRate,u.playbackRate):await r(c,l.playbackRate,u.playbackRate),await a(l,c,u),u})(l,c)}}})(an,on,he,sn,Ot),cn=((e,t,n,r,a,o,i,s,l,c,u,d,A)=>(r,h,f,p=null,_=null)=>{const m=f.value,b=new g.AutomationEventList(m),v=h?(e=>({replay(t){for(const n of e)if("exponentialRampToValue"===n.type){const{endTime:e,value:r}=n;t.exponentialRampToValueAtTime(r,e)}else if("linearRampToValue"===n.type){const{endTime:e,value:r}=n;t.linearRampToValueAtTime(r,e)}else if("setTarget"===n.type){const{startTime:e,target:r,timeConstant:a}=n;t.setTargetAtTime(r,e,a)}else if("setValue"===n.type){const{startTime:e,value:r}=n;t.setValueAtTime(r,e)}else{if("setValueCurve"!==n.type)throw new Error("Can't apply an unknown automation.");{const{duration:e,startTime:r,values:a}=n;t.setValueCurveAtTime(a,r,e)}}}}))(b):null,C={get defaultValue(){return m},get maxValue(){return null===p?f.maxValue:p},get minValue(){return null===_?f.minValue:_},get value(){return f.value},set value(e){f.value=e,C.setValueAtTime(e,r.context.currentTime)},cancelAndHoldAtTime(e){if("function"==typeof f.cancelAndHoldAtTime)null===v&&b.flush(r.context.currentTime),b.add(a(e)),f.cancelAndHoldAtTime(e);else{const t=Array.from(b).pop();null===v&&b.flush(r.context.currentTime),b.add(a(e));const n=Array.from(b).pop();f.cancelScheduledValues(e),t!==n&&void 0!==n&&("exponentialRampToValue"===n.type?f.exponentialRampToValueAtTime(n.value,n.endTime):"linearRampToValue"===n.type?f.linearRampToValueAtTime(n.value,n.endTime):"setValue"===n.type?f.setValueAtTime(n.value,n.startTime):"setValueCurve"===n.type&&f.setValueCurveAtTime(n.values,n.startTime,n.duration))}return C},cancelScheduledValues:e=>(null===v&&b.flush(r.context.currentTime),b.add(o(e)),f.cancelScheduledValues(e),C),exponentialRampToValueAtTime(e,t){if(0===e)throw new RangeError;if(!Number.isFinite(t)||t<0)throw new RangeError;const n=r.context.currentTime;return null===v&&b.flush(n),0===Array.from(b).length&&(b.add(c(m,n)),f.setValueAtTime(m,n)),b.add(i(e,t)),f.exponentialRampToValueAtTime(e,t),C},linearRampToValueAtTime(e,t){const n=r.context.currentTime;return null===v&&b.flush(n),0===Array.from(b).length&&(b.add(c(m,n)),f.setValueAtTime(m,n)),b.add(s(e,t)),f.linearRampToValueAtTime(e,t),C},setTargetAtTime:(e,t,n)=>(null===v&&b.flush(r.context.currentTime),b.add(l(e,t,n)),f.setTargetAtTime(e,t,n),C),setValueAtTime:(e,t)=>(null===v&&b.flush(r.context.currentTime),b.add(c(e,t)),f.setValueAtTime(e,t),C),setValueCurveAtTime(e,t,n){const a=e instanceof Float32Array?e:new Float32Array(e);if(null!==d&&"webkitAudioContext"===d.name){const e=t+n,o=r.context.sampleRate,i=Math.ceil(t*o),s=Math.floor(e*o),l=s-i,c=new Float32Array(l);for(let e=0;e<l;e+=1){const r=(a.length-1)/n*((i+e)/o-t),s=Math.floor(r),l=Math.ceil(r);c[e]=s===l?a[s]:(1-(r-s))*a[s]+(1-(l-r))*a[l]}null===v&&b.flush(r.context.currentTime),b.add(u(c,t,n)),f.setValueCurveAtTime(c,t,n);const d=s/o;d<e&&A(C,c[c.length-1],d),A(C,a[a.length-1],e)}else null===v&&b.flush(r.context.currentTime),b.add(u(a,t,n)),f.setValueCurveAtTime(a,t,n);return C}};return n.set(C,f),t.set(C,r),e(C,v),C})((un=k,(e,t)=>{un.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:t})}),Vt,w,0,g.createCancelAndHoldAutomationEvent,g.createCancelScheduledValuesAutomationEvent,g.createExponentialRampToValueAutomationEvent,g.createLinearRampToValueAutomationEvent,g.createSetTargetAutomationEvent,g.createSetValueAutomationEvent,g.createSetValueCurveAutomationEvent,Ft,_t);var un;const dn=((e,t,n,r,a,o,i,s)=>class extends e{constructor(e,r){const s=o(e),l={...J,...r},c=a(s,l),u=i(s),d=u?t():null;super(e,!1,c,d),this._audioBufferSourceNodeRenderer=d,this._isBufferNullified=!1,this._isBufferSet=null!==l.buffer,this._nativeAudioBufferSourceNode=c,this._onended=null,this._playbackRate=n(this,u,c.playbackRate,Q,U)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(e){if(this._nativeAudioBufferSourceNode.buffer=e,null!==e){if(this._isBufferSet)throw r();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(e){this._nativeAudioBufferSourceNode.loop=e}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(e){this._nativeAudioBufferSourceNode.loopEnd=e}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(e){this._nativeAudioBufferSourceNode.loopStart=e}get onended(){return this._onended}set onended(e){const t="function"==typeof e?s(this,e):null;this._nativeAudioBufferSourceNode.onended=t;const n=this._nativeAudioBufferSourceNode.onended;this._onended=null!==n&&n===t?e:n}get playbackRate(){return this._playbackRate}start(e=0,t=0,n){if(this._nativeAudioBufferSourceNode.start(e,t,n),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.start=void 0===n?[e,t]:[e,t,n]),"closed"!==this.context.state){V(this);const e=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",e),K(this)&&F(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",e)}}stop(e=0){this._nativeAudioBufferSourceNode.stop(e),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.stop=e)}})(Xt,ln,cn,je,on,Lt,jt,Ct),An=((e,t,n,r,a,o,i,s)=>class extends e{constructor(e,t){const n=o(e),r=i(n),l=a(n,t,r);super(e,!1,l,r?(e=>{const t=new WeakMap;return{render(n,r){const a=t.get(r);return void 0!==a?Promise.resolve(a):(async(n,r)=>{const a=r.destination;return t.set(r,a),await e(n,r,a),a})(n,r)}}})(s):null),this._isNodeOfNativeOfflineAudioContext=r,this._nativeAudioDestinationNode=l}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(e){if(this._isNodeOfNativeOfflineAudioContext)throw r();if(e>this._nativeAudioDestinationNode.maxChannelCount)throw n();this._nativeAudioDestinationNode.channelCount=e}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(e){if(this._isNodeOfNativeOfflineAudioContext)throw r();this._nativeAudioDestinationNode.channelCountMode=e}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}})(Xt,0,X,je,((e,t)=>(n,r,a)=>{const o=n.destination;if(o.channelCount!==r)try{o.channelCount=r}catch{}a&&"explicit"!==o.channelCountMode&&(o.channelCountMode="explicit"),0===o.maxChannelCount&&Object.defineProperty(o,"maxChannelCount",{value:r});const i=e(n,{channelCount:r,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,gain:1});return t(i,"channelCount",e=>()=>e.call(i),e=>t=>{e.call(i,t);try{o.channelCount=t}catch(e){if(t>o.maxChannelCount)throw e}}),t(i,"channelCountMode",e=>()=>e.call(i),e=>t=>{e.call(i,t),o.channelCountMode=t}),t(i,"channelInterpretation",e=>()=>e.call(i),e=>t=>{e.call(i,t),o.channelInterpretation=t}),Object.defineProperty(i,"maxChannelCount",{get:()=>o.maxChannelCount}),i.connect(o),i})(tt,pt),Lt,jt,Ot),hn=((e,t,n,r,a)=>()=>{const o=new WeakMap;return{render(i,s){const l=o.get(s);return void 0!==l?Promise.resolve(l):(async(i,s)=>{let l=n(i);const c=H(l,s);if(!c){const e={Q:l.Q.value,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,detune:l.detune.value,frequency:l.frequency.value,gain:l.gain.value,type:l.type};l=t(s,e)}return o.set(s,l),c?(await e(s,i.Q,l.Q),await e(s,i.detune,l.detune),await e(s,i.frequency,l.frequency),await e(s,i.gain,l.gain)):(await r(s,i.Q,l.Q),await r(s,i.detune,l.detune),await r(s,i.frequency,l.frequency),await r(s,i.gain,l.gain)),await a(i,s,l),l})(i,s)}}})(an,Ke,he,sn,Ot),fn=(e=>(t,n)=>e.set(t,n))(xt),pn=((e,t,n,r,a,o,i,s)=>class extends e{constructor(e,r){const l=o(e),c={...Be,...r},u=a(l,c),d=i(l);super(e,!1,u,d?n():null),this._Q=t(this,d,u.Q,Q,U),this._detune=t(this,d,u.detune,1200*Math.log2(Q),-1200*Math.log2(Q)),this._frequency=t(this,d,u.frequency,e.sampleRate/2,0),this._gain=t(this,d,u.gain,40*Math.log10(Q),U),this._nativeBiquadFilterNode=u,s(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(e){this._nativeBiquadFilterNode.type=e}getFrequencyResponse(e,t,n){try{this._nativeBiquadFilterNode.getFrequencyResponse(e,t,n)}catch(e){if(11===e.code)throw r();throw e}if(e.length!==t.length||t.length!==n.length)throw r()}})(Xt,cn,hn,Ve,Ke,Lt,jt,fn),_n=((e,t)=>(n,r,a)=>{const o=new Set;var i,s;return n.connect=(i=n.connect,(a,s=0,l=0)=>{const c=0===o.size;if(t(a))return i.call(n,a,s,l),e(o,[a,s,l],e=>e[0]===a&&e[1]===s&&e[2]===l,!0),c&&r(),a;i.call(n,a,s),e(o,[a,s],e=>e[0]===a&&e[1]===s,!0),c&&r()}),n.disconnect=(s=n.disconnect,(e,r,i)=>{const l=o.size>0;if(void 0===e)s.apply(n),o.clear();else if("number"==typeof e){s.call(n,e);for(const t of o)t[1]===e&&o.delete(t)}else{t(e)?s.call(n,e,r,i):s.call(n,e,r);for(const t of o)t[0]!==e||void 0!==r&&t[1]!==r||void 0!==i&&t[2]!==i||o.delete(t)}const c=0===o.size;l&&c&&a()}),n})(ae,Gt),mn=((e,t)=>(n,r)=>{r.channelCount=1,r.channelCountMode="explicit",Object.defineProperty(r,"channelCount",{get:()=>1,set:()=>{throw e()}}),Object.defineProperty(r,"channelCountMode",{get:()=>"explicit",set:()=>{throw e()}});const a=n.createBufferSource();t(r,()=>{const e=r.numberOfInputs;for(let t=0;t<e;t+=1)a.connect(r,0,t)},()=>a.disconnect(r))})(je,_n),bn=((e,t)=>(n,r)=>{const a=n.createChannelMerger(r.numberOfInputs);return null!==e&&"webkitAudioContext"===e.name&&t(n,a),Ye(a,r),a})(Ft,mn),gn=((e,t,n)=>()=>{const r=new WeakMap;return{render(a,o){const i=r.get(o);return void 0!==i?Promise.resolve(i):(async(a,o)=>{let i=t(a);if(!H(i,o)){const t={channelCount:i.channelCount,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,numberOfInputs:i.numberOfInputs};i=e(o,t)}return r.set(o,i),await n(a,o,i),i})(a,o)}}})(bn,he,Ot),vn=((e,t,n,r,a)=>class extends e{constructor(e,o){const i=r(e),s={...Se,...o};super(e,!1,n(i,s),a(i)?t():null)}})(Xt,gn,bn,Lt,jt),Cn=((e,t,n)=>()=>{const r=new WeakMap;return{render(a,o){const i=r.get(o);return void 0!==i?Promise.resolve(i):(async(a,o)=>{let i=t(a);if(!H(i,o)){const t={channelCount:i.channelCount,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,numberOfOutputs:i.numberOfOutputs};i=e(o,t)}return r.set(o,i),await n(a,o,i),i})(a,o)}}})(Je,he,Ot),yn=((e,t,n,r,a)=>class extends e{constructor(e,o){const i=r(e),s=(e=>({...e,channelCount:e.numberOfOutputs}))({...Te,...o});super(e,!1,n(i,s),a(i)?t():null)}})(Xt,Cn,Je,Lt,jt),kn=((e,t,n,r)=>(a,{offset:o,...i})=>{const s=a.createBuffer(1,2,44100),l=t(a,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),c=n(a,{...i,gain:o}),u=s.getChannelData(0);u[0]=1,u[1]=1,l.buffer=s,l.loop=!0;const d={get bufferSize(){},get channelCount(){return c.channelCount},set channelCount(e){c.channelCount=e},get channelCountMode(){return c.channelCountMode},set channelCountMode(e){c.channelCountMode=e},get channelInterpretation(){return c.channelInterpretation},set channelInterpretation(e){c.channelInterpretation=e},get context(){return c.context},get inputs(){return[]},get numberOfInputs(){return l.numberOfInputs},get numberOfOutputs(){return c.numberOfOutputs},get offset(){return c.gain},get onended(){return l.onended},set onended(e){l.onended=e},addEventListener:(...e)=>l.addEventListener(e[0],e[1],e[2]),dispatchEvent:(...e)=>l.dispatchEvent(e[0]),removeEventListener:(...e)=>l.removeEventListener(e[0],e[1],e[2]),start(e=0){l.start.call(l,e)},stop(e=0){l.stop.call(l,e)}};return e(a,l),r($e(d,c),()=>l.connect(c),()=>l.disconnect(c))})(nn,on,tt,_n),wn=((e,t,n,r,a)=>(o,i)=>{if(void 0===o.createConstantSource)return n(o,i);const s=o.createConstantSource();return Ye(s,i),We(s,i,"offset"),t(r,()=>r(o))||Ze(s),t(a,()=>a(o))||Ue(s),e(o,s),s})(nn,Mt,kn,mt,gt),xn=((e,t,n,r,a)=>()=>{const o=new WeakMap;let i=null,s=null;return{set start(e){i=e},set stop(e){s=e},render(l,c){const u=o.get(c);return void 0!==u?Promise.resolve(u):(async(l,c)=>{let u=n(l);const d=H(u,c);if(!d){const e={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,offset:u.offset.value};u=t(c,e),null!==i&&u.start(i),null!==s&&u.stop(s)}return o.set(c,u),d?await e(c,l.offset,u.offset):await r(c,l.offset,u.offset),await a(l,c,u),u})(l,c)}}})(an,wn,he,sn,Ot),En=((e,t,n,r,a,o,i)=>class extends e{constructor(e,i){const s=a(e),l={...Re,...i},c=r(s,l),u=o(s),d=u?n():null;super(e,!1,c,d),this._constantSourceNodeRenderer=d,this._nativeConstantSourceNode=c,this._offset=t(this,u,c.offset,Q,U),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(e){const t="function"==typeof e?i(this,e):null;this._nativeConstantSourceNode.onended=t;const n=this._nativeConstantSourceNode.onended;this._onended=null!==n&&n===t?e:n}start(e=0){if(this._nativeConstantSourceNode.start(e),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.start=e),"closed"!==this.context.state){V(this);const e=()=>{this._nativeConstantSourceNode.removeEventListener("ended",e),K(this)&&F(this)};this._nativeConstantSourceNode.addEventListener("ended",e)}}stop(e=0){this._nativeConstantSourceNode.stop(e),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.stop=e)}})(Xt,cn,xn,wn,Lt,jt,Ct),Mn=((e,t)=>(n,r)=>{const a=n.createConvolver();if(Ye(a,r),r.disableNormalization===a.normalize&&(a.normalize=!r.disableNormalization),He(a,r,"buffer"),r.channelCount>2)throw e();if(t(a,"channelCount",e=>()=>e.call(a),t=>n=>{if(n>2)throw e();return t.call(a,n)}),"max"===r.channelCountMode)throw e();return t(a,"channelCountMode",e=>()=>e.call(a),t=>n=>{if("max"===n)throw e();return t.call(a,n)}),a})(it,pt),Bn=((e,t,n)=>()=>{const r=new WeakMap;return{render(a,o){const i=r.get(o);return void 0!==i?Promise.resolve(i):(async(a,o)=>{let i=t(a);if(!H(i,o)){const t={buffer:i.buffer,channelCount:i.channelCount,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,disableNormalization:!i.normalize};i=e(o,t)}return r.set(o,i),se(i)?await n(a,o,i.inputs[0]):await n(a,o,i),i})(a,o)}}})(Mn,he,Ot),Sn=((e,t,n,r,a,o)=>class extends e{constructor(e,i){const s=r(e),l={...Ie,...i},c=n(s,l);super(e,!1,c,a(s)?t():null),this._isBufferNullified=!1,this._nativeConvolverNode=c,null!==l.buffer&&o(this,l.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(e){if(this._nativeConvolverNode.buffer=e,null===e&&null!==this._nativeConvolverNode.buffer){const e=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=e.createBuffer(1,1,e.sampleRate),this._isBufferNullified=!0,o(this,0)}else this._isBufferNullified=!1,o(this,null===this._nativeConvolverNode.buffer?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(e){this._nativeConvolverNode.normalize=e}})(Xt,Bn,Mn,Lt,jt,fn),Tn=((e,t,n,r,a)=>o=>{const i=new WeakMap;return{render(s,l){const c=i.get(l);return void 0!==c?Promise.resolve(c):(async(s,l)=>{let c=n(s);const u=H(c,l);if(!u){const e={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,delayTime:c.delayTime.value,maxDelayTime:o};c=t(l,e)}return i.set(l,c),u?await e(l,s.delayTime,c.delayTime):await r(l,s.delayTime,c.delayTime),await a(s,l,c),c})(s,l)}}})(an,et,he,sn,Ot),Rn=((e,t,n,r,a,o,i)=>class extends e{constructor(e,s){const l=a(e),c={...Ne,...s},u=r(l,c),d=o(l);super(e,!1,u,d?n(c.maxDelayTime):null),this._delayTime=t(this,d,u.delayTime),i(this,c.maxDelayTime)}get delayTime(){return this._delayTime}})(Xt,cn,Tn,et,Lt,jt,fn),In=(e=>(t,n)=>{const r=t.createDynamicsCompressor();if(Ye(r,n),n.channelCount>2)throw e();if("max"===n.channelCountMode)throw e();return We(r,n,"attack"),We(r,n,"knee"),We(r,n,"ratio"),We(r,n,"release"),We(r,n,"threshold"),r})(it),On=((e,t,n,r,a)=>()=>{const o=new WeakMap;return{render(i,s){const l=o.get(s);return void 0!==l?Promise.resolve(l):(async(i,s)=>{let l=n(i);const c=H(l,s);if(!c){const e={attack:l.attack.value,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,knee:l.knee.value,ratio:l.ratio.value,release:l.release.value,threshold:l.threshold.value};l=t(s,e)}return o.set(s,l),c?(await e(s,i.attack,l.attack),await e(s,i.knee,l.knee),await e(s,i.ratio,l.ratio),await e(s,i.release,l.release),await e(s,i.threshold,l.threshold)):(await r(s,i.attack,l.attack),await r(s,i.knee,l.knee),await r(s,i.ratio,l.ratio),await r(s,i.release,l.release),await r(s,i.threshold,l.threshold)),await a(i,s,l),l})(i,s)}}})(an,In,he,sn,Ot),Nn=((e,t,n,r,a,o,i,s)=>class extends e{constructor(e,a){const l=o(e),c={...De,...a},u=r(l,c),d=i(l);super(e,!1,u,d?n():null),this._attack=t(this,d,u.attack),this._knee=t(this,d,u.knee),this._nativeDynamicsCompressorNode=u,this._ratio=t(this,d,u.ratio),this._release=t(this,d,u.release),this._threshold=t(this,d,u.threshold),s(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(e){const t=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=e,e>2)throw this._nativeDynamicsCompressorNode.channelCount=t,a()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(e){const t=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=e,"max"===e)throw this._nativeDynamicsCompressorNode.channelCountMode=t,a()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return"number"==typeof this._nativeDynamicsCompressorNode.reduction.value?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}})(Xt,cn,On,In,it,Lt,jt,fn),Ln=((e,t,n,r,a)=>()=>{const o=new WeakMap;return{render(i,s){const l=o.get(s);return void 0!==l?Promise.resolve(l):(async(i,s)=>{let l=n(i);const c=H(l,s);if(!c){const e={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,gain:l.gain.value};l=t(s,e)}return o.set(s,l),c?await e(s,i.gain,l.gain):await r(s,i.gain,l.gain),await a(i,s,l),l})(i,s)}}})(an,tt,he,sn,Ot),Dn=((e,t,n,r,a,o)=>class extends e{constructor(e,i){const s=a(e),l={...Pe,...i},c=r(s,l),u=o(s);super(e,!1,c,u?n():null),this._gain=t(this,u,c.gain,Q,U)}get gain(){return this._gain}})(Xt,cn,Ln,tt,Lt,jt),Pn=((e,t,n,r)=>(a,o,{channelCount:i,channelCountMode:s,channelInterpretation:l,feedback:c,feedforward:u})=>{const d=Qe(o,a.sampleRate),A=c instanceof Float64Array?c:new Float64Array(c),h=u instanceof Float64Array?u:new Float64Array(u),f=A.length,p=h.length,_=Math.min(f,p);if(0===f||f>20)throw r();if(0===A[0])throw t();if(0===p||p>20)throw r();if(0===h[0])throw t();if(1!==A[0]){for(let e=0;e<p;e+=1)h[e]/=A[0];for(let e=1;e<f;e+=1)A[e]/=A[0]}const m=n(a,d,i,i);m.channelCount=i,m.channelCountMode=s,m.channelInterpretation=l;const b=[],g=[],v=[];for(let e=0;e<i;e+=1){b.push(0);const e=new Float32Array(32),t=new Float32Array(32);e.fill(0),t.fill(0),g.push(e),v.push(t)}m.onaudioprocess=e=>{const t=e.inputBuffer,n=e.outputBuffer,r=t.numberOfChannels;for(let e=0;e<r;e+=1){const r=t.getChannelData(e),a=n.getChannelData(e);b[e]=Fe(A,f,h,p,_,g[e],v[e],b[e],32,r,a)}};const C=a.sampleRate/2;return $e({get bufferSize(){return d},get channelCount(){return m.channelCount},set channelCount(e){m.channelCount=e},get channelCountMode(){return m.channelCountMode},set channelCountMode(e){m.channelCountMode=e},get channelInterpretation(){return m.channelInterpretation},set channelInterpretation(e){m.channelInterpretation=e},get context(){return m.context},get inputs(){return[m]},get numberOfInputs(){return m.numberOfInputs},get numberOfOutputs(){return m.numberOfOutputs},addEventListener:(...e)=>m.addEventListener(e[0],e[1],e[2]),dispatchEvent:(...e)=>m.dispatchEvent(e[0]),getFrequencyResponse(t,n,r){if(t.length!==n.length||n.length!==r.length)throw e();const a=t.length;for(let e=0;e<a;e+=1){const a=-Math.PI*(t[e]/C),o=[Math.cos(a),Math.sin(a)],i=nt(at(h,o),at(A,o));n[e]=Math.sqrt(i[0]*i[0]+i[1]*i[1]),r[e]=Math.atan2(i[1],i[0])}},removeEventListener:(...e)=>m.removeEventListener(e[0],e[1],e[2])},m)})(Ve,je,ot,it),jn=((e,t,n,r)=>a=>e(Ge,()=>Ge(a))?Promise.resolve(e(r,r)).then(e=>{if(!e){const e=n(a,512,0,1);a.oncomplete=()=>{e.onaudioprocess=null,e.disconnect()},e.onaudioprocess=()=>a.currentTime,e.connect(a.destination)}return a.startRendering()}):new Promise(e=>{const n=t(a,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});a.oncomplete=t=>{n.disconnect(),e(t.renderedBuffer)},n.connect(a.destination),a.startRendering()}))(Mt,tt,ot,((e,t)=>()=>{if(null===t)return Promise.resolve(!1);const n=new t(1,1,44100),r=e(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(e=>{n.oncomplete=()=>{r.disconnect(),e(0!==n.currentTime)},n.startRendering()})})(tt,Pt)),Vn=((e,t,n,r,a)=>(o,i)=>{const s=new WeakMap;let l=null;return{render(c,u){const d=s.get(u);return void 0!==d?Promise.resolve(d):(async(c,u)=>{let d=null,A=t(c);const h=H(A,u);if(void 0===u.createIIRFilter?d=e(u,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):h||(A=u.createIIRFilter(i,o)),s.set(u,null===d?A:d),null!==d){if(null===l){if(null===n)throw new Error("Missing the native OfflineAudioContext constructor.");const e=new n(c.context.destination.channelCount,c.context.length,u.sampleRate);l=(async()=>(await r(c,e,e.destination),((e,t,n,r)=>{const a=n instanceof Float64Array?n:new Float64Array(n),o=r instanceof Float64Array?r:new Float64Array(r),i=a.length,s=o.length,l=Math.min(i,s);if(1!==a[0]){for(let e=0;e<i;e+=1)o[e]/=a[0];for(let e=1;e<s;e+=1)a[e]/=a[0]}const c=new Float32Array(32),u=new Float32Array(32),d=t.createBuffer(e.numberOfChannels,e.length,e.sampleRate),A=e.numberOfChannels;for(let t=0;t<A;t+=1){const n=e.getChannelData(t),r=d.getChannelData(t);c.fill(0),u.fill(0),Fe(a,i,o,s,l,c,u,0,32,n,r)}return d})(await a(e),u,o,i)))()}const e=await l;return d.buffer=e,d.start(0),d}return await r(c,u,A),A})(c,u)}}})(on,he,Pt,Ot,jn),zn=(e=>(t,n,r)=>{if(void 0===t.createIIRFilter)return e(t,n,r);const a=t.createIIRFilter(r.feedforward,r.feedback);return Ye(a,r),a})(Pn),Fn=((e,t,n,r,a,o)=>class extends e{constructor(e,i){const s=r(e),l=a(s),c={...ze,...i},u=t(s,l?null:e.baseLatency,c);super(e,!1,u,l?n(c.feedback,c.feedforward):null),(e=>{var t;e.getFrequencyResponse=(t=e.getFrequencyResponse,(n,r,a)=>{if(n.length!==r.length||r.length!==a.length)throw Ve();return t.call(e,n,r,a)})})(u),this._nativeIIRFilterNode=u,o(this,1)}getFrequencyResponse(e,t,n){return this._nativeIIRFilterNode.getFrequencyResponse(e,t,n)}})(Xt,zn,Vn,Lt,jt,fn),qn=((e,t,n,r,a,o,i,s)=>(l,c)=>{const u=c.listener,{forwardX:d,forwardY:A,forwardZ:h,positionX:f,positionY:p,positionZ:_,upX:m,upY:b,upZ:g}=void 0===u.forwardX?(()=>{const d=new Float32Array(1),A=t(c,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),h=i(c);let f=!1,p=[0,0,-1,0,1,0],_=[0,0,0];const m=()=>{if(f)return;f=!0;const e=r(c,256,9,0);e.onaudioprocess=({inputBuffer:e})=>{const t=[o(e,d,0),o(e,d,1),o(e,d,2),o(e,d,3),o(e,d,4),o(e,d,5)];t.some((e,t)=>e!==p[t])&&(u.setOrientation(...t),p=t);const n=[o(e,d,6),o(e,d,7),o(e,d,8)];n.some((e,t)=>e!==_[t])&&(u.setPosition(...n),_=n)},A.connect(e)},b=e=>t=>{t!==p[e]&&(p[e]=t,u.setOrientation(...p))},g=e=>t=>{t!==_[e]&&(_[e]=t,u.setPosition(..._))},v=(t,r,o)=>{const i=n(c,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:r});i.connect(A,0,t),i.start(),Object.defineProperty(i.offset,"defaultValue",{get:()=>r});const u=e({context:l},h,i.offset,Q,U);var d,f,p,_,b,g,v;return s(u,"value",e=>()=>e.call(u),e=>t=>{try{e.call(u,t)}catch(e){if(9!==e.code)throw e}m(),h&&o(t)}),u.cancelAndHoldAtTime=(d=u.cancelAndHoldAtTime,h?()=>{throw a()}:(...e)=>{const t=d.apply(u,e);return m(),t}),u.cancelScheduledValues=(f=u.cancelScheduledValues,h?()=>{throw a()}:(...e)=>{const t=f.apply(u,e);return m(),t}),u.exponentialRampToValueAtTime=(p=u.exponentialRampToValueAtTime,h?()=>{throw a()}:(...e)=>{const t=p.apply(u,e);return m(),t}),u.linearRampToValueAtTime=(_=u.linearRampToValueAtTime,h?()=>{throw a()}:(...e)=>{const t=_.apply(u,e);return m(),t}),u.setTargetAtTime=(b=u.setTargetAtTime,h?()=>{throw a()}:(...e)=>{const t=b.apply(u,e);return m(),t}),u.setValueAtTime=(g=u.setValueAtTime,h?()=>{throw a()}:(...e)=>{const t=g.apply(u,e);return m(),t}),u.setValueCurveAtTime=(v=u.setValueCurveAtTime,h?()=>{throw a()}:(...e)=>{const t=v.apply(u,e);return m(),t}),u};return{forwardX:v(0,0,b(0)),forwardY:v(1,0,b(1)),forwardZ:v(2,-1,b(2)),positionX:v(6,0,g(0)),positionY:v(7,0,g(1)),positionZ:v(8,0,g(2)),upX:v(3,0,b(3)),upY:v(4,1,b(4)),upZ:v(5,0,b(5))}})():u;return{get forwardX(){return d},get forwardY(){return A},get forwardZ(){return h},get positionX(){return f},get positionY(){return p},get positionZ(){return _},get upX(){return m},get upY(){return b},get upZ(){return g}}})(cn,bn,wn,ot,it,ht,jt,pt),Gn=new WeakMap,Hn=((e,t,n,r,a,o)=>class extends n{constructor(n,o){super(n),this._nativeContext=n,x.set(this,n),r(n)&&a.set(n,new Set),this._destination=new e(this,o),this._listener=t(this,n),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(e){const t="function"==typeof e?o(this,e):null;this._nativeContext.onstatechange=t;const n=this._nativeContext.onstatechange;this._onstatechange=null!==n&&n===t?e:n}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}})(An,qn,zt,jt,Gn,Ct),Yn=((e,t,n,r,a,o)=>(i,s)=>{const l=i.createOscillator();return Ye(l,s),We(l,s,"detune"),We(l,s,"frequency"),void 0!==s.periodicWave?l.setPeriodicWave(s.periodicWave):He(l,s,"type"),t(n,()=>n(i))||Ze(l),t(r,()=>r(i))||o(l,i),t(a,()=>a(i))||Ue(l),e(i,l),l})(nn,Mt,mt,bt,gt,vt),Xn=((e,t,n,r,a)=>()=>{const o=new WeakMap;let i=null,s=null,l=null;return{set periodicWave(e){i=e},set start(e){s=e},set stop(e){l=e},render(c,u){const d=o.get(u);return void 0!==d?Promise.resolve(d):(async(c,u)=>{let d=n(c);const A=H(d,u);if(!A){const e={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,detune:d.detune.value,frequency:d.frequency.value,periodicWave:null===i?void 0:i,type:d.type};d=t(u,e),null!==s&&d.start(s),null!==l&&d.stop(l)}return o.set(u,d),A?(await e(u,c.detune,d.detune),await e(u,c.frequency,d.frequency)):(await r(u,c.detune,d.detune),await r(u,c.frequency,d.frequency)),await a(c,u,d),d})(c,u)}}})(an,Yn,he,sn,Ot),Wn=((e,t,n,r,a,o,i)=>class extends e{constructor(e,i){const s=a(e),l={...lt,...i},c=n(s,l),u=o(s),d=u?r():null,A=e.sampleRate/2;super(e,!1,c,d),this._detune=t(this,u,c.detune,153600,-153600),this._frequency=t(this,u,c.frequency,A,-A),this._nativeOscillatorNode=c,this._onended=null,this._oscillatorNodeRenderer=d,null!==this._oscillatorNodeRenderer&&void 0!==l.periodicWave&&(this._oscillatorNodeRenderer.periodicWave=l.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(e){const t="function"==typeof e?i(this,e):null;this._nativeOscillatorNode.onended=t;const n=this._nativeOscillatorNode.onended;this._onended=null!==n&&n===t?e:n}get type(){return this._nativeOscillatorNode.type}set type(e){this._nativeOscillatorNode.type=e,null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(e){this._nativeOscillatorNode.setPeriodicWave(e),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=e)}start(e=0){if(this._nativeOscillatorNode.start(e),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.start=e),"closed"!==this.context.state){V(this);const e=()=>{this._nativeOscillatorNode.removeEventListener("ended",e),K(this)&&F(this)};this._nativeOscillatorNode.addEventListener("ended",e)}}stop(e=0){this._nativeOscillatorNode.stop(e),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.stop=e)}})(Xt,cn,Yn,Xn,Lt,jt,Ct),Zn=(e=>(t,n)=>{const r=e(t,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),a=t.createBuffer(1,2,44100);return r.buffer=a,r.loop=!0,r.connect(n),r.start(),()=>{r.stop(),r.disconnect(n)}})(on),Un=((e,t,n,r,a)=>(o,{curve:i,oversample:s,...l})=>{const c=o.createWaveShaper(),u=o.createWaveShaper();Ye(c,l),Ye(u,l);const d=n(o,{...l,gain:1}),A=n(o,{...l,gain:-1}),h=n(o,{...l,gain:1}),f=n(o,{...l,gain:-1});let p=null,_=!1,m=null;const b={get bufferSize(){},get channelCount(){return c.channelCount},set channelCount(e){d.channelCount=e,A.channelCount=e,c.channelCount=e,h.channelCount=e,u.channelCount=e,f.channelCount=e},get channelCountMode(){return c.channelCountMode},set channelCountMode(e){d.channelCountMode=e,A.channelCountMode=e,c.channelCountMode=e,h.channelCountMode=e,u.channelCountMode=e,f.channelCountMode=e},get channelInterpretation(){return c.channelInterpretation},set channelInterpretation(e){d.channelInterpretation=e,A.channelInterpretation=e,c.channelInterpretation=e,h.channelInterpretation=e,u.channelInterpretation=e,f.channelInterpretation=e},get context(){return c.context},get curve(){return m},set curve(n){if(null!==n&&n.length<2)throw t();if(null===n)c.curve=n,u.curve=n;else{const e=n.length,t=new Float32Array(e+2-e%2),r=new Float32Array(e+2-e%2);t[0]=n[0],r[0]=-n[e-1];const a=Math.ceil((e+1)/2),o=(e+1)/2-1;for(let i=1;i<a;i+=1){const s=i/a*o,l=Math.floor(s),c=Math.ceil(s);t[i]=l===c?n[l]:(1-(s-l))*n[l]+(1-(c-s))*n[c],r[i]=l===c?-n[e-1-l]:-(1-(s-l))*n[e-1-l]-(1-(c-s))*n[e-1-c]}t[a]=e%2==1?n[a-1]:(n[a-2]+n[a-1])/2,c.curve=t,u.curve=r}m=n,_&&(r(m)&&null===p?p=e(o,d):null!==p&&(p(),p=null))},get inputs(){return[d]},get numberOfInputs(){return c.numberOfInputs},get numberOfOutputs(){return c.numberOfOutputs},get oversample(){return c.oversample},set oversample(e){c.oversample=e,u.oversample=e},addEventListener:(...e)=>d.addEventListener(e[0],e[1],e[2]),dispatchEvent:(...e)=>d.dispatchEvent(e[0]),removeEventListener:(...e)=>d.removeEventListener(e[0],e[1],e[2])};return null!==i&&(b.curve=i instanceof Float32Array?i:new Float32Array(i)),s!==b.oversample&&(b.oversample=s),a($e(b,h),()=>{d.connect(c).connect(h),d.connect(A).connect(u).connect(f).connect(h),_=!0,r(m)&&(p=e(o,d))},()=>{d.disconnect(c),c.disconnect(h),d.disconnect(A),A.disconnect(u),u.disconnect(f),f.disconnect(h),_=!1,null!==p&&(p(),p=null)})})(Zn,je,tt,ft,_n),Qn=((e,t,n,r,a,o,i)=>(s,l)=>{const c=s.createWaveShaper();if(null!==o&&"webkitAudioContext"===o.name&&void 0===s.createGain().gain.automationRate)return n(s,l);Ye(c,l);const u=null===l.curve||l.curve instanceof Float32Array?l.curve:new Float32Array(l.curve);if(null!==u&&u.length<2)throw t();He(c,{curve:u},"curve"),He(c,l,"oversample");let d=null,A=!1;return i(c,"curve",e=>()=>e.call(c),t=>n=>(t.call(c,n),A&&(r(n)&&null===d?d=e(s,c):r(n)||null===d||(d(),d=null)),n)),a(c,()=>{A=!0,r(c.curve)&&(d=e(s,c))},()=>{A=!1,null!==d&&(d(),d=null)})})(Zn,je,Un,ft,_n,Ft,pt),Kn=((e,t,n,r,a,o,i,s,l,c)=>(u,{coneInnerAngle:d,coneOuterAngle:A,coneOuterGain:h,distanceModel:f,maxDistance:p,orientationX:_,orientationY:m,orientationZ:b,panningModel:g,positionX:v,positionY:C,positionZ:y,refDistance:k,rolloffFactor:w,...x})=>{const E=u.createPanner();if(x.channelCount>2)throw i();if("max"===x.channelCountMode)throw i();Ye(E,x);const M={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},B=n(u,{...M,channelInterpretation:"speakers",numberOfInputs:6}),S=r(u,{...x,gain:1}),T=r(u,{...M,gain:1}),R=r(u,{...M,gain:0}),I=r(u,{...M,gain:0}),O=r(u,{...M,gain:0}),N=r(u,{...M,gain:0}),L=r(u,{...M,gain:0}),D=a(u,256,6,1),P=o(u,{...M,curve:new Float32Array([1,1]),oversample:"none"});let j=[_,m,b],V=[v,C,y];const z=new Float32Array(1);D.onaudioprocess=({inputBuffer:e})=>{const t=[l(e,z,0),l(e,z,1),l(e,z,2)];t.some((e,t)=>e!==j[t])&&(E.setOrientation(...t),j=t);const n=[l(e,z,3),l(e,z,4),l(e,z,5)];n.some((e,t)=>e!==V[t])&&(E.setPosition(...n),V=n)},Object.defineProperty(R.gain,"defaultValue",{get:()=>0}),Object.defineProperty(I.gain,"defaultValue",{get:()=>0}),Object.defineProperty(O.gain,"defaultValue",{get:()=>0}),Object.defineProperty(N.gain,"defaultValue",{get:()=>0}),Object.defineProperty(L.gain,"defaultValue",{get:()=>0});const F={get bufferSize(){},get channelCount(){return E.channelCount},set channelCount(e){if(e>2)throw i();S.channelCount=e,E.channelCount=e},get channelCountMode(){return E.channelCountMode},set channelCountMode(e){if("max"===e)throw i();S.channelCountMode=e,E.channelCountMode=e},get channelInterpretation(){return E.channelInterpretation},set channelInterpretation(e){S.channelInterpretation=e,E.channelInterpretation=e},get coneInnerAngle(){return E.coneInnerAngle},set coneInnerAngle(e){E.coneInnerAngle=e},get coneOuterAngle(){return E.coneOuterAngle},set coneOuterAngle(e){E.coneOuterAngle=e},get coneOuterGain(){return E.coneOuterGain},set coneOuterGain(e){if(e<0||e>1)throw t();E.coneOuterGain=e},get context(){return E.context},get distanceModel(){return E.distanceModel},set distanceModel(e){E.distanceModel=e},get inputs(){return[S]},get maxDistance(){return E.maxDistance},set maxDistance(e){if(e<0)throw new RangeError;E.maxDistance=e},get numberOfInputs(){return E.numberOfInputs},get numberOfOutputs(){return E.numberOfOutputs},get orientationX(){return T.gain},get orientationY(){return R.gain},get orientationZ(){return I.gain},get panningModel(){return E.panningModel},set panningModel(e){E.panningModel=e},get positionX(){return O.gain},get positionY(){return N.gain},get positionZ(){return L.gain},get refDistance(){return E.refDistance},set refDistance(e){if(e<0)throw new RangeError;E.refDistance=e},get rolloffFactor(){return E.rolloffFactor},set rolloffFactor(e){if(e<0)throw new RangeError;E.rolloffFactor=e},addEventListener:(...e)=>S.addEventListener(e[0],e[1],e[2]),dispatchEvent:(...e)=>S.dispatchEvent(e[0]),removeEventListener:(...e)=>S.removeEventListener(e[0],e[1],e[2])};return d!==F.coneInnerAngle&&(F.coneInnerAngle=d),A!==F.coneOuterAngle&&(F.coneOuterAngle=A),h!==F.coneOuterGain&&(F.coneOuterGain=h),f!==F.distanceModel&&(F.distanceModel=f),p!==F.maxDistance&&(F.maxDistance=p),_!==F.orientationX.value&&(F.orientationX.value=_),m!==F.orientationY.value&&(F.orientationY.value=m),b!==F.orientationZ.value&&(F.orientationZ.value=b),g!==F.panningModel&&(F.panningModel=g),v!==F.positionX.value&&(F.positionX.value=v),C!==F.positionY.value&&(F.positionY.value=C),y!==F.positionZ.value&&(F.positionZ.value=y),k!==F.refDistance&&(F.refDistance=k),w!==F.rolloffFactor&&(F.rolloffFactor=w),1===j[0]&&0===j[1]&&0===j[2]||E.setOrientation(...j),0===V[0]&&0===V[1]&&0===V[2]||E.setPosition(...V),c($e(F,E),()=>{S.connect(E),e(S,P,0,0),P.connect(T).connect(B,0,0),P.connect(R).connect(B,0,1),P.connect(I).connect(B,0,2),P.connect(O).connect(B,0,3),P.connect(N).connect(B,0,4),P.connect(L).connect(B,0,5),B.connect(D).connect(u.destination)},()=>{S.disconnect(E),s(S,P,0,0),P.disconnect(T),T.disconnect(B),P.disconnect(R),R.disconnect(B),P.disconnect(I),I.disconnect(B),P.disconnect(O),O.disconnect(B),P.disconnect(N),N.disconnect(B),P.disconnect(L),L.disconnect(B),B.disconnect(D),D.disconnect(u.destination)})})(le,je,bn,tt,ot,Qn,it,Ae,ht,_n),Jn=(e=>(t,n)=>{const r=t.createPanner();return void 0===r.orientationX?e(t,n):(Ye(r,n),We(r,n,"orientationX"),We(r,n,"orientationY"),We(r,n,"orientationZ"),We(r,n,"positionX"),We(r,n,"positionY"),We(r,n,"positionZ"),He(r,n,"coneInnerAngle"),He(r,n,"coneOuterAngle"),He(r,n,"coneOuterGain"),He(r,n,"distanceModel"),He(r,n,"maxDistance"),He(r,n,"panningModel"),He(r,n,"refDistance"),He(r,n,"rolloffFactor"),r)})(Kn),$n=((e,t,n,r,a,o,i,s,l,c)=>()=>{const u=new WeakMap;let d=null;return{render(A,h){const f=u.get(h);return void 0!==f?Promise.resolve(f):(async(A,h)=>{let f=null,p=o(A);const _={channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation},m={..._,coneInnerAngle:p.coneInnerAngle,coneOuterAngle:p.coneOuterAngle,coneOuterGain:p.coneOuterGain,distanceModel:p.distanceModel,maxDistance:p.maxDistance,panningModel:p.panningModel,refDistance:p.refDistance,rolloffFactor:p.rolloffFactor},b=H(p,h);if("bufferSize"in p)f=r(h,{..._,gain:1});else if(!b){const e={...m,orientationX:p.orientationX.value,orientationY:p.orientationY.value,orientationZ:p.orientationZ.value,positionX:p.positionX.value,positionY:p.positionY.value,positionZ:p.positionZ.value};p=a(h,e)}if(u.set(h,null===f?p:f),null!==f){if(null===d){if(null===i)throw new Error("Missing the native OfflineAudioContext constructor.");const e=new i(6,A.context.length,h.sampleRate),r=t(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});r.connect(e.destination),d=(async()=>{const t=await Promise.all([A.orientationX,A.orientationY,A.orientationZ,A.positionX,A.positionY,A.positionZ].map(async(t,r)=>{const a=n(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:0===r?1:0});return await s(e,t,a.offset),a}));for(let e=0;e<6;e+=1)t[e].connect(r,0,e),t[e].start(0);return c(e)})()}const e=await d,o=r(h,{..._,gain:1});await l(A,h,o);const u=[];for(let t=0;t<e.numberOfChannels;t+=1)u.push(e.getChannelData(t));let p=[u[0][0],u[1][0],u[2][0]],b=[u[3][0],u[4][0],u[5][0]],g=r(h,{..._,gain:1}),v=a(h,{...m,orientationX:p[0],orientationY:p[1],orientationZ:p[2],positionX:b[0],positionY:b[1],positionZ:b[2]});o.connect(g).connect(v.inputs[0]),v.connect(f);for(let t=128;t<e.length;t+=128){const e=[u[0][t],u[1][t],u[2][t]],n=[u[3][t],u[4][t],u[5][t]];if(e.some((e,t)=>e!==p[t])||n.some((e,t)=>e!==b[t])){p=e,b=n;const i=t/h.sampleRate;g.gain.setValueAtTime(0,i),g=r(h,{..._,gain:0}),v=a(h,{...m,orientationX:p[0],orientationY:p[1],orientationZ:p[2],positionX:b[0],positionY:b[1],positionZ:b[2]}),g.gain.setValueAtTime(1,i),o.connect(g).connect(v.inputs[0]),v.connect(f)}}return f}return b?(await e(h,A.orientationX,p.orientationX),await e(h,A.orientationY,p.orientationY),await e(h,A.orientationZ,p.orientationZ),await e(h,A.positionX,p.positionX),await e(h,A.positionY,p.positionY),await e(h,A.positionZ,p.positionZ)):(await s(h,A.orientationX,p.orientationX),await s(h,A.orientationY,p.orientationY),await s(h,A.orientationZ,p.orientationZ),await s(h,A.positionX,p.positionX),await s(h,A.positionY,p.positionY),await s(h,A.positionZ,p.positionZ)),se(p)?await l(A,h,p.inputs[0]):await l(A,h,p),p})(A,h)}}})(an,bn,wn,tt,Jn,he,Pt,sn,Ot,jn),er=((e,t,n,r,a,o,i)=>class extends e{constructor(e,s){const l=a(e),c={...ct,...s},u=n(l,c),d=o(l);super(e,!1,u,d?r():null),this._nativePannerNode=u,this._orientationX=t(this,d,u.orientationX,Q,U),this._orientationY=t(this,d,u.orientationY,Q,U),this._orientationZ=t(this,d,u.orientationZ,Q,U),this._positionX=t(this,d,u.positionX,Q,U),this._positionY=t(this,d,u.positionY,Q,U),this._positionZ=t(this,d,u.positionZ,Q,U),i(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(e){this._nativePannerNode.coneInnerAngle=e}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(e){this._nativePannerNode.coneOuterAngle=e}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(e){this._nativePannerNode.coneOuterGain=e}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(e){this._nativePannerNode.distanceModel=e}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(e){this._nativePannerNode.maxDistance=e}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(e){this._nativePannerNode.panningModel=e}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(e){this._nativePannerNode.refDistance=e}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(e){this._nativePannerNode.rolloffFactor=e}})(Xt,cn,Jn,$n,Lt,jt,fn),tr=(e=>(t,{disableNormalization:n,imag:r,real:a})=>{const o=r instanceof Float32Array?r:new Float32Array(r),i=a instanceof Float32Array?a:new Float32Array(a),s=t.createPeriodicWave(i,o,{disableNormalization:n});if(Array.from(r).length<2)throw e();return s})(X),nr=((e,t,n)=>class r{constructor(r,a){const o=t(r),i=(e=>{const{imag:t,real:n}=e;return void 0===t?void 0===n?{...e,imag:[0,0],real:[0,0]}:{...e,imag:Array.from(n,()=>0),real:n}:void 0===n?{...e,imag:t,real:Array.from(t,()=>0)}:{...e,imag:t,real:n}})({...ut,...a}),s=e(o,i);return n.add(s),s}static[Symbol.hasInstance](e){return null!==e&&"object"==typeof e&&Object.getPrototypeOf(e)===r.prototype||n.has(e)}})(tr,Lt,new WeakSet),rr=((e,t,n,r,a,o)=>{const i=16385,s=new Float32Array([1,1]),l=Math.PI/2,c={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},u={...c,oversample:"none"},d=(e,o,d,A,h)=>{if(1===o)return((e,t,a,o)=>{const d=new Float32Array(i),A=new Float32Array(i);for(let e=0;e<i;e+=1){const t=e/16384*l;d[e]=Math.cos(t),A[e]=Math.sin(t)}const h=n(e,{...c,gain:0}),f=r(e,{...u,curve:d}),p=r(e,{...u,curve:s}),_=n(e,{...c,gain:0}),m=r(e,{...u,curve:A});return{connectGraph(){t.connect(h),t.connect(void 0===p.inputs?p:p.inputs[0]),t.connect(_),p.connect(a),a.connect(void 0===f.inputs?f:f.inputs[0]),a.connect(void 0===m.inputs?m:m.inputs[0]),f.connect(h.gain),m.connect(_.gain),h.connect(o,0,0),_.connect(o,0,1)},disconnectGraph(){t.disconnect(h),t.disconnect(void 0===p.inputs?p:p.inputs[0]),t.disconnect(_),p.disconnect(a),a.disconnect(void 0===f.inputs?f:f.inputs[0]),a.disconnect(void 0===m.inputs?m:m.inputs[0]),f.disconnect(h.gain),m.disconnect(_.gain),h.disconnect(o,0,0),_.disconnect(o,0,1)}}})(e,d,A,h);if(2===o)return((e,a,o,d)=>{const A=new Float32Array(i),h=new Float32Array(i),f=new Float32Array(i),p=new Float32Array(i),_=Math.floor(8192.5);for(let e=0;e<i;e+=1)if(e>_){const t=(e-_)/(16384-_)*l;A[e]=Math.cos(t),h[e]=Math.sin(t),f[e]=0,p[e]=1}else{const t=e/(16384-_)*l;A[e]=1,h[e]=0,f[e]=Math.cos(t),p[e]=Math.sin(t)}const m=t(e,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),b=n(e,{...c,gain:0}),g=r(e,{...u,curve:A}),v=n(e,{...c,gain:0}),C=r(e,{...u,curve:h}),y=r(e,{...u,curve:s}),k=n(e,{...c,gain:0}),w=r(e,{...u,curve:f}),x=n(e,{...c,gain:0}),E=r(e,{...u,curve:p});return{connectGraph(){a.connect(m),a.connect(void 0===y.inputs?y:y.inputs[0]),m.connect(b,0),m.connect(v,0),m.connect(k,1),m.connect(x,1),y.connect(o),o.connect(void 0===g.inputs?g:g.inputs[0]),o.connect(void 0===C.inputs?C:C.inputs[0]),o.connect(void 0===w.inputs?w:w.inputs[0]),o.connect(void 0===E.inputs?E:E.inputs[0]),g.connect(b.gain),C.connect(v.gain),w.connect(k.gain),E.connect(x.gain),b.connect(d,0,0),k.connect(d,0,0),v.connect(d,0,1),x.connect(d,0,1)},disconnectGraph(){a.disconnect(m),a.disconnect(void 0===y.inputs?y:y.inputs[0]),m.disconnect(b,0),m.disconnect(v,0),m.disconnect(k,1),m.disconnect(x,1),y.disconnect(o),o.disconnect(void 0===g.inputs?g:g.inputs[0]),o.disconnect(void 0===C.inputs?C:C.inputs[0]),o.disconnect(void 0===w.inputs?w:w.inputs[0]),o.disconnect(void 0===E.inputs?E:E.inputs[0]),g.disconnect(b.gain),C.disconnect(v.gain),w.disconnect(k.gain),E.disconnect(x.gain),b.disconnect(d,0,0),k.disconnect(d,0,0),v.disconnect(d,0,1),x.disconnect(d,0,1)}}})(e,d,A,h);throw a()};return(t,{channelCount:r,channelCountMode:i,pan:s,...l})=>{if("max"===i)throw a();const c=e(t,{...l,channelCount:1,channelCountMode:i,numberOfInputs:2}),u=n(t,{...l,channelCount:r,channelCountMode:i,gain:1}),A=n(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:s});let{connectGraph:h,disconnectGraph:f}=d(t,r,u,A,c);Object.defineProperty(A.gain,"defaultValue",{get:()=>0}),Object.defineProperty(A.gain,"maxValue",{get:()=>1}),Object.defineProperty(A.gain,"minValue",{get:()=>-1});const p={get bufferSize(){},get channelCount(){return u.channelCount},set channelCount(e){u.channelCount!==e&&(_&&f(),({connectGraph:h,disconnectGraph:f}=d(t,e,u,A,c)),_&&h()),u.channelCount=e},get channelCountMode(){return u.channelCountMode},set channelCountMode(e){if("clamped-max"===e||"max"===e)throw a();u.channelCountMode=e},get channelInterpretation(){return u.channelInterpretation},set channelInterpretation(e){u.channelInterpretation=e},get context(){return u.context},get inputs(){return[u]},get numberOfInputs(){return u.numberOfInputs},get numberOfOutputs(){return u.numberOfOutputs},get pan(){return A.gain},addEventListener:(...e)=>u.addEventListener(e[0],e[1],e[2]),dispatchEvent:(...e)=>u.dispatchEvent(e[0]),removeEventListener:(...e)=>u.removeEventListener(e[0],e[1],e[2])};let _=!1;return o($e(p,c),()=>{h(),_=!0},()=>{f(),_=!1})}})(bn,Je,tt,Qn,it,_n),ar=((e,t)=>(n,r)=>{const a=r.channelCountMode;if("clamped-max"===a)throw t();if(void 0===n.createStereoPanner)return e(n,r);const o=n.createStereoPanner();return Ye(o,r),We(o,r,"pan"),Object.defineProperty(o,"channelCountMode",{get:()=>a,set:e=>{if(e!==a)throw t()}}),o})(rr,it),or=((e,t,n,r,a)=>()=>{const o=new WeakMap;return{render(i,s){const l=o.get(s);return void 0!==l?Promise.resolve(l):(async(i,s)=>{let l=n(i);const c=H(l,s);if(!c){const e={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,pan:l.pan.value};l=t(s,e)}return o.set(s,l),c?await e(s,i.pan,l.pan):await r(s,i.pan,l.pan),se(l)?await a(i,s,l.inputs[0]):await a(i,s,l),l})(i,s)}}})(an,ar,he,sn,Ot),ir=((e,t,n,r,a,o)=>class extends e{constructor(e,i){const s=a(e),l={...dt,...i},c=n(s,l),u=o(s);super(e,!1,c,u?r():null),this._pan=t(this,u,c.pan)}get pan(){return this._pan}})(Xt,cn,ar,or,Lt,jt),sr=((e,t,n)=>()=>{const r=new WeakMap;return{render(a,o){const i=r.get(o);return void 0!==i?Promise.resolve(i):(async(a,o)=>{let i=t(a);if(!H(i,o)){const t={channelCount:i.channelCount,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,curve:i.curve,oversample:i.oversample};i=e(o,t)}return r.set(o,i),se(i)?await n(a,o,i.inputs[0]):await n(a,o,i),i})(a,o)}}})(Qn,he,Ot),lr=((e,t,n,r,a,o,i)=>class extends e{constructor(e,t){const s=a(e),l={...At,...t},c=n(s,l);super(e,!0,c,o(s)?r():null),this._isCurveNullified=!1,this._nativeWaveShaperNode=c,i(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(e){if(null===e)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(e.length<2)throw t();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=e}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(e){this._nativeWaveShaperNode.oversample=e}})(Xt,je,Qn,sr,Lt,jt,fn),cr=(e=>null!==e&&e.isSecureContext)(Tt),ur=(e=>(t,n,r)=>{Object.defineProperties(e,{currentFrame:{configurable:!0,get:()=>Math.round(t*n)},currentTime:{configurable:!0,get:()=>t}});try{return r()}finally{null!==e&&(delete e.currentFrame,delete e.currentTime)}})(Tt),dr=new WeakMap,Ar=((e,t)=>n=>{let r=e.get(n);if(void 0!==r)return r;if(null===t)throw new Error("Missing the native OfflineAudioContext constructor.");return r=new t(1,1,44100),e.set(n,r),r})(dr,Pt),hr=cr?((e,t,n,r,a,o,i,s,l,c,u,d,A)=>{let h=0;return(f,p,_={credentials:"omit"})=>{const m=u.get(f);if(void 0!==m&&m.has(p))return Promise.resolve();const b=c.get(f);if(void 0!==b){const e=b.get(p);if(void 0!==e)return e}const g=o(f),v=void 0===g.audioWorklet?a(p).then(([e,t])=>{const[r,a]=I(e,t);return n(`${r};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${a}\n})})(window,'_AWGS')`)}).then(()=>{const e=A._AWGS.pop();if(void 0===e)throw new SyntaxError;r(g.currentTime,g.sampleRate,()=>e(class{},void 0,(e,n)=>{if(""===e.trim())throw t();const r=B.get(g);if(void 0!==r){if(r.has(e))throw t();N(n),O(n.parameterDescriptors),r.set(e,n)}else N(n),O(n.parameterDescriptors),B.set(g,new Map([[e,n]]))},g.sampleRate,void 0,void 0))}):Promise.all([a(p),Promise.resolve(e(d,d))]).then(([[e,t],n])=>{const r=h+1;h=r;const[a,o]=I(e,t),c=new Blob([`${a};((AudioWorkletProcessor,registerProcessor)=>{${o}\n})(${n?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${n?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${n?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${r}',class extends AudioWorkletProcessor{process(){return !1}})`],{type:"application/javascript; charset=utf-8"}),u=URL.createObjectURL(c);return g.audioWorklet.addModule(u,_).then(()=>{if(s(g))return g;const e=i(g);return e.audioWorklet.addModule(u,_).then(()=>e)}).then(e=>{if(null===l)throw new SyntaxError;try{new l(e,`__sac${r}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(u))});return void 0===b?c.set(f,new Map([[p,v]])):b.set(p,v),v.then(()=>{const e=u.get(f);void 0===e?u.set(f,new Set([p])):e.add(p)}).finally(()=>{const e=c.get(f);void 0!==e&&e.delete(p)}),v}})(Mt,it,(e=>t=>new Promise((n,r)=>{if(null===e)return void r(new SyntaxError);const a=e.document.head;if(null===a)r(new SyntaxError);else{const o=e.document.createElement("script"),i=new Blob([t],{type:"application/javascript"}),s=URL.createObjectURL(i),l=e.onerror,c=()=>{e.onerror=l,URL.revokeObjectURL(s)};e.onerror=(t,n,a,o,i)=>n===s||n===e.location.href&&1===a&&1===o?(c(),r(i),!1):null!==l?l(t,n,a,o,i):void 0,o.onerror=()=>{c(),r(new SyntaxError)},o.onload=()=>{c(),n()},o.src=s,o.type="module",a.appendChild(o)}}))(Tt),ur,async e=>{try{const t=await fetch(e);if(t.ok)return[await t.text(),t.url]}catch{}throw new DOMException("","AbortError")},Lt,Ar,jt,Yt,new WeakMap,new WeakMap,((e,t)=>async()=>{if(null===e)return!0;if(null===t)return!1;const n=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),r=new t(1,128,44100),a=URL.createObjectURL(n);let o=!1,i=!1;try{await r.audioWorklet.addModule(a);const t=new e(r,"a",{numberOfOutputs:0}),n=r.createOscillator();t.port.onmessage=()=>o=!0,t.onprocessorerror=()=>i=!0,n.connect(t),n.start(0),await r.startRendering(),await new Promise(e=>setTimeout(e))}catch{}finally{URL.revokeObjectURL(a)}return o&&!i})(Yt,Pt),Tt):void 0,fr=((e,t)=>n=>e(n)||t(n))(qt,jt),pr=((e,t,n,r,a,o,i,s,l,c,u)=>(n,r)=>{const d=i(n)?n:o(n);if(a.has(r)){const e=new DOMException("","DataCloneError");return Promise.reject(e)}try{a.add(r)}catch{}return t(l,()=>l(d))?d.decodeAudioData(r).then(n=>(Oe(r).catch(()=>{}),t(s,()=>s(n))||u(n),e.add(n),n)):new Promise((t,n)=>{const a=async()=>{try{await Oe(r)}catch{}},o=e=>{n(e),a()};try{d.decodeAudioData(r,n=>{"function"!=typeof n.copyFromChannel&&(c(n),W(n)),e.add(n),a().then(()=>t(n))},e=>{o(null===e?new DOMException("","EncodingError"):e)})}catch(e){o(e)}})})(Ut,Mt,0,0,new WeakSet,Lt,fr,Y,Ge,$t,en),_r=((e,t,n,r,a,o,i,s,l,c,u,d,A,h,f,p,_,m,b,g)=>class extends f{constructor(t,n){super(t,n),this._nativeContext=t,this._audioWorklet=void 0===e?void 0:{addModule:(t,n)=>e(this,t,n)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new t(this)}createBiquadFilter(){return new a(this)}createBuffer(e,t,r){return new n({length:t,numberOfChannels:e,sampleRate:r})}createBufferSource(){return new r(this)}createChannelMerger(e=6){return new o(this,{numberOfInputs:e})}createChannelSplitter(e=6){return new i(this,{numberOfOutputs:e})}createConstantSource(){return new s(this)}createConvolver(){return new l(this)}createDelay(e=1){return new u(this,{maxDelayTime:e})}createDynamicsCompressor(){return new d(this)}createGain(){return new A(this)}createIIRFilter(e,t){return new h(this,{feedback:t,feedforward:e})}createOscillator(){return new p(this)}createPanner(){return new _(this)}createPeriodicWave(e,t,n={disableNormalization:!1}){return new m(this,{...n,imag:t,real:e})}createStereoPanner(){return new b(this)}createWaveShaper(){return new g(this)}decodeAudioData(e,t,n){return c(this._nativeContext,e).then(e=>("function"==typeof t&&t(e),e),e=>{throw"function"==typeof n&&n(e),e})}})(hr,Zt,tn,dn,pn,vn,yn,En,Sn,pr,Rn,Nn,Dn,Fn,Hn,Wn,er,nr,ir,lr),mr=(((e,t,n,r)=>{})(Xt,0,Lt,jt),((e,t,n,r)=>{})(Xt,0,Lt,jt),((e,t,n,r)=>{})(Xt,0,Lt,jt),((e,t)=>(n,{mediaStreamTrack:r})=>{if("function"==typeof n.createMediaStreamTrackSource)return n.createMediaStreamTrackSource(r);const a=new MediaStream([r]),o=n.createMediaStreamSource(a);if("audio"!==r.kind)throw e();if(t(n))throw new TypeError;return o})(je,jt)),br=(((e,t,n)=>{})(Xt,mr,Lt),(e=>t=>{const n=e.get(t);if(void 0===n)throw new Error("The context has no set of AudioWorkletNodes.");return n})(Gn)),gr=((e=>{})(br),(e=>(t,n,r=0,a=0)=>{const o=t[r];if(void 0===o)throw e();return ge(n)?o.connect(n,0,a):o.connect(n,0)})(X)),vr=(e=>(t,n)=>{e(t).delete(n)})(br),Cr=(e=>(t,n=void 0,r=void 0,a=0)=>void 0===n?t.forEach(e=>e.disconnect()):"number"==typeof n?Le(e,t,n).disconnect():ge(n)?void 0===r?t.forEach(e=>e.disconnect(n)):void 0===a?Le(e,t,r).disconnect(n,0):Le(e,t,r).disconnect(n,0,a):void 0===r?t.forEach(e=>e.disconnect(n)):Le(e,t,r).disconnect(n,0))(X),yr=new WeakMap,kr=((e,t)=>n=>t(e,n))(yr,L),wr=((e,t,n,r,a,o,i,s,l,c,u,d,A)=>(h,f,p,_)=>{if(0===_.numberOfInputs&&0===_.numberOfOutputs)throw l();const m=Array.isArray(_.outputChannelCount)?_.outputChannelCount:Array.from(_.outputChannelCount);if(m.some(e=>e<1))throw l();if(m.length!==_.numberOfOutputs)throw t();if("explicit"!==_.channelCountMode)throw l();const b=_.channelCount*_.numberOfInputs,g=m.reduce((e,t)=>e+t,0),v=void 0===p.parameterDescriptors?0:p.parameterDescriptors.length;if(b+v>6||g>6)throw l();const C=new MessageChannel,y=[],k=[];for(let e=0;e<_.numberOfInputs;e+=1)y.push(i(h,{channelCount:_.channelCount,channelCountMode:_.channelCountMode,channelInterpretation:_.channelInterpretation,gain:1})),k.push(a(h,{channelCount:_.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:_.channelCount}));const w=[];if(void 0!==p.parameterDescriptors)for(const{defaultValue:e,maxValue:t,minValue:n,name:r}of p.parameterDescriptors){const a=o(h,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:void 0!==_.parameterData[r]?_.parameterData[r]:void 0===e?0:e});Object.defineProperties(a.offset,{defaultValue:{get:()=>void 0===e?0:e},maxValue:{get:()=>void 0===t?Q:t},minValue:{get:()=>void 0===n?U:n}}),w.push(a)}const x=r(h,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,b+v)}),E=Qe(f,h.sampleRate),M=s(h,E,b+v,Math.max(1,g)),B=a(h,{channelCount:Math.max(1,g),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,g)}),T=[];for(let e=0;e<_.numberOfOutputs;e+=1)T.push(r(h,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:m[e]}));for(let e=0;e<_.numberOfInputs;e+=1){y[e].connect(k[e]);for(let t=0;t<_.channelCount;t+=1)k[e].connect(x,t,e*_.channelCount+t)}const R=new ke(void 0===p.parameterDescriptors?[]:p.parameterDescriptors.map(({name:e},t)=>{const n=w[t];return n.connect(x,0,b+t),n.start(0),[e,n.offset]}));x.connect(M);let I=_.channelInterpretation,O=null;const N=0===_.numberOfOutputs?[M]:T,L={get bufferSize(){return E},get channelCount(){return _.channelCount},set channelCount(e){throw n()},get channelCountMode(){return _.channelCountMode},set channelCountMode(e){throw n()},get channelInterpretation(){return I},set channelInterpretation(e){for(const t of y)t.channelInterpretation=e;I=e},get context(){return M.context},get inputs(){return y},get numberOfInputs(){return _.numberOfInputs},get numberOfOutputs(){return _.numberOfOutputs},get onprocessorerror(){return O},set onprocessorerror(e){"function"==typeof O&&L.removeEventListener("processorerror",O),O="function"==typeof e?e:null,"function"==typeof O&&L.addEventListener("processorerror",O)},get parameters(){return R},get port(){return C.port2},addEventListener:(...e)=>M.addEventListener(e[0],e[1],e[2]),connect:e.bind(null,N),disconnect:c.bind(null,N),dispatchEvent:(...e)=>M.dispatchEvent(e[0]),removeEventListener:(...e)=>M.removeEventListener(e[0],e[1],e[2])},D=new Map;var P,j;C.port1.addEventListener=(P=C.port1.addEventListener,(...e)=>{if("message"===e[0]){const t="function"==typeof e[1]?e[1]:"object"==typeof e[1]&&null!==e[1]&&"function"==typeof e[1].handleEvent?e[1].handleEvent:null;if(null!==t){const n=D.get(e[1]);void 0!==n?e[1]=n:(e[1]=e=>{u(h.currentTime,h.sampleRate,()=>t(e))},D.set(t,e[1]))}}return P.call(C.port1,e[0],e[1],e[2])}),C.port1.removeEventListener=(j=C.port1.removeEventListener,(...e)=>{if("message"===e[0]){const t=D.get(e[1]);void 0!==t&&(D.delete(e[1]),e[1]=t)}return j.call(C.port1,e[0],e[1],e[2])});let V=null;Object.defineProperty(C.port1,"onmessage",{get:()=>V,set:e=>{"function"==typeof V&&C.port1.removeEventListener("message",V),V="function"==typeof e?e:null,"function"==typeof V&&(C.port1.addEventListener("message",V),C.port1.start())}}),p.prototype.port=C.port1;let z=null;const F=((e,t,n,r)=>{let a=S.get(e);void 0===a&&(a=new WeakMap,S.set(e,a));const o=(async(e,t)=>{const n=await(e=>new Promise((t,n)=>{const{port1:r,port2:a}=new MessageChannel;r.onmessage=({data:e})=>{r.close(),a.close(),t(e)},r.onmessageerror=({data:e})=>{r.close(),a.close(),n(e)},a.postMessage(e)}))(t);return new e(n)})(n,r);return a.set(t,o),o})(h,L,p,_);F.then(e=>z=e);const q=Ee(_.numberOfInputs,_.channelCount),G=Ee(_.numberOfOutputs,m),H=void 0===p.parameterDescriptors?[]:p.parameterDescriptors.reduce((e,{name:t})=>({...e,[t]:new Float32Array(128)}),{});let Y=!0;const X=()=>{_.numberOfOutputs>0&&M.disconnect(B);for(let e=0,t=0;e<_.numberOfOutputs;e+=1){const n=T[e];for(let r=0;r<m[e];r+=1)B.disconnect(n,t+r,r);t+=m[e]}},W=new Map;M.onaudioprocess=({inputBuffer:e,outputBuffer:t})=>{if(null!==z){const n=d(L);for(let r=0;r<E;r+=128){for(let t=0;t<_.numberOfInputs;t+=1)for(let n=0;n<_.channelCount;n+=1)we(e,q[t],n,n,r);void 0!==p.parameterDescriptors&&p.parameterDescriptors.forEach(({name:t},n)=>{we(e,H,t,b+n,r)});for(let e=0;e<_.numberOfInputs;e+=1)for(let t=0;t<m[e];t+=1)0===G[e][t].byteLength&&(G[e][t]=new Float32Array(128));try{const e=q.map((e,t)=>{if(n[t].size>0)return W.set(t,E/128),e;const r=W.get(t);return void 0===r?[]:(e.every(e=>e.every(e=>0===e))&&(1===r?W.delete(t):W.set(t,r-1)),e)}),a=u(h.currentTime+r/h.sampleRate,h.sampleRate,()=>z.process(e,G,H));Y=a;for(let e=0,n=0;e<_.numberOfOutputs;e+=1){for(let a=0;a<m[e];a+=1)xe(t,G[e],a,n+a,r);n+=m[e]}}catch(e){Y=!1,L.dispatchEvent(new ErrorEvent("processorerror",{colno:e.colno,filename:e.filename,lineno:e.lineno,message:e.message}))}if(!Y){for(let e=0;e<_.numberOfInputs;e+=1){y[e].disconnect(k[e]);for(let t=0;t<_.channelCount;t+=1)k[r].disconnect(x,t,e*_.channelCount+t)}if(void 0!==p.parameterDescriptors){const e=p.parameterDescriptors.length;for(let t=0;t<e;t+=1){const e=w[t];e.disconnect(x,0,b+t),e.stop()}}x.disconnect(M),M.onaudioprocess=null,Z?X():$();break}}}};let Z=!1;const K=i(h,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),J=()=>M.connect(K).connect(h.destination),$=()=>{M.disconnect(K),K.disconnect()};return J(),A(L,()=>{if(Y){$(),_.numberOfOutputs>0&&M.connect(B);for(let e=0,t=0;e<_.numberOfOutputs;e+=1){const n=T[e];for(let r=0;r<m[e];r+=1)B.connect(n,t+r,r);t+=m[e]}}Z=!0},()=>{Y&&(J(),X()),Z=!1})})(gr,X,je,bn,Je,wn,tt,ot,it,Cr,ur,kr,_n),xr=(((e,t,n,r,a)=>{})(je,wr,tt,it,_n),((e,t,n,r,a,o,i,s,l,c,u,d,A,h,f,p)=>{})(an,gr,on,bn,Je,wn,tt,vr,Cr,ur,he,Yt,Pt,sn,Ot,jn),(e=>{})(dr),(e=>{})(yr),((e,t)=>(n,r,a)=>{if(null===t)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new t(n,r,a)}catch(t){if("SyntaxError"===t.name)throw e();throw t}})(it,Pt)),Er=((e,t,n,r,a,o,i,s)=>(l,c)=>n(l).render(l,c).then(()=>Promise.all(Array.from(r(c)).map(e=>n(e).render(e,c)))).then(()=>a(c)).then(n=>("function"!=typeof n.copyFromChannel?(i(n),W(n)):t(o,()=>o(n))||s(n),e.add(n),n)))(Ut,Mt,It,br,jn,Y,$t,en),Mr=((e,t,n,r,a)=>class extends e{constructor(e,n,a){let o;if("number"==typeof e&&void 0!==n&&void 0!==a)o={length:n,numberOfChannels:e,sampleRate:a};else{if("object"!=typeof e)throw new Error("The given parameters are not valid.");o=e}const{length:i,numberOfChannels:s,sampleRate:l}={...st,...o},c=r(s,i,l);t(Ge,()=>Ge(c))||c.addEventListener("statechange",(()=>{let e=0;const t=n=>{"running"===this._state&&(e>0?(c.removeEventListener("statechange",t),n.stopImmediatePropagation(),this._waitForThePromiseToSettle(n)):e+=1)};return t})()),super(c,s),this._length=i,this._nativeOfflineAudioContext=c,this._state=null}get length(){return void 0===this._nativeOfflineAudioContext.length?this._length:this._nativeOfflineAudioContext.length}get state(){return null===this._state?this._nativeOfflineAudioContext.state:this._state}startRendering(){return"running"===this._state?Promise.reject(n()):(this._state="running",a(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,te(this.destination,[])}))}_waitForThePromiseToSettle(e){null===this._state?this._nativeOfflineAudioContext.dispatchEvent(e):setTimeout(()=>this._waitForThePromiseToSettle(e))}})(_r,Mt,je,xr,Er),Br=(e,t,n)=>{const r=new Mr(e.numberOfChannels,Math.round(n*e.sampleRate),e.sampleRate),a=r.createBiquadFilter(),o=r.createBufferSource();return a.frequency.value=240,a.type="lowpass",o.buffer=e,o.connect(a).connect(r.destination),o.start(0,t,n),r.startRendering().then(e=>({channelData:e.getChannelData(0),sampleRate:e.sampleRate}))},Sr=(e=>{const t=(n=e,{...n,connect:({call:e})=>async()=>{const{port1:t,port2:n}=new MessageChannel,r=await e("connect",{port:t},[t]);return m.set(n,r),n},disconnect:({call:e})=>async t=>{const n=m.get(t);if(void 0===n)throw new Error("The given port is not connected.");await e("disconnect",{portId:n})},isSupported:({call:e})=>()=>e("isSupported")});var n;return e=>{const n=(e=>{if(b.has(e))return b.get(e);const t=new Map;return b.set(e,t),t})(e);e.addEventListener("message",({data:e})=>{const{id:t}=e;if(null!==t&&n.has(t)){const{reject:r,resolve:a}=n.get(t);n.delete(t),void 0===e.error?a(e.result):r(new Error(e.error.message))}}),(e=>"function"==typeof e.start)(e)&&e.start();const r=(t,r=null,a=[])=>new Promise((o,i)=>{const s=(0,_.generateUniqueNumber)(n);n.set(s,{reject:i,resolve:o}),null===r?e.postMessage({id:s,method:t},a):e.postMessage({id:s,method:t,params:r},a)}),a=(t,n,r=[])=>{e.postMessage({id:null,method:t,params:n},r)};let o={};for(const[e,n]of Object.entries(t))o={...o,[e]:n({call:r,notify:a})};return{...o}}})({analyze:({call:e})=>async(...t)=>{var n;const[r,a,o]=t,i="number"==typeof a?a:0,s="number"==typeof o?o:r.duration-i,{channelData:l,sampleRate:c}=await Br(r,i,s),u="object"==typeof a?a:"object"==typeof o?o:null!==(n=t[3])&&void 0!==n?n:null;return e("analyze",{channelData:l,sampleRate:c,...null===u?u:{tempoSettings:u}},[l.buffer])},guess:({call:e})=>async(...t)=>{var n;const[r,a,o]=t,i="number"==typeof a?a:0,s="number"==typeof o?o:r.duration-i,{channelData:l,sampleRate:c}=await Br(r,i,s),u="object"==typeof a?a:"object"==typeof o?o:null!==(n=t[3])&&void 0!==n?n:null;return e("guess",{channelData:l,sampleRate:c,...null===u?u:{tempoSettings:u}},[l.buffer])}}),Tr=(()=>{let e=null;return()=>{if(null!==e)return e;const t=new Blob(['(()=>{var e={455:function(e,t){!function(e){"use strict";var t=function(e){return function(t){var r=e(t);return t.add(r),r}},r=function(e){return function(t,r){return e.set(t,r),r}},n=void 0===Number.MAX_SAFE_INTEGER?9007199254740991:Number.MAX_SAFE_INTEGER,o=536870912,s=2*o,a=function(e,t){return function(r){var a=t.get(r),i=void 0===a?r.size:a<s?a+1:0;if(!r.has(i))return e(r,i);if(r.size<o){for(;r.has(i);)i=Math.floor(Math.random()*s);return e(r,i)}if(r.size>n)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;r.has(i);)i=Math.floor(Math.random()*n);return e(r,i)}},i=new WeakMap,c=r(i),u=a(c,i),l=t(u);e.addUniqueNumber=l,e.generateUniqueNumber=u}(t)}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var s=t[n]={exports:{}};return e[n].call(s.exports,s,s.exports,r),s.exports}(()=>{"use strict";const e=-32603,t=-32602,n=-32601,o=(e,t)=>Object.assign(new Error(e),{status:t}),s=t=>o(\'The handler of the method called "\'.concat(t,\'" returned an unexpected result.\'),e),a=(t,r)=>async({data:{id:a,method:i,params:c}})=>{const u=r[i];try{if(void 0===u)throw(e=>o(\'The requested method called "\'.concat(e,\'" is not supported.\'),n))(i);const r=void 0===c?u():u(c);if(void 0===r)throw(t=>o(\'The handler of the method called "\'.concat(t,\'" returned no required result.\'),e))(i);const l=r instanceof Promise?await r:r;if(null===a){if(void 0!==l.result)throw s(i)}else{if(void 0===l.result)throw s(i);const{result:e,transferables:r=[]}=l;t.postMessage({id:a,result:e},r)}}catch(e){const{message:r,status:n=-32603}=e;t.postMessage({error:{code:n,message:r},id:a})}};var i=r(455);const c=new Map,u=(e,r,n)=>({...r,connect:({port:t})=>{t.start();const n=e(t,r),o=(0,i.generateUniqueNumber)(c);return c.set(o,()=>{n(),t.close(),c.delete(o)}),{result:o}},disconnect:({portId:e})=>{const r=c.get(e);if(void 0===r)throw(e=>o(\'The specified parameter called "portId" with the given value "\'.concat(e,\'" does not identify a port connected to this worker.\'),t))(e);return r(),{result:null}},isSupported:async()=>{if(await new Promise(e=>{const t=new ArrayBuffer(0),{port1:r,port2:n}=new MessageChannel;r.onmessage=({data:t})=>e(null!==t),n.postMessage(t,[t])})){const e=n();return{result:e instanceof Promise?await e:e}}return{result:!1}}}),l=(e,t,r=()=>!0)=>{const n=u(l,t,r),o=a(e,n);return e.addEventListener("message",o),()=>e.removeEventListener("message",o)},h=(e,t,r)=>{const n=e.length,o=[];let s=!1;for(let a=0;a<n;a+=1)e[a]>t?s=!0:s&&(s=!1,o.push(a-1),a+=r/4-1);return s&&o.push(n-1),o},d=(e,t,r)=>{const n=(e=>{let t=0;const r=e.length;for(let n=0;n<r;n+=1)e[n]>t&&(t=e[n]);return t})(e),o=.3*n;let s=[],a=n-.05*n;if(n>.25)for(;s.length<30&&a>=o;)s=h(e,a,t),a-=.05*n;const i=(e=>{const t=[];return e.forEach((r,n)=>{const o=Math.min(e.length-n,10);for(let s=1;s<o;s+=1){const o=e[n+s]-r;t.some(e=>e.interval===o&&(e.peaks.push(r),!0))||t.push({interval:o,peaks:[r]})}}),t})(s),c=((e,t,r={})=>{var n,o;const s=Math.max(0,null!==(n=r.maxTempo)&&void 0!==n?n:180),a=Math.max(0,null!==(o=r.minTempo)&&void 0!==o?o:90),i=[];return e.forEach(e=>{let r=60/(e.interval/t);for(;r<a;)r*=2;for(;r>s;)r/=2;if(r<a)return;let n=!1,o=e.peaks.length;i.forEach(t=>{if(t.tempo===r&&(t.score+=e.peaks.length,t.peaks=[...t.peaks,...e.peaks],n=!0),t.tempo>r-.5&&t.tempo<r+.5){const n=2*Math.abs(t.tempo-r);o+=(1-n)*t.peaks.length,t.score+=(1-n)*e.peaks.length}}),n||i.push({peaks:e.peaks,score:o,tempo:r})}),i})(i,t,r);return c.sort((e,t)=>t.score-e.score),c},p=(e,t,r)=>{const n=d(e,t,r);if(0===n.length)throw new Error("The given channelData does not contain any detectable beats.");return n[0].tempo},f=(e,t,r)=>{const n=d(e,t,r);if(0===n.length)throw new Error("The given channelData does not contain any detectable beats.");const{peaks:o,tempo:s}=n[0],a=Math.round(s),i=60/a;o.sort((e,t)=>e-t);let c=o[0]/t;for(;c>i;)c-=i;return{bpm:a,offset:c,tempo:s}};l(self,{analyze:({channelData:e,sampleRate:t,tempoSettings:r})=>({result:p(e,t,r)}),guess:({channelData:e,sampleRate:t,tempoSettings:r})=>({result:f(e,t,r)})})})()})();'],{type:"application/javascript; charset=utf-8"}),n=URL.createObjectURL(t);return e=(e=>{const t=new Worker(e);return Sr(t)})(n),setTimeout(()=>URL.revokeObjectURL(n)),e}})();class Rr{constructor(){this.audioContext=new(window.AudioContext||window.webkitAudioContext);const e=()=>({sources:[],gainNode:this.audioContext.createGain(),eq:this.createEQ(),cueSplitter:this.audioContext.createGain(),crossfadeGain:this.audioContext.createGain(),track:null,playing:!1,isCued:!1,currentTrackIndex:-1,startTime:0,startOffset:0});this.channelA=e(),this.channelB=e(),this.masterGain=this.audioContext.createGain(),this.headphoneGain=this.audioContext.createGain(),this.masterCueGain=this.audioContext.createGain(),this.effects={delay:this.createDelay(),chorus:this.createChorus(),reverb:this.createReverb()},this.dryGain=this.audioContext.createGain(),this.chorusWetGain=this.audioContext.createGain(),this.reverbWetGain=this.audioContext.createGain(),this.delayWetGain=this.audioContext.createGain(),this.recordingNode=this.audioContext.createGain(),this.channelA.gainNode.connect(this.channelA.eq.low),this.channelA.eq.high.connect(this.channelA.cueSplitter),this.channelB.gainNode.connect(this.channelB.eq.low),this.channelB.eq.high.connect(this.channelB.cueSplitter),this.channelA.cueSplitter.connect(this.channelA.crossfadeGain),this.channelB.cueSplitter.connect(this.channelB.crossfadeGain),this.channelA.crossfadeGain.connect(this.dryGain),this.channelB.crossfadeGain.connect(this.dryGain),this.channelA.crossfadeGain.connect(this.effects.chorus),this.channelB.crossfadeGain.connect(this.effects.chorus),this.channelA.crossfadeGain.connect(this.effects.reverb),this.channelB.crossfadeGain.connect(this.effects.reverb),this.channelA.crossfadeGain.connect(this.effects.delay),this.channelB.crossfadeGain.connect(this.effects.delay),this.dryGain.connect(this.masterGain),this.effects.chorus.connect(this.chorusWetGain),this.chorusWetGain.connect(this.masterGain),this.effects.reverb.connect(this.reverbWetGain),this.reverbWetGain.connect(this.masterGain),this.effects.delay.connect(this.delayWetGain),this.delayWetGain.connect(this.masterGain),this.masterGain.connect(this.audioContext.destination),this.masterGain.connect(this.recordingNode),this.masterGain.connect(this.masterCueGain),this.masterCueGain.connect(this.headphoneGain),this.headphoneGain.connect(this.audioContext.destination),this.analyser=this.audioContext.createAnalyser(),this.masterGain.connect(this.analyser),this.masterGain.gain.value=.8,this.headphoneGain.gain.value=.8,this.setCrossfader(50),this.dryGain.gain.value=1,this.chorusWetGain.gain.value=0,this.reverbWetGain.gain.value=0,this.delayWetGain.gain.value=0}createEQ(){const e=this.audioContext.createBiquadFilter();e.type="lowshelf",e.frequency.value=320,e.gain.value=0;const t=this.audioContext.createBiquadFilter();t.type="peaking",t.frequency.value=1e3,t.Q.value=1,t.gain.value=0;const n=this.audioContext.createBiquadFilter();return n.type="highshelf",n.frequency.value=3200,n.gain.value=0,e.connect(t),t.connect(n),{low:e,mid:t,high:n}}createDelay(){const e=this.audioContext.createDelay(5);return e.delayTime.value=.5,e}createChorus(){const e=this.audioContext.createDelay();return e.delayTime.value=.03,e}createReverb(){const e=this.audioContext.createConvolver(),t=this.audioContext.sampleRate,n=this.audioContext.createBuffer(2,2*t,t),r=n.getChannelData(0),a=n.getChannelData(1);for(let e=0;e<n.length;e++)r[e]=(2*Math.random()-1)*Math.pow(1-e/n.length,5),a[e]=(2*Math.random()-1)*Math.pow(1-e/n.length,5);return e.buffer=n,e}async analyzeBPM(e){try{const t=await((...e)=>Tr().analyze(...e))(e);return Math.round(t)}catch(e){return console.error("BPM analysis failed:",e),null}}async loadTrack(e,t){try{const n=await t.arrayBuffer(),r=await this.audioContext.decodeAudioData(n);("a"===e?this.channelA:this.channelB).track=r;const a=await this.analyzeBPM(r);return{duration:r.duration,bpm:a}}catch(e){return console.error("Error loading track:",e),{duration:0,bpm:null}}}playTrack(e,t=null,n=0){const r="a"===e?this.channelA:this.channelB;if(null!==t&&(r.currentTrackIndex=t),this.stopTrack(e),!r.track)return!1;const a=this.audioContext.createBufferSource();return a.buffer=r.track,a.connect(r.gainNode),r.startOffset=n,r.startTime=this.audioContext.currentTime,a.start(0,n),r.playing=!0,r.sources.push(a),a.onended=()=>{if(r.sources=r.sources.filter(e=>e!==a),0===r.sources.length){r.playing=!1;const t=new CustomEvent("track-ended",{detail:{channel:e,trackIndex:r.currentTrackIndex}});document.dispatchEvent(t)}},!0}stopTrack(e){const t="a"===e?this.channelA:this.channelB;return t.sources.length>0&&(t.sources.forEach(e=>{e.stop(),e.disconnect()}),t.sources=[],t.playing=!1,t.startOffset=0,t.startTime=0,!0)}seekTrack(e,t){const n="a"===e?this.channelA:this.channelB;if(!n.track)return;const r=n.track.duration*(t/100);this.playTrack(e,n.currentTrackIndex,r)}getPlaybackTime(e){const t="a"===e?this.channelA:this.channelB;if(!t.track)return{currentTime:0,duration:0,remainingTime:0};const n=t.track.duration;let r=t.startOffset;return t.playing&&(r=t.startOffset+(this.audioContext.currentTime-t.startTime)),r=Math.min(r,n),{currentTime:r,duration:n,remainingTime:n-r}}setCrossfader(e){const t=e/100;this.channelA.crossfadeGain.gain.value=Math.cos(.5*t*Math.PI),this.channelB.crossfadeGain.gain.value=Math.cos(.5*(1-t)*Math.PI)}setTempo(e,t){("a"===e?this.channelA:this.channelB).sources.forEach(e=>{e.playbackRate.value=t/100})}setChannelVolume(e,t){("a"===e?this.channelA:this.channelB).gainNode.gain.setValueAtTime(t/100,this.audioContext.currentTime)}setChannelEQ(e,t,n,r){const a="a"===e?this.channelA:this.channelB,o=e=>.8*(e-50);a.eq.low.gain.setValueAtTime(o(t),this.audioContext.currentTime),a.eq.mid.gain.setValueAtTime(o(n),this.audioContext.currentTime),a.eq.high.gain.setValueAtTime(o(r),this.audioContext.currentTime)}setMasterVolume(e){this.masterGain.gain.value=e/100}setHeadphoneVolume(e){this.headphoneGain.gain.value=e/100}getRecordingDestination(){return this.recordingNode}playSample(e){const t=this.audioContext.createBufferSource();t.buffer=e,t.connect(this.masterGain),t.start(0)}setDelay(e){this.delayWetGain.gain.setValueAtTime(e/100,this.audioContext.currentTime)}setChorus(e){this.chorusWetGain.gain.setValueAtTime(e/100,this.audioContext.currentTime)}setReverb(e){this.reverbWetGain.gain.setValueAtTime(e/100,this.audioContext.currentTime)}setCueState(e,t){const n="a"===e?this.channelA:this.channelB;n.isCued=t;try{n.cueSplitter.disconnect(n.crossfadeGain)}catch(e){}try{n.cueSplitter.disconnect(this.headphoneGain)}catch(e){}t?n.cueSplitter.connect(this.headphoneGain):n.cueSplitter.connect(n.crossfadeGain)}setMasterCue(e){this.masterCueGain.gain.setValueAtTime(e?1:0,this.audioContext.currentTime)}}class Ir{constructor(e,t,n){this.buttonElement=e,this.pathElement=t,this.onFilesLoaded=n,this.buttonElement.addEventListener("click",()=>this.openFilePicker())}openFilePicker(){const e=document.createElement("input");e.type="file",e.multiple=!0,e.accept="audio/*",e.addEventListener("change",e=>{const t=e.target.files;if(t.length>0){const e=Array.from(t),n=e.map(e=>this.sanitize(e.name)).join(", ");this.pathElement.textContent=n,this.onFilesLoaded(e)}}),e.click()}sanitize(e){const t=document.createElement("div");return t.textContent=e,t.innerHTML}}var Or,Nr;(Nr=Or||(Or={}))[Nr.Init=0]="Init",Nr[Nr.Loading=1]="Loading",Nr[Nr.Loaded=2]="Loaded",Nr[Nr.Rendered=3]="Rendered",Nr[Nr.Error=4]="Error";var Lr,Dr,Pr,jr,Vr,zr,Fr,qr={},Gr=[],Hr=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function Yr(e,t){for(var n in t)e[n]=t[n];return e}function Xr(e){var t=e.parentNode;t&&t.removeChild(e)}function Wr(e,t,n,r,a){var o={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==a?++Pr:a};return null==a&&null!=Dr.vnode&&Dr.vnode(o),o}function Zr(e){return e.children}function Ur(e,t){this.props=e,this.context=t}function Qr(e,t){if(null==t)return e.__?Qr(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?Qr(e):null}function Kr(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return Kr(e)}}function Jr(e){(!e.__d&&(e.__d=!0)&&jr.push(e)&&!$r.__r++||Vr!==Dr.debounceRendering)&&((Vr=Dr.debounceRendering)||setTimeout)($r)}function $r(){for(var e;$r.__r=jr.length;)e=jr.sort(function(e,t){return e.__v.__b-t.__v.__b}),jr=[],e.some(function(e){var t,n,r,a,o,i;e.__d&&(o=(a=(t=e).__v).__e,(i=t.__P)&&(n=[],(r=Yr({},a)).__v=a.__v+1,sa(i,a,r,t.__n,void 0!==i.ownerSVGElement,null!=a.__h?[o]:null,n,null==o?Qr(a):o,a.__h),la(n,a),a.__e!=o&&Kr(a)))})}function ea(e,t,n,r,a,o,i,s,l,c){var u,d,A,h,f,p,_,m=r&&r.__k||Gr,b=m.length;for(n.__k=[],u=0;u<t.length;u++)if(null!=(h=n.__k[u]=null==(h=t[u])||"boolean"==typeof h?null:"string"==typeof h||"number"==typeof h||"bigint"==typeof h?Wr(null,h,null,null,h):Array.isArray(h)?Wr(Zr,{children:h},null,null,null):h.__b>0?Wr(h.type,h.props,h.key,h.ref?h.ref:null,h.__v):h)){if(h.__=n,h.__b=n.__b+1,null===(A=m[u])||A&&h.key==A.key&&h.type===A.type)m[u]=void 0;else for(d=0;d<b;d++){if((A=m[d])&&h.key==A.key&&h.type===A.type){m[d]=void 0;break}A=null}sa(e,h,A=A||qr,a,o,i,s,l,c),f=h.__e,(d=h.ref)&&A.ref!=d&&(_||(_=[]),A.ref&&_.push(A.ref,null,h),_.push(d,h.__c||f,h)),null!=f?(null==p&&(p=f),"function"==typeof h.type&&h.__k===A.__k?h.__d=l=ta(h,l,e):l=na(e,h,A,m,f,l),"function"==typeof n.type&&(n.__d=l)):l&&A.__e==l&&l.parentNode!=e&&(l=Qr(A))}for(n.__e=p,u=b;u--;)null!=m[u]&&da(m[u],m[u]);if(_)for(u=0;u<_.length;u++)ua(_[u],_[++u],_[++u])}function ta(e,t,n){for(var r,a=e.__k,o=0;a&&o<a.length;o++)(r=a[o])&&(r.__=e,t="function"==typeof r.type?ta(r,t,n):na(n,r,r,a,r.__e,t));return t}function na(e,t,n,r,a,o){var i,s,l;if(void 0!==t.__d)i=t.__d,t.__d=void 0;else if(null==n||a!=o||null==a.parentNode)e:if(null==o||o.parentNode!==e)e.appendChild(a),i=null;else{for(s=o,l=0;(s=s.nextSibling)&&l<r.length;l+=1)if(s==a)break e;e.insertBefore(a,o),i=o}return void 0!==i?i:a.nextSibling}function ra(e,t,n){"-"===t[0]?e.setProperty(t,n):e[t]=null==n?"":"number"!=typeof n||Hr.test(t)?n:n+"px"}function aa(e,t,n,r,a){var o;e:if("style"===t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof r&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||ra(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||ra(e.style,t,n[t])}else if("o"===t[0]&&"n"===t[1])o=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+o]=n,n?r||e.addEventListener(t,o?ia:oa,o):e.removeEventListener(t,o?ia:oa,o);else if("dangerouslySetInnerHTML"!==t){if(a)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("href"!==t&&"list"!==t&&"form"!==t&&"tabIndex"!==t&&"download"!==t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null==n||!1===n&&-1==t.indexOf("-")?e.removeAttribute(t):e.setAttribute(t,n))}}function oa(e){this.l[e.type+!1](Dr.event?Dr.event(e):e)}function ia(e){this.l[e.type+!0](Dr.event?Dr.event(e):e)}function sa(e,t,n,r,a,o,i,s,l){var c,u,d,A,h,f,p,_,m,b,g,v,C,y,k,w=t.type;if(void 0!==t.constructor)return null;null!=n.__h&&(l=n.__h,s=t.__e=n.__e,t.__h=null,o=[s]),(c=Dr.__b)&&c(t);try{e:if("function"==typeof w){if(_=t.props,m=(c=w.contextType)&&r[c.__c],b=c?m?m.props.value:c.__:r,n.__c?p=(u=t.__c=n.__c).__=u.__E:("prototype"in w&&w.prototype.render?t.__c=u=new w(_,b):(t.__c=u=new Ur(_,b),u.constructor=w,u.render=Aa),m&&m.sub(u),u.props=_,u.state||(u.state={}),u.context=b,u.__n=r,d=u.__d=!0,u.__h=[],u._sb=[]),null==u.__s&&(u.__s=u.state),null!=w.getDerivedStateFromProps&&(u.__s==u.state&&(u.__s=Yr({},u.__s)),Yr(u.__s,w.getDerivedStateFromProps(_,u.__s))),A=u.props,h=u.state,d)null==w.getDerivedStateFromProps&&null!=u.componentWillMount&&u.componentWillMount(),null!=u.componentDidMount&&u.__h.push(u.componentDidMount);else{if(null==w.getDerivedStateFromProps&&_!==A&&null!=u.componentWillReceiveProps&&u.componentWillReceiveProps(_,b),!u.__e&&null!=u.shouldComponentUpdate&&!1===u.shouldComponentUpdate(_,u.__s,b)||t.__v===n.__v){for(u.props=_,u.state=u.__s,t.__v!==n.__v&&(u.__d=!1),u.__v=t,t.__e=n.__e,t.__k=n.__k,t.__k.forEach(function(e){e&&(e.__=t)}),g=0;g<u._sb.length;g++)u.__h.push(u._sb[g]);u._sb=[],u.__h.length&&i.push(u);break e}null!=u.componentWillUpdate&&u.componentWillUpdate(_,u.__s,b),null!=u.componentDidUpdate&&u.__h.push(function(){u.componentDidUpdate(A,h,f)})}if(u.context=b,u.props=_,u.__v=t,u.__P=e,v=Dr.__r,C=0,"prototype"in w&&w.prototype.render){for(u.state=u.__s,u.__d=!1,v&&v(t),c=u.render(u.props,u.state,u.context),y=0;y<u._sb.length;y++)u.__h.push(u._sb[y]);u._sb=[]}else do{u.__d=!1,v&&v(t),c=u.render(u.props,u.state,u.context),u.state=u.__s}while(u.__d&&++C<25);u.state=u.__s,null!=u.getChildContext&&(r=Yr(Yr({},r),u.getChildContext())),d||null==u.getSnapshotBeforeUpdate||(f=u.getSnapshotBeforeUpdate(A,h)),k=null!=c&&c.type===Zr&&null==c.key?c.props.children:c,ea(e,Array.isArray(k)?k:[k],t,n,r,a,o,i,s,l),u.base=t.__e,t.__h=null,u.__h.length&&i.push(u),p&&(u.__E=u.__=null),u.__e=!1}else null==o&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=ca(n.__e,t,n,r,a,o,i,l);(c=Dr.diffed)&&c(t)}catch(e){t.__v=null,(l||null!=o)&&(t.__e=s,t.__h=!!l,o[o.indexOf(s)]=null),Dr.__e(e,t,n)}}function la(e,t){Dr.__c&&Dr.__c(t,e),e.some(function(t){try{e=t.__h,t.__h=[],e.some(function(e){e.call(t)})}catch(e){Dr.__e(e,t.__v)}})}function ca(e,t,n,r,a,o,i,s){var l,c,u,d=n.props,A=t.props,h=t.type,f=0;if("svg"===h&&(a=!0),null!=o)for(;f<o.length;f++)if((l=o[f])&&"setAttribute"in l==!!h&&(h?l.localName===h:3===l.nodeType)){e=l,o[f]=null;break}if(null==e){if(null===h)return document.createTextNode(A);e=a?document.createElementNS("http://www.w3.org/2000/svg",h):document.createElement(h,A.is&&A),o=null,s=!1}if(null===h)d===A||s&&e.data===A||(e.data=A);else{if(o=o&&Lr.call(e.childNodes),c=(d=n.props||qr).dangerouslySetInnerHTML,u=A.dangerouslySetInnerHTML,!s){if(null!=o)for(d={},f=0;f<e.attributes.length;f++)d[e.attributes[f].name]=e.attributes[f].value;(u||c)&&(u&&(c&&u.__html==c.__html||u.__html===e.innerHTML)||(e.innerHTML=u&&u.__html||""))}if(function(e,t,n,r,a){var o;for(o in n)"children"===o||"key"===o||o in t||aa(e,o,null,n[o],r);for(o in t)a&&"function"!=typeof t[o]||"children"===o||"key"===o||"value"===o||"checked"===o||n[o]===t[o]||aa(e,o,t[o],n[o],r)}(e,A,d,a,s),u)t.__k=[];else if(f=t.props.children,ea(e,Array.isArray(f)?f:[f],t,n,r,a&&"foreignObject"!==h,o,i,o?o[0]:n.__k&&Qr(n,0),s),null!=o)for(f=o.length;f--;)null!=o[f]&&Xr(o[f]);s||("value"in A&&void 0!==(f=A.value)&&(f!==e.value||"progress"===h&&!f||"option"===h&&f!==d.value)&&aa(e,"value",f,d.value,!1),"checked"in A&&void 0!==(f=A.checked)&&f!==e.checked&&aa(e,"checked",f,d.checked,!1))}return e}function ua(e,t,n){try{"function"==typeof e?e(t):e.current=t}catch(e){Dr.__e(e,n)}}function da(e,t,n){var r,a;if(Dr.unmount&&Dr.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||ua(r,null,t)),null!=(r=e.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(e){Dr.__e(e,t)}r.base=r.__P=null,e.__c=void 0}if(r=e.__k)for(a=0;a<r.length;a++)r[a]&&da(r[a],t,n||"function"!=typeof e.type);n||null==e.__e||Xr(e.__e),e.__=e.__e=e.__d=void 0}function Aa(e,t,n){return this.constructor(e,n)}Lr=Gr.slice,Dr={__e:function(e,t,n,r){for(var a,o,i;t=t.__;)if((a=t.__c)&&!a.__)try{if((o=a.constructor)&&null!=o.getDerivedStateFromError&&(a.setState(o.getDerivedStateFromError(e)),i=a.__d),null!=a.componentDidCatch&&(a.componentDidCatch(e,r||{}),i=a.__d),i)return a.__E=a}catch(t){e=t}throw e}},Pr=0,Ur.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=Yr({},this.state),"function"==typeof e&&(e=e(Yr({},n),this.props)),e&&Yr(n,e),null!=e&&this.__v&&(t&&this._sb.push(t),Jr(this))},Ur.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Jr(this))},Ur.prototype.render=Zr,jr=[],$r.__r=0,zr=0,function(e){e[e.Initiator=0]="Initiator",e[e.ServerFilter=1]="ServerFilter",e[e.ServerSort=2]="ServerSort",e[e.ServerLimit=3]="ServerLimit",e[e.Extractor=4]="Extractor",e[e.Transformer=5]="Transformer",e[e.Filter=6]="Filter",e[e.Sort=7]="Sort",e[e.Limit=8]="Limit"}(Fr||(Fr={}));var ha,fa,pa,_a=[],ma=[],ba=Dr.__b,ga=Dr.__r,va=Dr.diffed,Ca=Dr.__c,ya=Dr.unmount;function ka(){for(var e;e=_a.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(Sa),e.__H.__h.forEach(Ta),e.__H.__h=[]}catch(t){e.__H.__h=[],Dr.__e(t,e.__v)}}Dr.__b=function(e){ha=null,ba&&ba(e)},Dr.__r=function(e){ga&&ga(e);var t=(ha=e.__c).__H;t&&(fa===ha?(t.__h=[],ha.__h=[],t.__.forEach(function(e){e.__N&&(e.__=e.__N),e.__V=ma,e.__N=e.i=void 0})):(t.__h.forEach(Sa),t.__h.forEach(Ta),t.__h=[])),fa=ha},Dr.diffed=function(e){va&&va(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(1!==_a.push(t)&&pa===Dr.requestAnimationFrame||((pa=Dr.requestAnimationFrame)||Ba)(ka)),t.__H.__.forEach(function(e){e.i&&(e.__H=e.i),e.__V!==ma&&(e.__=e.__V),e.i=void 0,e.__V=ma})),fa=ha=null},Dr.__c=function(e,t){t.some(function(e){try{e.__h.forEach(Sa),e.__h=e.__h.filter(function(e){return!e.__||Ta(e)})}catch(n){t.some(function(e){e.__h&&(e.__h=[])}),t=[],Dr.__e(n,e.__v)}}),Ca&&Ca(e,t)},Dr.unmount=function(e){ya&&ya(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(e){try{Sa(e)}catch(e){t=e}}),n.__H=void 0,t&&Dr.__e(t,n.__v))};var wa,xa,Ea,Ma="function"==typeof requestAnimationFrame;function Ba(e){var t,n=function(){clearTimeout(r),Ma&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,100);Ma&&(t=requestAnimationFrame(n))}function Sa(e){var t=ha,n=e.__c;"function"==typeof n&&(e.__c=void 0,n()),ha=t}function Ta(e){var t=ha;e.__c=e.__(),ha=t}new(function(){function e(){}var t=e.prototype;return t.format=function(e,t){return"[Grid.js] ["+t.toUpperCase()+"]: "+e},t.error=function(e,t){void 0===t&&(t=!1);var n=this.format(e,"error");if(t)throw Error(n);console.error(n)},t.warn=function(e){console.warn(this.format(e,"warn"))},t.info=function(e){console.info(this.format(e,"info"))},e}()),function(e){e[e.Header=0]="Header",e[e.Footer=1]="Footer",e[e.Cell=2]="Cell"}(wa||(wa={})),"undefined"!=typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),Ea={__c:xa="__cC"+zr++,__:null,Consumer:function(e,t){return e.children(t)},Provider:function(e){var t,n;return this.getChildContext||(t=[],(n={})[xa]=this,this.getChildContext=function(){return n},this.shouldComponentUpdate=function(e){this.props.value!==e.value&&t.some(Jr)},this.sub=function(e){t.push(e);var n=e.componentWillUnmount;e.componentWillUnmount=function(){t.splice(t.indexOf(e),1),n&&n.call(e)}}),e.children}},Ea.Provider.__=Ea.Consumer.contextType=Ea;var Ra=n(711),Ia={};Ia.styleTagTransform=h(),Ia.setAttributes=c(),Ia.insert=s().bind(null,"head"),Ia.domAPI=o(),Ia.insertStyleElement=d(),r()(Ra.A,Ia),Ra.A&&Ra.A.locals&&Ra.A.locals;class Oa{constructor(e,t){this.container=e,this.onTrackSelect=t,this.grid=null,this.files=[]}render(e){this.container.innerHTML="",e.forEach((e,t)=>{const n=document.createElement("li");n.className="track-item",n.innerHTML=`<span class="track-name">${e.name}</span>`,n.addEventListener("click",()=>this.selectTrack(t,e)),this.container.appendChild(n)})}selectTrack(e,t){this.container.querySelectorAll(".track-item").forEach(e=>{e.classList.remove("selected")});const n=this.container.children[e];n&&n.classList.add("selected"),this.onTrackSelect(t,e)}}var Na={};function La(e){return new Int16Array(e)}function Da(e){return new Int32Array(e)}function Pa(e){return new Float32Array(e)}var ja={arraycopy:function(e,t,n,r,a){for(var o=t+a;t<o;)n[r++]=e[t++]},out:{}};ja.out.println=function(e){console.log(e)},ja.out.printf=function(){console.log.apply(console,arguments)};var Va={};function za(e){this.ordinal=e}Va.SQRT2=1.4142135623730951,Va.FAST_LOG10=function(e){return Math.log10(e)},Va.FAST_LOG10_X=function(e,t){return Math.log10(e)*t},za.short_block_allowed=new za(0),za.short_block_coupled=new za(1),za.short_block_dispensed=new za(2),za.short_block_forced=new za(3);var Fa={};function qa(e){this.ordinal=e}Fa.MAX_VALUE=34028235e31,qa.vbr_off=new qa(0),qa.vbr_mt=new qa(1),qa.vbr_rh=new qa(2),qa.vbr_abr=new qa(3),qa.vbr_mtrh=new qa(4),qa.vbr_default=qa.vbr_mtrh;var Ga,Ha,Ya,Xa,Wa,Za,Ua={System:ja,VbrMode:qa,Float:Fa,ShortBlock:za,Util:Va,Arrays:{fill:function(e,t,n,r){if(2==arguments.length)for(var a=0;a<e.length;a++)e[a]=arguments[1];else for(a=t;a<n;a++)e[a]=r}},new_array_n:function e(t){if(1==t.length)return new Array(t[0]);var n=t[0];t=t.slice(1);for(var r=[],a=0;a<n;a++)r.push(e(t));return r},new_byte:function(e){return new Int8Array(e)},new_double:function(e){return new Float64Array(e)},new_float:Pa,new_float_n:function e(t){if(1==t.length)return Pa(t[0]);var n=t[0];t=t.slice(1);for(var r=[],a=0;a<n;a++)r.push(e(t));return r},new_int:Da,new_int_n:function e(t){if(1==t.length)return Da(t[0]);var n=t[0];t=t.slice(1);for(var r=[],a=0;a<n;a++)r.push(e(t));return r},new_short:La,new_short_n:function e(t){if(1==t.length)return La(t[0]);var n=t[0];t=t.slice(1);for(var r=[],a=0;a<n;a++)r.push(e(t));return r},assert:function(e){}};function Qa(){if(Xa)return Ya;Xa=1;var e=to(),t=Ua.System,n=Ua.new_float,r=Ua.new_float_n;return Ya=function(){this.l=n(e.SBMAX_l),this.s=r([e.SBMAX_s,3]);var a=this;this.assign=function(n){t.arraycopy(n.l,0,a.l,0,e.SBMAX_l);for(var r=0;r<e.SBMAX_s;r++)for(var o=0;o<3;o++)a.s[r][o]=n.s[r][o]}},Ya}function Ka(e){var t=e;this.ordinal=function(){return t}}Ka.STEREO=new Ka(0),Ka.JOINT_STEREO=new Ka(1),Ka.DUAL_CHANNEL=new Ka(2),Ka.MONO=new Ka(3),Ka.NOT_SET=new Ka(4);var Ja,$a,eo=Ka;function to(){if($a)return Ja;$a=1;var e=Ua.System,t=Ua.VbrMode,n=Ua.new_array_n,r=Ua.new_float,a=Ua.new_float_n,o=Ua.new_int,i=Ua.assert;function s(){var l=function(){if(Ha)return Ga;Ha=1;var e=Ua.System,t=Ua.Util,n=Ua.Arrays,r=Ua.new_float,a=to();return Ga=function(){var o=[-.1482523854003001,32.308141959636465,296.40344946382766,883.1344870032432,11113.947376231741,1057.2713659324597,305.7402417275812,30.825928907280012,3.8533188138216365,59.42900443849514,709.5899960123345,5281.91112291017,-5829.66483675846,-817.6293103748613,-76.91656988279972,-4.594269939176596,.9063471690191471,.1960342806591213,-.15466694054279598,34.324387823855965,301.8067566458425,817.599602898885,11573.795901679885,1181.2520595540152,321.59731579894424,31.232021761053772,3.7107095756221318,53.650946155329365,684.167428119626,5224.56624370173,-6366.391851890084,-908.9766368219582,-89.83068876699639,-5.411397422890401,.8206787908286602,.3901806440322567,-.16070888947830023,36.147034243915876,304.11815768187864,732.7429163887613,11989.60988270091,1300.012278487897,335.28490093152146,31.48816102859945,3.373875931311736,47.232241542899175,652.7371796173471,5132.414255594984,-6909.087078780055,-1001.9990371107289,-103.62185754286375,-6.104916304710272,.7416505462720353,.5805693545089249,-.16636367662261495,37.751650073343995,303.01103387567713,627.9747488785183,12358.763425278165,1412.2779918482834,346.7496836825721,31.598286663170416,3.1598635433980946,40.57878626349686,616.1671130880391,5007.833007176154,-7454.040671756168,-1095.7960341867115,-118.24411666465777,-6.818469345853504,.6681786379192989,.7653668647301797,-.1716176790982088,39.11551877123304,298.3413246578966,503.5259106886539,12679.589408408976,1516.5821921214542,355.9850766329023,31.395241710249053,2.9164211881972335,33.79716964664243,574.8943997801362,4853.234992253242,-7997.57021486075,-1189.7624067269965,-133.6444792601766,-7.7202770609839915,.5993769336819237,.9427934736519954,-.17645823955292173,40.21879108166477,289.9982036694474,359.3226160751053,12950.259102786438,1612.1013903507662,362.85067106591504,31.045922092242872,2.822222032597987,26.988862316190684,529.8996541764288,4671.371946949588,-8535.899136645805,-1282.5898586244496,-149.58553632943463,-8.643494270763135,.5345111359507916,1.111140466039205,-.36174739330527045,41.04429910497807,277.5463268268618,195.6386023135583,13169.43812144731,1697.6433561479398,367.40983966190305,30.557037410382826,2.531473372857427,20.070154905927314,481.50208566532336,4464.970341588308,-9065.36882077239,-1373.62841526722,-166.1660487028118,-9.58289321133207,.4729647758913199,1.268786568327291,-.36970682634889585,41.393213350082036,261.2935935556502,12.935476055240873,13336.131683328815,1772.508612059496,369.76534388639965,29.751323653701338,2.4023193045459172,13.304795348228817,430.5615775526625,4237.0568611071185,-9581.931701634761,-1461.6913552409758,-183.12733958476446,-10.718010163869403,.41421356237309503,1.414213562373095,-.37677560326535325,41.619486213528496,241.05423794991074,-187.94665032361226,13450.063605744153,1836.153896465782,369.4908799925761,29.001847876923147,2.0714759319987186,6.779591200894186,377.7767837205709,3990.386575512536,-10081.709459700915,-1545.947424837898,-200.3762958015653,-11.864482073055006,.3578057213145241,1.546020906725474,-.3829366947518991,41.1516456456653,216.47684307105183,-406.1569483347166,13511.136535077321,1887.8076599260432,367.3025214564151,28.136213436723654,1.913880671464418,.3829366947518991,323.85365704338597,3728.1472257487526,-10561.233882199509,-1625.2025997821418,-217.62525175416,-13.015432208941645,.3033466836073424,1.66293922460509,-.5822628872992417,40.35639251440489,188.20071124269245,-640.2706748618148,13519.21490106562,1927.6022433578062,362.8197642637487,26.968821921868447,1.7463817695935329,-5.62650678237171,269.3016715297017,3453.386536448852,-11016.145278780888,-1698.6569643425091,-234.7658734267683,-14.16351421663124,.2504869601913055,1.76384252869671,-.5887180101749253,39.23429103868072,155.76096234403798,-889.2492977967378,13475.470561874661,1955.0535223723712,356.4450994756727,25.894952980042156,1.5695032905781554,-11.181939564328772,214.80884394039484,3169.1640829158237,-11443.321309975563,-1765.1588461316153,-251.68908574481912,-15.49755935939164,.198912367379658,1.847759065022573,-.7912582233652842,37.39369355329111,119.699486012458,-1151.0956593239027,13380.446257078214,1970.3952110853447,348.01959814116185,24.731487364283044,1.3850130831637748,-16.421408865300393,161.05030052864092,2878.3322807850063,-11838.991423510031,-1823.985884688674,-268.2854986386903,-16.81724543849939,.1483359875383474,1.913880671464418,-.7960642926861912,35.2322109610459,80.01928065061526,-1424.0212633405113,13235.794061869668,1973.804052543835,337.9908651258184,23.289159354463873,1.3934255946442087,-21.099669467133474,108.48348407242611,2583.700758091299,-12199.726194855148,-1874.2780658979746,-284.2467154529415,-18.11369784385905,.09849140335716425,1.961570560806461,-.998795456205172,32.56307803611191,36.958364584370486,-1706.075448829146,13043.287458812016,1965.3831106103316,326.43182772364605,22.175018750622293,1.198638339011324,-25.371248002043963,57.53505923036915,2288.41886619975,-12522.674544337233,-1914.8400385312243,-299.26241273417224,-19.37805630698734,.04912684976946725,1.990369453344394,.035780907*t.SQRT2*.5/2384e-9,.017876148*t.SQRT2*.5/2384e-9,.003134727*t.SQRT2*.5/2384e-9,.002457142*t.SQRT2*.5/2384e-9,971317e-9*t.SQRT2*.5/2384e-9,218868e-9*t.SQRT2*.5/2384e-9,101566e-9*t.SQRT2*.5/2384e-9,13828e-9*t.SQRT2*.5/2384e-9,12804.797818791945,1945.5515939597317,313.4244966442953,20.801593959731544,1995.1556208053692,9.000838926174497,-29.20218120805369],i=[[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,940084909404969e-27,6423305872147839e-28,2382191739347918e-28,5456116108943412e-27,4878985199565852e-27,4240448995017367e-27,3559909094758252e-27,2858043359288075e-27,2156177623817898e-27,1475637723558783e-27,8371015190102974e-28,2599706096327376e-28,-5456116108943412e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758252e-27,-2858043359288076e-27,-2156177623817898e-27,-1475637723558783e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347923e-28,-6423305872147843e-28,-9400849094049696e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049694e-28,-642330587214784e-27,-2382191739347918e-28],[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,9400849094049688e-28,6423305872147841e-28,2382191739347918e-28,5456116108943413e-27,4878985199565852e-27,4240448995017367e-27,3559909094758253e-27,2858043359288075e-27,2156177623817898e-27,1475637723558782e-27,8371015190102975e-28,2599706096327376e-28,-5461314069809755e-27,-4921085770524055e-27,-4343405037091838e-27,-3732668368707687e-27,-3093523840190885e-27,-2430835727329465e-27,-1734679010007751e-27,-974825365660928e-27,-2797435120168326e-28,0,0,0,0,0,0,-2283748241799531e-28,-4037858874020686e-28,-2146547464825323e-28],[.1316524975873958,.414213562373095,.7673269879789602,1.091308501069271,1.303225372841206,1.56968557711749,1.920982126971166,2.414213562373094,3.171594802363212,4.510708503662055,7.595754112725146,22.90376554843115,.984807753012208,.6427876096865394,.3420201433256688,.9396926207859084,-.1736481776669303,-.7660444431189779,.8660254037844387,.5,-.5144957554275265,-.4717319685649723,-.3133774542039019,-.1819131996109812,-.09457419252642064,-.04096558288530405,-.01419856857247115,-.003699974673760037,.8574929257125442,.8817419973177052,.9496286491027329,.9833145924917901,.9955178160675857,.9991605581781475,.999899195244447,.9999931550702802],[0,0,0,0,0,0,2283748241799531e-28,4037858874020686e-28,2146547464825323e-28,5461314069809755e-27,4921085770524055e-27,4343405037091838e-27,3732668368707687e-27,3093523840190885e-27,2430835727329466e-27,1734679010007751e-27,974825365660928e-27,2797435120168326e-28,-5456116108943413e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758253e-27,-2858043359288075e-27,-2156177623817898e-27,-1475637723558782e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347913e-28,-6423305872147834e-28,-9400849094049688e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049688e-28,-6423305872147841e-28,-2382191739347918e-28]],s=i[a.SHORT_TYPE],l=i[a.SHORT_TYPE],c=i[a.SHORT_TYPE],u=i[a.SHORT_TYPE],d=[0,1,16,17,8,9,24,25,4,5,20,21,12,13,28,29,2,3,18,19,10,11,26,27,6,7,22,23,14,15,30,31];function A(e,n,r){for(var a=10,i=n+238-14-286,s=-15;s<0;s++){var l;l=o[a+-10],c=e[i+-224]*l,u=e[n+224]*l,l=o[a+-9],c+=e[i+-160]*l,u+=e[n+160]*l,l=o[a+-8],c+=e[i+-96]*l,u+=e[n+96]*l,l=o[a+-7],c+=e[i+-32]*l,u+=e[n+32]*l,l=o[a+-6],c+=e[i+32]*l,u+=e[n+-32]*l,l=o[a+-5],c+=e[i+96]*l,u+=e[n+-96]*l,l=o[a+-4],c+=e[i+160]*l,u+=e[n+-160]*l,l=o[a+-3],c+=e[i+224]*l,u+=e[n+-224]*l,l=o[a+-2],c+=e[n+-256]*l,u-=e[i+256]*l,l=o[a+-1],c+=e[n+-192]*l,u-=e[i+192]*l,l=o[a+0],c+=e[n+-128]*l,u-=e[i+128]*l,l=o[a+1],c+=e[n+-64]*l,u-=e[i+64]*l,l=o[a+2],c+=e[n+0]*l,u-=e[i+0]*l,l=o[a+3],c+=e[n+64]*l,u-=e[i+-64]*l,l=o[a+4],c+=e[n+128]*l,u-=e[i+-128]*l,l=o[a+5],c+=e[n+192]*l,l=(u-=e[i+-192]*l)-(c*=o[a+6]),r[30+2*s]=u+c,r[31+2*s]=o[a+7]*l,a+=18,n--,i++}var c,u,d,A,h;u=e[n+-16]*o[a+-10],c=e[n+-32]*o[a+-2],u+=(e[n+-48]-e[n+16])*o[a+-9],c+=e[n+-96]*o[a+-1],u+=(e[n+-80]+e[n+48])*o[a+-8],c+=e[n+-160]*o[a+0],u+=(e[n+-112]-e[n+80])*o[a+-7],c+=e[n+-224]*o[a+1],u+=(e[n+-144]+e[n+112])*o[a+-6],c-=e[n+32]*o[a+2],u+=(e[n+-176]-e[n+144])*o[a+-5],c-=e[n+96]*o[a+3],u+=(e[n+-208]+e[n+176])*o[a+-4],c-=e[n+160]*o[a+4],u+=(e[n+-240]-e[n+208])*o[a+-3],d=(c-=e[n+224])-u,A=c+u,u=r[14],c=r[15]-u,r[31]=A+u,r[30]=d+c,r[15]=d-c,r[14]=A-u,h=r[28]-r[0],r[0]+=r[28],r[28]=h*o[a+-36+7],h=r[29]-r[1],r[1]+=r[29],r[29]=h*o[a+-36+7],h=r[26]-r[2],r[2]+=r[26],r[26]=h*o[a+-72+7],h=r[27]-r[3],r[3]+=r[27],r[27]=h*o[a+-72+7],h=r[24]-r[4],r[4]+=r[24],r[24]=h*o[a+-108+7],h=r[25]-r[5],r[5]+=r[25],r[25]=h*o[a+-108+7],h=r[22]-r[6],r[6]+=r[22],r[22]=h*t.SQRT2,h=r[23]-r[7],r[7]+=r[23],r[23]=h*t.SQRT2-r[7],r[7]-=r[6],r[22]-=r[7],r[23]-=r[22],h=r[6],r[6]=r[31]-h,r[31]=r[31]+h,h=r[7],r[7]=r[30]-h,r[30]=r[30]+h,h=r[22],r[22]=r[15]-h,r[15]=r[15]+h,h=r[23],r[23]=r[14]-h,r[14]=r[14]+h,h=r[20]-r[8],r[8]+=r[20],r[20]=h*o[a+-180+7],h=r[21]-r[9],r[9]+=r[21],r[21]=h*o[a+-180+7],h=r[18]-r[10],r[10]+=r[18],r[18]=h*o[a+-216+7],h=r[19]-r[11],r[11]+=r[19],r[19]=h*o[a+-216+7],h=r[16]-r[12],r[12]+=r[16],r[16]=h*o[a+-252+7],h=r[17]-r[13],r[13]+=r[17],r[17]=h*o[a+-252+7],h=-r[20]+r[24],r[20]+=r[24],r[24]=h*o[a+-216+7],h=-r[21]+r[25],r[21]+=r[25],r[25]=h*o[a+-216+7],h=r[4]-r[8],r[4]+=r[8],r[8]=h*o[a+-216+7],h=r[5]-r[9],r[5]+=r[9],r[9]=h*o[a+-216+7],h=r[0]-r[12],r[0]+=r[12],r[12]=h*o[a+-72+7],h=r[1]-r[13],r[1]+=r[13],r[13]=h*o[a+-72+7],h=r[16]-r[28],r[16]+=r[28],r[28]=h*o[a+-72+7],h=-r[17]+r[29],r[17]+=r[29],r[29]=h*o[a+-72+7],h=t.SQRT2*(r[2]-r[10]),r[2]+=r[10],r[10]=h,h=t.SQRT2*(r[3]-r[11]),r[3]+=r[11],r[11]=h,h=t.SQRT2*(-r[18]+r[26]),r[18]+=r[26],r[26]=h-r[18],h=t.SQRT2*(-r[19]+r[27]),r[19]+=r[27],r[27]=h-r[19],h=r[2],r[19]-=r[3],r[3]-=h,r[2]=r[31]-h,r[31]+=h,h=r[3],r[11]-=r[19],r[18]-=h,r[3]=r[30]-h,r[30]+=h,h=r[18],r[27]-=r[11],r[19]-=h,r[18]=r[15]-h,r[15]+=h,h=r[19],r[10]-=h,r[19]=r[14]-h,r[14]+=h,h=r[10],r[11]-=h,r[10]=r[23]-h,r[23]+=h,h=r[11],r[26]-=h,r[11]=r[22]-h,r[22]+=h,h=r[26],r[27]-=h,r[26]=r[7]-h,r[7]+=h,h=r[27],r[27]=r[6]-h,r[6]+=h,h=t.SQRT2*(r[0]-r[4]),r[0]+=r[4],r[4]=h,h=t.SQRT2*(r[1]-r[5]),r[1]+=r[5],r[5]=h,h=t.SQRT2*(r[16]-r[20]),r[16]+=r[20],r[20]=h,h=t.SQRT2*(r[17]-r[21]),r[17]+=r[21],r[21]=h,h=-t.SQRT2*(r[8]-r[12]),r[8]+=r[12],r[12]=h-r[8],h=-t.SQRT2*(r[9]-r[13]),r[9]+=r[13],r[13]=h-r[9],h=-t.SQRT2*(r[25]-r[29]),r[25]+=r[29],r[29]=h-r[25],h=-t.SQRT2*(r[24]+r[28]),r[24]-=r[28],r[28]=h-r[24],h=r[24]-r[16],r[24]=h,h=r[20]-h,r[20]=h,h=r[28]-h,r[28]=h,h=r[25]-r[17],r[25]=h,h=r[21]-h,r[21]=h,h=r[29]-h,r[29]=h,h=r[17]-r[1],r[17]=h,h=r[9]-h,r[9]=h,h=r[25]-h,r[25]=h,h=r[5]-h,r[5]=h,h=r[21]-h,r[21]=h,h=r[13]-h,r[13]=h,h=r[29]-h,r[29]=h,h=r[1]-r[0],r[1]=h,h=r[16]-h,r[16]=h,h=r[17]-h,r[17]=h,h=r[8]-h,r[8]=h,h=r[9]-h,r[9]=h,h=r[24]-h,r[24]=h,h=r[25]-h,r[25]=h,h=r[4]-h,r[4]=h,h=r[5]-h,r[5]=h,h=r[20]-h,r[20]=h,h=r[21]-h,r[21]=h,h=r[12]-h,r[12]=h,h=r[13]-h,r[13]=h,h=r[28]-h,r[28]=h,h=r[29]-h,r[29]=h,h=r[0],r[0]+=r[31],r[31]-=h,h=r[1],r[1]+=r[30],r[30]-=h,h=r[16],r[16]+=r[15],r[15]-=h,h=r[17],r[17]+=r[14],r[14]-=h,h=r[8],r[8]+=r[23],r[23]-=h,h=r[9],r[9]+=r[22],r[22]-=h,h=r[24],r[24]+=r[7],r[7]-=h,h=r[25],r[25]+=r[6],r[6]-=h,h=r[4],r[4]+=r[27],r[27]-=h,h=r[5],r[5]+=r[26],r[26]-=h,h=r[20],r[20]+=r[11],r[11]-=h,h=r[21],r[21]+=r[10],r[10]-=h,h=r[12],r[12]+=r[19],r[19]-=h,h=r[13],r[13]+=r[18],r[18]-=h,h=r[28],r[28]+=r[3],r[3]-=h,h=r[29],r[29]+=r[2],r[2]-=h}function h(e,t){for(var n=0;n<3;n++){var r,o,s,l,c,u;o=(l=e[t+6]*i[a.SHORT_TYPE][0]-e[t+15])+(r=e[t+0]*i[a.SHORT_TYPE][2]-e[t+9]),s=l-r,c=(l=e[t+15]*i[a.SHORT_TYPE][0]+e[t+6])+(r=e[t+9]*i[a.SHORT_TYPE][2]+e[t+0]),u=-l+r,r=2069978111953089e-26*(e[t+3]*i[a.SHORT_TYPE][1]-e[t+12]),l=2069978111953089e-26*(e[t+12]*i[a.SHORT_TYPE][1]+e[t+3]),e[t+0]=190752519173728e-25*o+r,e[t+15]=190752519173728e-25*-c+l,s=.8660254037844387*s*1907525191737281e-26,c=.5*c*1907525191737281e-26+l,e[t+3]=s-c,e[t+6]=s+c,o=.5*o*1907525191737281e-26-r,u=.8660254037844387*u*1907525191737281e-26,e[t+9]=o+u,e[t+12]=o-u,t++}}function f(e,t,n){var r,a,o,i,s,c,u,d,A,h,f,p,_,m,b,g,v,C;o=n[17]-n[9],s=n[15]-n[11],c=n[14]-n[12],u=n[0]+n[8],d=n[1]+n[7],A=n[2]+n[6],h=n[3]+n[5],e[t+17]=u+A-h-(d-n[4]),a=(u+A-h)*l[19]+(d-n[4]),r=(o-s-c)*l[18],e[t+5]=r+a,e[t+6]=r-a,i=(n[16]-n[10])*l[18],d=d*l[19]+n[4],r=o*l[12]+i+s*l[13]+c*l[14],a=-u*l[16]+d-A*l[17]+h*l[15],e[t+1]=r+a,e[t+2]=r-a,r=o*l[13]-i-s*l[14]+c*l[12],a=-u*l[17]+d-A*l[15]+h*l[16],e[t+9]=r+a,e[t+10]=r-a,r=o*l[14]-i+s*l[12]-c*l[13],a=u*l[15]-d+A*l[16]-h*l[17],e[t+13]=r+a,e[t+14]=r-a,f=n[8]-n[0],_=n[6]-n[2],m=n[5]-n[3],b=n[17]+n[9],g=n[16]+n[10],v=n[15]+n[11],C=n[14]+n[12],e[t+0]=b+v+C+(g+n[13]),r=(b+v+C)*l[19]-(g+n[13]),a=(f-_+m)*l[18],e[t+11]=r+a,e[t+12]=r-a,p=(n[7]-n[1])*l[18],g=n[13]-g*l[19],r=b*l[15]-g+v*l[16]+C*l[17],a=f*l[14]+p+_*l[12]+m*l[13],e[t+3]=r+a,e[t+4]=r-a,r=-b*l[17]+g-v*l[15]-C*l[16],a=f*l[13]+p-_*l[14]-m*l[12],e[t+7]=r+a,e[t+8]=r-a,r=-b*l[16]+g-v*l[17]-C*l[15],a=f*l[12]-p+_*l[13]-m*l[14],e[t+15]=r+a,e[t+16]=r-a}this.mdct_sub48=function(t,o,l){for(var p=o,_=286,m=0;m<t.channels_out;m++){for(var b=0;b<t.mode_gr;b++){for(var g,v=t.l3_side.tt[b][m],C=v.xr,y=0,k=t.sb_sample[m][1-b],w=0,x=0;x<9;x++)for(A(p,_,k[w]),A(p,_+32,k[w+1]),w+=2,_+=64,g=1;g<32;g+=2)k[w-1][g]*=-1;for(g=0;g<32;g++,y+=18){var E=v.block_type,M=t.sb_sample[m][b],B=t.sb_sample[m][1-b];if(0!=v.mixed_block_flag&&g<2&&(E=0),t.amp_filter[g]<1e-12)n.fill(C,y+0,y+18,0);else{if(t.amp_filter[g]<1)for(x=0;x<18;x++)B[x][d[g]]*=t.amp_filter[g];if(E==a.SHORT_TYPE){for(x=-3;x<0;x++){var S=i[a.SHORT_TYPE][x+3];C[y+3*x+9]=M[9+x][d[g]]*S-M[8-x][d[g]],C[y+3*x+18]=M[14-x][d[g]]*S+M[15+x][d[g]],C[y+3*x+10]=M[15+x][d[g]]*S-M[14-x][d[g]],C[y+3*x+19]=B[2-x][d[g]]*S+B[3+x][d[g]],C[y+3*x+11]=B[3+x][d[g]]*S-B[2-x][d[g]],C[y+3*x+20]=B[8-x][d[g]]*S+B[9+x][d[g]]}h(C,y)}else{var T=r(18);for(x=-9;x<0;x++){var R,I;R=i[E][x+27]*B[x+9][d[g]]+i[E][x+36]*B[8-x][d[g]],I=i[E][x+9]*M[x+9][d[g]]-i[E][x+18]*M[8-x][d[g]],T[x+9]=R-I*s[3+x+9],T[x+18]=R*s[3+x+9]+I}f(C,y,T)}}if(E!=a.SHORT_TYPE&&0!=g)for(x=7;x>=0;--x){var O,N;O=C[y+x]*c[20+x]+C[y+-1-x]*u[28+x],N=C[y+x]*u[28+x]-C[y+-1-x]*c[20+x],C[y+-1-x]=O,C[y+x]=N}}}if(p=l,_=286,1==t.mode_gr)for(var L=0;L<18;L++)e.arraycopy(t.sb_sample[m][1][L],0,t.sb_sample[m][0][L],0,32)}}},Ga}(),c=function(){if(Za)return Wa;Za=1;var e=Qa();return Wa=function(){this.thm=new e,this.en=new e}}(),u=eo,d=s.FFTOFFSET,A=s.MPG_MD_MS_LR,h=null;this.psy=null;var f=null,p=null,_=null;this.setModules=function(e,t,n,r){h=e,this.psy=t,f=t,p=r,_=n};var m=new l;this.lame_encode_mp3_frame=function(l,b,g,v,C,y){var k,w=n([2,2]);w[0][0]=new c,w[0][1]=new c,w[1][0]=new c,w[1][1]=new c;var x=n([2,2]);x[0][0]=new c,x[0][1]=new c,x[1][0]=new c,x[1][1]=new c;var E,M,B,S,T=[null,null],R=l.internal_flags,I=a([2,4]),O=[.5,.5],N=[[0,0],[0,0]],L=[[0,0],[0,0]];if(T[0]=b,T[1]=g,0==R.lame_encode_frame_init&&function(e,t){var n,a,o=e.internal_flags;if(0==o.lame_encode_frame_init){var l,c,u=r(2014),d=r(2014);for(o.lame_encode_frame_init=1,l=0,c=0;l<286+576*(1+o.mode_gr);++l)l<576*o.mode_gr?(u[l]=0,2==o.channels_out&&(d[l]=0)):(u[l]=t[0][c],2==o.channels_out&&(d[l]=t[1][c]),++c);for(a=0;a<o.mode_gr;a++)for(n=0;n<o.channels_out;n++)o.l3_side.tt[a][n].block_type=s.SHORT_TYPE;m.mdct_sub48(o,u,d),i(576>=s.FFTOFFSET),i(o.mf_size>=s.BLKSIZE+e.framesize-s.FFTOFFSET),i(o.mf_size>=512+e.framesize-32)}}(l,T),R.padding=0,(R.slot_lag-=R.frac_SpF)<0&&(R.slot_lag+=l.out_samplerate,R.padding=1),0!=R.psymodel){var D=[null,null],P=0,j=o(2);for(S=0;S<R.mode_gr;S++){for(B=0;B<R.channels_out;B++)D[B]=T[B],P=576+576*S-s.FFTOFFSET;if(0!=(l.VBR==t.vbr_mtrh||l.VBR==t.vbr_mt?f.L3psycho_anal_vbr(l,D,P,S,w,x,N[S],L[S],I[S],j):f.L3psycho_anal_ns(l,D,P,S,w,x,N[S],L[S],I[S],j)))return-4;for(l.mode==u.JOINT_STEREO&&(O[S]=I[S][2]+I[S][3],O[S]>0&&(O[S]=I[S][3]/O[S])),B=0;B<R.channels_out;B++){var V=R.l3_side.tt[S][B];V.block_type=j[B],V.mixed_block_flag=0}}}else for(S=0;S<R.mode_gr;S++)for(B=0;B<R.channels_out;B++)R.l3_side.tt[S][B].block_type=s.NORM_TYPE,R.l3_side.tt[S][B].mixed_block_flag=0,L[S][B]=N[S][B]=700;if(function(e){var t,n;if(0!=e.ATH.useAdjust)if(n=e.loudness_sq[0][0],t=e.loudness_sq[1][0],2==e.channels_out?(n+=e.loudness_sq[0][1],t+=e.loudness_sq[1][1]):(n+=n,t+=t),2==e.mode_gr&&(n=Math.max(n,t)),n*=.5,(n*=e.ATH.aaSensitivityP)>.03125)e.ATH.adjust>=1?e.ATH.adjust=1:e.ATH.adjust<e.ATH.adjustLimit&&(e.ATH.adjust=e.ATH.adjustLimit),e.ATH.adjustLimit=1;else{var r=31.98*n+625e-6;e.ATH.adjust>=r?(e.ATH.adjust*=.075*r+.925,e.ATH.adjust<r&&(e.ATH.adjust=r)):e.ATH.adjustLimit>=r?e.ATH.adjust=r:e.ATH.adjust<e.ATH.adjustLimit&&(e.ATH.adjust=e.ATH.adjustLimit),e.ATH.adjustLimit=r}else e.ATH.adjust=1}(R),m.mdct_sub48(R,T[0],T[1]),R.mode_ext=s.MPG_MD_LR_LR,l.force_ms)R.mode_ext=s.MPG_MD_MS_LR;else if(l.mode==u.JOINT_STEREO){var z=0,F=0;for(S=0;S<R.mode_gr;S++)for(B=0;B<R.channels_out;B++)z+=L[S][B],F+=N[S][B];if(z<=1*F){var q=R.l3_side.tt[0],G=R.l3_side.tt[R.mode_gr-1];q[0].block_type==q[1].block_type&&G[0].block_type==G[1].block_type&&(R.mode_ext=s.MPG_MD_MS_LR)}}if(R.mode_ext==A?(E=x,M=L):(E=w,M=N),l.analysis&&null!=R.pinfo)for(S=0;S<R.mode_gr;S++)for(B=0;B<R.channels_out;B++)R.pinfo.ms_ratio[S]=R.ms_ratio[S],R.pinfo.ms_ener_ratio[S]=O[S],R.pinfo.blocktype[S][B]=R.l3_side.tt[S][B].block_type,R.pinfo.pe[S][B]=M[S][B],e.arraycopy(R.l3_side.tt[S][B].xr,0,R.pinfo.xr[S][B],0,576),R.mode_ext==A&&(R.pinfo.ers[S][B]=R.pinfo.ers[S][B+2],e.arraycopy(R.pinfo.energy[S][B+2],0,R.pinfo.energy[S][B],0,R.pinfo.energy[S][B].length));if(l.VBR==t.vbr_off||l.VBR==t.vbr_abr){var H,Y;for(H=0;H<18;H++)R.nsPsy.pefirbuf[H]=R.nsPsy.pefirbuf[H+1];for(Y=0,S=0;S<R.mode_gr;S++)for(B=0;B<R.channels_out;B++)Y+=M[S][B];for(R.nsPsy.pefirbuf[18]=Y,Y=R.nsPsy.pefirbuf[9],H=0;H<9;H++)Y+=(R.nsPsy.pefirbuf[H]+R.nsPsy.pefirbuf[18-H])*s.fircoef[H];for(Y=3350*R.mode_gr*R.channels_out/Y,S=0;S<R.mode_gr;S++)for(B=0;B<R.channels_out;B++)M[S][B]*=Y}if(R.iteration_loop.iteration_loop(l,M,O,E),h.format_bitstream(l),k=h.copy_buffer(R,v,C,y,1),l.bWriteVbrTag&&p.addVbrFrame(l),l.analysis&&null!=R.pinfo){for(B=0;B<R.channels_out;B++){var X;for(X=0;X<d;X++)R.pinfo.pcmdata[B][X]=R.pinfo.pcmdata[B][X+l.framesize];for(X=d;X<1600;X++)R.pinfo.pcmdata[B][X]=T[B][X-d]}_.set_frame_pinfo(l,E)}return function(e){var t,n;for(i(0<=e.bitrate_index&&e.bitrate_index<16),i(0<=e.mode_ext&&e.mode_ext<4),e.bitrate_stereoMode_Hist[e.bitrate_index][4]++,e.bitrate_stereoMode_Hist[15][4]++,2==e.channels_out&&(e.bitrate_stereoMode_Hist[e.bitrate_index][e.mode_ext]++,e.bitrate_stereoMode_Hist[15][e.mode_ext]++),t=0;t<e.mode_gr;++t)for(n=0;n<e.channels_out;++n){var r=0|e.l3_side.tt[t][n].block_type;0!=e.l3_side.tt[t][n].mixed_block_flag&&(r=4),e.bitrate_blockType_Hist[e.bitrate_index][r]++,e.bitrate_blockType_Hist[e.bitrate_index][5]++,e.bitrate_blockType_Hist[15][r]++,e.bitrate_blockType_Hist[15][5]++}}(R),k}}return s.ENCDELAY=576,s.POSTDELAY=1152,s.MDCTDELAY=48,s.FFTOFFSET=224+s.MDCTDELAY,s.DECDELAY=528,s.SBLIMIT=32,s.CBANDS=64,s.SBPSY_l=21,s.SBPSY_s=12,s.SBMAX_l=22,s.SBMAX_s=13,s.PSFB21=6,s.PSFB12=6,s.BLKSIZE=1024,s.HBLKSIZE=s.BLKSIZE/2+1,s.BLKSIZE_s=256,s.HBLKSIZE_s=s.BLKSIZE_s/2+1,s.NORM_TYPE=0,s.START_TYPE=1,s.SHORT_TYPE=2,s.STOP_TYPE=3,s.MPG_MD_LR_LR=0,s.MPG_MD_LR_I=1,s.MPG_MD_MS_LR=2,s.MPG_MD_MS_I=3,s.fircoef=[-.1039435,-.1892065,5*-.0432472,-.155915,3898045e-23,.0467745*5,.50455,.756825,.187098*5],Ja=s}var no=Ua.Util,ro=Ua.new_float,ao=to(),oo=Ua.VbrMode,io=Ua.Float,so=Ua.ShortBlock,lo=Ua.Util,co=Ua.Arrays,uo=Ua.new_float,Ao=Ua.new_float_n,ho=Ua.new_int,fo=Ua.assert,po=function(){var e=ro(ao.BLKSIZE),t=ro(ao.BLKSIZE_s/2),n=[.9238795325112867,.3826834323650898,.9951847266721969,.0980171403295606,.9996988186962042,.02454122852291229,.9999811752826011,.006135884649154475];function r(e,t,r){var a,o,i,s=0,l=t+(r<<=1);a=4;do{var c,u,d,A,h,f,p;p=a>>1,f=(h=a<<1)+(A=a),a=h<<1,i=(o=t)+p;do{y=e[o+0]-e[o+A],C=e[o+0]+e[o+A],E=e[o+h]-e[o+f],w=e[o+h]+e[o+f],e[o+h]=C-w,e[o+0]=C+w,e[o+f]=y-E,e[o+A]=y+E,y=e[i+0]-e[i+A],C=e[i+0]+e[i+A],E=no.SQRT2*e[i+f],w=no.SQRT2*e[i+h],e[i+h]=C-w,e[i+0]=C+w,e[i+f]=y-E,e[i+A]=y+E,i+=a,o+=a}while(o<l);for(u=n[s+0],c=n[s+1],d=1;d<p;d++){var _,m;_=1-2*c*c,m=2*c*u,o=t+d,i=t+A-d;do{var b,g,v,C,y,k,w,x,E,M;g=m*e[o+A]-_*e[i+A],b=_*e[o+A]+m*e[i+A],y=e[o+0]-b,C=e[o+0]+b,k=e[i+0]-g,v=e[i+0]+g,g=m*e[o+f]-_*e[i+f],b=_*e[o+f]+m*e[i+f],E=e[o+h]-b,w=e[o+h]+b,M=e[i+h]-g,x=e[i+h]+g,g=c*w-u*M,b=u*w+c*M,e[o+h]=C-b,e[o+0]=C+b,e[i+f]=k-g,e[i+A]=k+g,g=u*x-c*E,b=c*x+u*E,e[i+h]=v-b,e[i+0]=v+b,e[o+f]=y-g,e[o+A]=y+g,i+=a,o+=a}while(o<l);u=(_=u)*n[s+0]-c*n[s+1],c=_*n[s+1]+c*n[s+0]}s+=2}while(a<r)}var a=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254];this.fft_short=function(e,n,o,i,s){for(var l=0;l<3;l++){var c=ao.BLKSIZE_s/2,u=65535&192*(l+1),d=ao.BLKSIZE_s/8-1;do{var A,h,f,p,_,m=255&a[d<<2];h=(A=t[m]*i[o][s+m+u])-(_=t[127-m]*i[o][s+m+u+128]),A+=_,p=(f=t[m+64]*i[o][s+m+u+64])-(_=t[63-m]*i[o][s+m+u+192]),f+=_,c-=4,n[l][c+0]=A+f,n[l][c+2]=A-f,n[l][c+1]=h+p,n[l][c+3]=h-p,h=(A=t[m+1]*i[o][s+m+u+1])-(_=t[126-m]*i[o][s+m+u+129]),A+=_,p=(f=t[m+65]*i[o][s+m+u+65])-(_=t[62-m]*i[o][s+m+u+193]),f+=_,n[l][c+ao.BLKSIZE_s/2+0]=A+f,n[l][c+ao.BLKSIZE_s/2+2]=A-f,n[l][c+ao.BLKSIZE_s/2+1]=h+p,n[l][c+ao.BLKSIZE_s/2+3]=h-p}while(--d>=0);r(n[l],c,ao.BLKSIZE_s/2)}},this.fft_long=function(t,n,o,i,s){var l=ao.BLKSIZE/8-1,c=ao.BLKSIZE/2;do{var u,d,A,h,f,p=255&a[l];d=(u=e[p]*i[o][s+p])-(f=e[p+512]*i[o][s+p+512]),u+=f,h=(A=e[p+256]*i[o][s+p+256])-(f=e[p+768]*i[o][s+p+768]),A+=f,n[0+(c-=4)]=u+A,n[c+2]=u-A,n[c+1]=d+h,n[c+3]=d-h,d=(u=e[p+1]*i[o][s+p+1])-(f=e[p+513]*i[o][s+p+513]),u+=f,h=(A=e[p+257]*i[o][s+p+257])-(f=e[p+769]*i[o][s+p+769]),A+=f,n[c+ao.BLKSIZE/2+0]=u+A,n[c+ao.BLKSIZE/2+2]=u-A,n[c+ao.BLKSIZE/2+1]=d+h,n[c+ao.BLKSIZE/2+3]=d-h}while(--l>=0);r(n,c,ao.BLKSIZE/2)},this.init_fft=function(n){for(var r=0;r<ao.BLKSIZE;r++)e[r]=.42-.5*Math.cos(2*Math.PI*(r+.5)/ao.BLKSIZE)+.08*Math.cos(4*Math.PI*(r+.5)/ao.BLKSIZE);for(r=0;r<ao.BLKSIZE_s/2;r++)t[r]=.5*(1-Math.cos(2*Math.PI*(r+.5)/ao.BLKSIZE_s))}},_o=to(),mo=function(){var e=eo,t=new po,n=2.302585092994046,r=1/217621504/(_o.BLKSIZE/2),a=21,o=.2302585093;function i(e,t){for(var n=0,a=0;a<_o.BLKSIZE/2;++a)n+=e[a]*t.ATH.eql_w[a];return n*r}function s(e,n,r,a,o,s,l,c,u,d,A){var h=e.internal_flags;if(u<2)t.fft_long(h,a[o],u,d,A),t.fft_short(h,s[l],u,d,A);else if(2==u){for(var f=_o.BLKSIZE-1;f>=0;--f){var p=a[o+0][f],_=a[o+1][f];a[o+0][f]=(p+_)*lo.SQRT2*.5,a[o+1][f]=(p-_)*lo.SQRT2*.5}for(var m=2;m>=0;--m)for(f=_o.BLKSIZE_s-1;f>=0;--f)p=s[l+0][m][f],_=s[l+1][m][f],s[l+0][m][f]=(p+_)*lo.SQRT2*.5,s[l+1][m][f]=(p-_)*lo.SQRT2*.5}for(n[0]=a[o+0][0],n[0]*=n[0],f=_o.BLKSIZE/2-1;f>=0;--f){var b=a[o+0][_o.BLKSIZE/2-f],g=a[o+0][_o.BLKSIZE/2+f];n[_o.BLKSIZE/2-f]=.5*(b*b+g*g)}for(m=2;m>=0;--m)for(r[m][0]=s[l+0][m][0],r[m][0]*=r[m][0],f=_o.BLKSIZE_s/2-1;f>=0;--f)b=s[l+0][m][_o.BLKSIZE_s/2-f],g=s[l+0][m][_o.BLKSIZE_s/2+f],r[m][_o.BLKSIZE_s/2-f]=.5*(b*b+g*g);var v=0;for(f=11;f<_o.HBLKSIZE;f++)v+=n[f];if(h.tot_ener[u]=v,e.analysis){for(f=0;f<_o.HBLKSIZE;f++)h.pinfo.energy[c][u][f]=h.pinfo.energy_save[u][f],h.pinfo.energy_save[u][f]=n[f];h.pinfo.pe[c][u]=h.pe[u]}2==e.athaa_loudapprox&&u<2&&(h.loudness_sq[c][u]=h.loudness_sq_save[u],h.loudness_sq_save[u]=i(n,h))}var l,c,u,d=[1,.79433,.63096,.63096,.63096,.63096,.63096,.25119,.11749],A=[3.3246*3.3246,3.23837*3.23837,9.9500500969,9.0247369744,8.1854926609,7.0440875649,2.46209*2.46209,2.284*2.284,4.4892710641,1.96552*1.96552,1.82335*1.82335,1.69146*1.69146,2.4621061921,2.1508568964,1.37074*1.37074,1.31036*1.31036,1.5691069696,1.4555939904,1.16203*1.16203,1.2715945225,1.09428*1.09428,1.0659*1.0659,1.0779838276,1.0382591025,1],h=[1.7782755904,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.6999465924,1.22321*1.22321,1.3169398564,1],f=[5.5396212496,2.29259*2.29259,4.9868695969,2.12675*2.12675,2.02545*2.02545,1.87894*1.87894,1.74303*1.74303,1.61695*1.61695,2.2499700001,1.39148*1.39148,1.29083*1.29083,1.19746*1.19746,1.2339655056,1.0779838276];function p(e,t,n,r,a,o){var i,s,d;if(t>e){if(!(t<e*c))return e+t;i=t/e}else{if(e>=t*c)return e+t;i=e/t}if(e+=t,r+3<=6){if(i>=l)return e;var p=0|lo.FAST_LOG10_X(i,16);return e*h[p]}return p=0|lo.FAST_LOG10_X(i,16),t=0!=o?a.ATH.cb_s[n]*a.ATH.adjust:a.ATH.cb_l[n]*a.ATH.adjust,e<u*t?e>t?(s=1,p<=13&&(s=f[p]),d=lo.FAST_LOG10_X(e/t,10/15),e*((A[p]-s)*d+s)):p>13?e:e*f[p]:e*A[p]}var _=[1.7782755904,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.6999465924,1.22321*1.22321,1.3169398564,1];function m(e,t,n){var r;if(e<0&&(e=0),t<0&&(t=0),e<=0)return t;if(t<=0)return e;if(r=t>e?t/e:e/t,-2<=n&&n<=2){if(r>=l)return e+t;var a=0|lo.FAST_LOG10_X(r,16);return(e+t)*_[a]}return r<c?e+t:(e<t&&(e=t),e)}function b(e,t,n,r,a){var o,i,s=0,l=0;for(o=i=0;o<_o.SBMAX_s;++i,++o){for(var c=e.bo_s[o],u=e.npart_s,d=c<u?c:u;i<d;)fo(t[i]>=0),fo(n[i]>=0),s+=t[i],l+=n[i],i++;if(e.en[r].s[o][a]=s,e.thm[r].s[o][a]=l,i>=u){++o;break}fo(t[i]>=0),fo(n[i]>=0);var A=e.PSY.bo_s_weight[o],h=1-A;s=A*t[i],l=A*n[i],e.en[r].s[o][a]+=s,e.thm[r].s[o][a]+=l,s=h*t[i],l=h*n[i]}for(;o<_o.SBMAX_s;++o)e.en[r].s[o][a]=0,e.thm[r].s[o][a]=0}function g(e,t,n,r){var a,o,i=0,s=0;for(a=o=0;a<_o.SBMAX_l;++o,++a){for(var l=e.bo_l[a],c=e.npart_l,u=l<c?l:c;o<u;)fo(t[o]>=0),fo(n[o]>=0),i+=t[o],s+=n[o],o++;if(e.en[r].l[a]=i,e.thm[r].l[a]=s,o>=c){++a;break}fo(t[o]>=0),fo(n[o]>=0);var d=e.PSY.bo_l_weight[a],A=1-d;i=d*t[o],s=d*n[o],e.en[r].l[a]+=i,e.thm[r].l[a]+=s,i=A*t[o],s=A*n[o]}for(;a<_o.SBMAX_l;++a)e.en[r].l[a]=0,e.thm[r].l[a]=0}function v(e,t,n,r,a,o){var i,s,l=e.internal_flags;for(s=i=0;s<l.npart_s;++s){for(var c=0,u=l.numlines_s[s],d=0;d<u;++d,++i)c+=t[o][i];n[s]=c}for(fo(s==l.npart_s),i=s=0;s<l.npart_s;s++){var A=l.s3ind_s[s][0],h=l.s3_ss[i++]*n[A];for(++A;A<=l.s3ind_s[s][1];)h+=l.s3_ss[i]*n[A],++i,++A;var f=2*l.nb_s1[a][s];if(r[s]=Math.min(h,f),l.blocktype_old[1&a]==_o.SHORT_TYPE){f=16*l.nb_s2[a][s];var p=r[s];r[s]=Math.min(f,p)}l.nb_s2[a][s]=l.nb_s1[a][s],l.nb_s1[a][s]=h,fo(r[s]>=0)}for(;s<=_o.CBANDS;++s)n[s]=0,r[s]=0}function C(e,t,n){return n>=1?e:n<=0?t:t>0?Math.pow(e/t,n)*t:0}var y=[11.8,13.6,17.2,32,46.5,51.3,57.5,67.1,71.5,84.6,97.6,130];function k(e,t){for(var r=309.07,a=0;a<_o.SBMAX_s-1;a++)for(var o=0;o<3;o++){var i=e.thm.s[a][o];if(i>0){var s=i*t,l=e.en.s[a][o];l>s&&(r+=l>1e10*s?y[a]*(10*n):y[a]*lo.FAST_LOG10(l/s))}}return r}var w=[6.8,5.8,5.8,6.4,6.5,9.9,12.1,14.4,15,18.9,21.6,26.9,34.2,40.2,46.8,56.5,60.7,73.9,85.7,93.4,126.1];function x(e,t){for(var r=281.0575,a=0;a<_o.SBMAX_l-1;a++){var o=e.thm.l[a];if(o>0){var i=o*t,s=e.en.l[a];s>i&&(r+=s>1e10*i?w[a]*(10*n):w[a]*lo.FAST_LOG10(s/i))}}return r}function E(e,t,n,r,a){var o,i;for(o=i=0;o<e.npart_l;++o){var s,l=0,c=0;for(s=0;s<e.numlines_l[o];++s,++i){var u=t[i];l+=u,c<u&&(c=u)}n[o]=l,r[o]=c,a[o]=l*e.rnumlines_l[o],fo(e.rnumlines_l[o]>=0),fo(n[o]>=0),fo(r[o]>=0),fo(a[o]>=0)}}function M(e,t,n,r){var a=d.length-1,o=0,i=n[o]+n[o+1];for(i>0?((s=t[o])<t[o+1]&&(s=t[o+1]),fo(e.numlines_l[o]+e.numlines_l[o+1]-1>0),(l=0|(i=20*(2*s-i)/(i*(e.numlines_l[o]+e.numlines_l[o+1]-1))))>a&&(l=a),r[o]=l):r[o]=0,o=1;o<e.npart_l-1;o++)if((i=n[o-1]+n[o]+n[o+1])>0){var s,l;(s=t[o-1])<t[o]&&(s=t[o]),s<t[o+1]&&(s=t[o+1]),fo(e.numlines_l[o-1]+e.numlines_l[o]+e.numlines_l[o+1]-1>0),(l=0|(i=20*(3*s-i)/(i*(e.numlines_l[o-1]+e.numlines_l[o]+e.numlines_l[o+1]-1))))>a&&(l=a),r[o]=l}else r[o]=0;fo(o==e.npart_l-1),(i=n[o-1]+n[o])>0?((s=t[o-1])<t[o]&&(s=t[o]),fo(e.numlines_l[o-1]+e.numlines_l[o]-1>0),(l=0|(i=20*(2*s-i)/(i*(e.numlines_l[o-1]+e.numlines_l[o]-1))))>a&&(l=a),r[o]=l):r[o]=0,fo(o==e.npart_l-1)}var B=[-1730326e-23,-.01703172,-1349528e-23,.0418072,-673278e-22,-.0876324,-30835e-21,.1863476,-1104424e-22,-.627638];function S(e,n,r,a,o,i,s,l){var c=e.internal_flags;if(a<2)t.fft_long(c,s[l],a,n,r);else if(2==a)for(var u=_o.BLKSIZE-1;u>=0;--u){var d=s[l+0][u],A=s[l+1][u];s[l+0][u]=(d+A)*lo.SQRT2*.5,s[l+1][u]=(d-A)*lo.SQRT2*.5}for(i[0]=s[l+0][0],i[0]*=i[0],u=_o.BLKSIZE/2-1;u>=0;--u){var h=s[l+0][_o.BLKSIZE/2-u],f=s[l+0][_o.BLKSIZE/2+u];i[_o.BLKSIZE/2-u]=.5*(h*h+f*f)}var p=0;for(u=11;u<_o.HBLKSIZE;u++)p+=i[u];if(c.tot_ener[a]=p,e.analysis){for(u=0;u<_o.HBLKSIZE;u++)c.pinfo.energy[o][a][u]=c.pinfo.energy_save[a][u],c.pinfo.energy_save[a][u]=i[u];c.pinfo.pe[o][a]=c.pe[a]}}function T(e,n,r,a,o,i,s,l){var c=e.internal_flags;if(0==o&&a<2&&t.fft_short(c,s[l],a,n,r),2==a)for(var u=_o.BLKSIZE_s-1;u>=0;--u){var d=s[l+0][o][u],A=s[l+1][o][u];s[l+0][o][u]=(d+A)*lo.SQRT2*.5,s[l+1][o][u]=(d-A)*lo.SQRT2*.5}for(i[o][0]=s[l+0][o][0],i[o][0]*=i[o][0],u=_o.BLKSIZE_s/2-1;u>=0;--u){var h=s[l+0][o][_o.BLKSIZE_s/2-u],f=s[l+0][o][_o.BLKSIZE_s/2+u];i[o][_o.BLKSIZE_s/2-u]=.5*(h*h+f*f)}}function R(e,t,n,r){var a=e.internal_flags;2==e.athaa_loudapprox&&n<2&&(a.loudness_sq[t][n]=a.loudness_sq_save[n],a.loudness_sq_save[n]=i(r,a))}this.L3psycho_anal_ns=function(t,n,r,o,i,l,c,u,A,h){var f,_,m,y,w,S,T,R,I,O,N=t.internal_flags,L=Ao([2,_o.BLKSIZE]),D=Ao([2,3,_o.BLKSIZE_s]),P=uo(_o.CBANDS+1),j=uo(_o.CBANDS+1),V=uo(_o.CBANDS+2),z=ho(2),F=ho(2),q=Ao([2,576]),G=ho(_o.CBANDS+2),H=ho(_o.CBANDS+2);for(co.fill(H,0),f=N.channels_out,t.mode==e.JOINT_STEREO&&(f=4),I=t.VBR==oo.vbr_off?0==N.ResvMax?0:N.ResvSize/N.ResvMax*.5:t.VBR==oo.vbr_rh||t.VBR==oo.vbr_mtrh||t.VBR==oo.vbr_mt?.6:1,_=0;_<N.channels_out;_++){var Y=n[_],X=r+576-350-a+192;for(y=0;y<576;y++){var W,Z;for(W=Y[X+y+10],Z=0,w=0;w<9;w+=2)W+=B[w]*(Y[X+y+w]+Y[X+y+a-w]),Z+=B[w+1]*(Y[X+y+w+1]+Y[X+y+a-w-1]);q[_][y]=W+Z}i[o][_].en.assign(N.en[_]),i[o][_].thm.assign(N.thm[_]),f>2&&(l[o][_].en.assign(N.en[_+2]),l[o][_].thm.assign(N.thm[_+2]))}for(_=0;_<f;_++){var U,Q=uo(12),K=[0,0,0,0],J=uo(12),$=1,ee=uo(_o.CBANDS),te=uo(_o.CBANDS),ne=[0,0,0,0],re=uo(_o.HBLKSIZE),ae=Ao([3,_o.HBLKSIZE_s]);for(fo(N.npart_s<=_o.CBANDS),fo(N.npart_l<=_o.CBANDS),y=0;y<3;y++)Q[y]=N.nsPsy.last_en_subshort[_][y+6],fo(N.nsPsy.last_en_subshort[_][y+4]>0),J[y]=Q[y]/N.nsPsy.last_en_subshort[_][y+4],K[0]+=Q[y];if(2==_)for(y=0;y<576;y++){var oe,ie;oe=q[0][y],ie=q[1][y],q[0][y]=oe+ie,q[1][y]=oe-ie}var se=q[1&_],le=0;for(y=0;y<9;y++){for(var ce=le+64,ue=1;le<ce;le++)ue<Math.abs(se[le])&&(ue=Math.abs(se[le]));N.nsPsy.last_en_subshort[_][y]=Q[y+3]=ue,K[1+y/3]+=ue,ue>Q[y+3-2]?(fo(Q[y+3-2]>0),ue/=Q[y+3-2]):ue=Q[y+3-2]>10*ue?Q[y+3-2]/(10*ue):0,J[y+3]=ue}if(t.analysis){var de=J[0];for(y=1;y<12;y++)de<J[y]&&(de=J[y]);N.pinfo.ers[o][_]=N.pinfo.ers_save[_],N.pinfo.ers_save[_]=de}for(U=3==_?N.nsPsy.attackthre_s:N.nsPsy.attackthre,y=0;y<12;y++)0==ne[y/3]&&J[y]>U&&(ne[y/3]=y%3+1);for(y=1;y<4;y++){var Ae;K[y-1]>K[y]?(fo(K[y]>0),Ae=K[y-1]/K[y]):(fo(K[y-1]>0),Ae=K[y]/K[y-1]),Ae<1.7&&(ne[y]=0,1==y&&(ne[0]=0))}for(0!=ne[0]&&0!=N.nsPsy.lastAttacks[_]&&(ne[0]=0),(3==N.nsPsy.lastAttacks[_]||ne[0]+ne[1]+ne[2]+ne[3]!=0)&&($=0,0!=ne[1]&&0!=ne[0]&&(ne[1]=0),0!=ne[2]&&0!=ne[1]&&(ne[2]=0),0!=ne[3]&&0!=ne[2]&&(ne[3]=0)),_<2?F[_]=$:0==$&&(F[0]=F[1]=0),A[_]=N.tot_ener[_],s(t,re,ae,L,1&_,D,1&_,o,_,n,r),E(N,re,P,ee,te),M(N,ee,te,G),R=0;R<3;R++){var he,fe;for(v(t,ae,j,V,_,R),b(N,j,V,_,R),T=0;T<_o.SBMAX_s;T++){if(fe=N.thm[_].s[T][R],fe*=.8,ne[R]>=2||1==ne[R+1]){var pe=0!=R?R-1:2;ue=C(N.thm[_].s[T][pe],fe,.6*I),fe=Math.min(fe,ue)}1==ne[R]?(pe=0!=R?R-1:2,ue=C(N.thm[_].s[T][pe],fe,.3*I),fe=Math.min(fe,ue)):(0!=R&&3==ne[R-1]||0==R&&3==N.nsPsy.lastAttacks[_])&&(pe=2!=R?R+1:0,ue=C(N.thm[_].s[T][pe],fe,.3*I),fe=Math.min(fe,ue)),he=Q[3*R+3]+Q[3*R+4]+Q[3*R+5],6*Q[3*R+5]<he&&(fe*=.5,6*Q[3*R+4]<he&&(fe*=.5)),N.thm[_].s[T][R]=fe}}for(N.nsPsy.lastAttacks[_]=ne[2],S=0,m=0;m<N.npart_l;m++){for(var _e=N.s3ind[m][0],me=P[_e]*d[G[_e]],be=N.s3_ll[S++]*me;++_e<=N.s3ind[m][1];)me=P[_e]*d[G[_e]],be=p(be,N.s3_ll[S++]*me,_e,_e-m,N,0);be*=.158489319246111,N.blocktype_old[1&_]==_o.SHORT_TYPE?V[m]=be:V[m]=C(Math.min(be,Math.min(2*N.nb_1[_][m],16*N.nb_2[_][m])),be,I),N.nb_2[_][m]=N.nb_1[_][m],N.nb_1[_][m]=be}for(;m<=_o.CBANDS;++m)P[m]=0,V[m]=0;g(N,P,V,_)}for((t.mode==e.STEREO||t.mode==e.JOINT_STEREO)&&t.interChRatio>0&&function(e,t){var n=e.internal_flags;if(n.channels_out>1){for(var r=0;r<_o.SBMAX_l;r++){var a=n.thm[0].l[r],o=n.thm[1].l[r];n.thm[0].l[r]+=o*t,n.thm[1].l[r]+=a*t}for(r=0;r<_o.SBMAX_s;r++)for(var i=0;i<3;i++)a=n.thm[0].s[r][i],o=n.thm[1].s[r][i],n.thm[0].s[r][i]+=o*t,n.thm[1].s[r][i]+=a*t}}(t,t.interChRatio),t.mode==e.JOINT_STEREO&&(function(e){for(var t=0;t<_o.SBMAX_l;t++)if(!(e.thm[0].l[t]>1.58*e.thm[1].l[t]||e.thm[1].l[t]>1.58*e.thm[0].l[t])){var n=e.mld_l[t]*e.en[3].l[t],r=Math.max(e.thm[2].l[t],Math.min(e.thm[3].l[t],n));n=e.mld_l[t]*e.en[2].l[t];var a=Math.max(e.thm[3].l[t],Math.min(e.thm[2].l[t],n));e.thm[2].l[t]=r,e.thm[3].l[t]=a}for(t=0;t<_o.SBMAX_s;t++)for(var o=0;o<3;o++)e.thm[0].s[t][o]>1.58*e.thm[1].s[t][o]||e.thm[1].s[t][o]>1.58*e.thm[0].s[t][o]||(n=e.mld_s[t]*e.en[3].s[t][o],r=Math.max(e.thm[2].s[t][o],Math.min(e.thm[3].s[t][o],n)),n=e.mld_s[t]*e.en[2].s[t][o],a=Math.max(e.thm[3].s[t][o],Math.min(e.thm[2].s[t][o],n)),e.thm[2].s[t][o]=r,e.thm[3].s[t][o]=a)}(N),O=t.msfix,Math.abs(O)>0&&function(e,t,n){var r=t,a=Math.pow(10,n);t*=2,r*=2;for(var o=0;o<_o.SBMAX_l;o++)u=e.ATH.cb_l[e.bm_l[o]]*a,(s=Math.min(Math.max(e.thm[0].l[o],u),Math.max(e.thm[1].l[o],u)))*t<(l=Math.max(e.thm[2].l[o],u))+(c=Math.max(e.thm[3].l[o],u))&&(l*=d=s*r/(l+c),c*=d),e.thm[2].l[o]=Math.min(l,e.thm[2].l[o]),e.thm[3].l[o]=Math.min(c,e.thm[3].l[o]);for(a*=_o.BLKSIZE_s/_o.BLKSIZE,o=0;o<_o.SBMAX_s;o++)for(var i=0;i<3;i++){var s,l,c,u,d;u=e.ATH.cb_s[e.bm_s[o]]*a,(s=Math.min(Math.max(e.thm[0].s[o][i],u),Math.max(e.thm[1].s[o][i],u)))*t<(l=Math.max(e.thm[2].s[o][i],u))+(c=Math.max(e.thm[3].s[o][i],u))&&(l*=d=s*t/(l+c),c*=d),e.thm[2].s[o][i]=Math.min(e.thm[2].s[o][i],l),e.thm[3].s[o][i]=Math.min(e.thm[3].s[o][i],c)}}(N,O,t.ATHlower*N.ATH.adjust)),function(e,t,n,r){var a=e.internal_flags;e.short_blocks==so.short_block_coupled&&(0==t[0]||0==t[1])&&(t[0]=t[1]=0);for(var o=0;o<a.channels_out;o++)r[o]=_o.NORM_TYPE,e.short_blocks==so.short_block_dispensed&&(t[o]=1),e.short_blocks==so.short_block_forced&&(t[o]=0),0!=t[o]?(fo(a.blocktype_old[o]!=_o.START_TYPE),a.blocktype_old[o]==_o.SHORT_TYPE&&(r[o]=_o.STOP_TYPE)):(r[o]=_o.SHORT_TYPE,a.blocktype_old[o]==_o.NORM_TYPE&&(a.blocktype_old[o]=_o.START_TYPE),a.blocktype_old[o]==_o.STOP_TYPE&&(a.blocktype_old[o]=_o.SHORT_TYPE)),n[o]=a.blocktype_old[o],a.blocktype_old[o]=r[o]}(t,F,h,z),_=0;_<f;_++){var ge,ve,Ce,ye=0;_>1?(ge=u,ye=-2,ve=_o.NORM_TYPE,(h[0]==_o.SHORT_TYPE||h[1]==_o.SHORT_TYPE)&&(ve=_o.SHORT_TYPE),Ce=l[o][_-2]):(ge=c,ye=0,ve=h[_],Ce=i[o][_]),ve==_o.SHORT_TYPE?ge[ye+_]=k(Ce,N.masking_lower):ge[ye+_]=x(Ce,N.masking_lower),t.analysis&&(N.pinfo.pe[o][_]=ge[ye+_])}return 0};var I=[-1730326e-23,-.01703172,-1349528e-23,.0418072,-673278e-22,-.0876324,-30835e-21,.1863476,-1104424e-22,-.627638];function O(e,t,n){if(0==n)for(var r=0;r<e.npart_s;r++)e.nb_s2[t][r]=e.nb_s1[t][r],e.nb_s1[t][r]=0}function N(e,t){for(var n=0;n<e.npart_l;n++)e.nb_2[t][n]=e.nb_1[t][n],e.nb_1[t][n]=0}function L(e,t,n,r,a,o){var i,s,l,c=e.internal_flags,u=new float[_o.CBANDS],A=uo(_o.CBANDS),h=new int[_o.CBANDS];for(l=s=0;l<c.npart_s;++l){var f=0,p=0,_=c.numlines_s[l];for(i=0;i<_;++i,++s){var b=t[o][s];f+=b,p<b&&(p=b)}n[l]=f,u[l]=p,A[l]=f/_,fo(A[l]>=0)}for(fo(l==c.npart_s);l<_o.CBANDS;++l)u[l]=0,A[l]=0;for(function(e,t,n,r){var a=d.length-1,o=0,i=n[o]+n[o+1];for(i>0?((s=t[o])<t[o+1]&&(s=t[o+1]),fo(e.numlines_s[o]+e.numlines_s[o+1]-1>0),(l=0|(i=20*(2*s-i)/(i*(e.numlines_s[o]+e.numlines_s[o+1]-1))))>a&&(l=a),r[o]=l):r[o]=0,o=1;o<e.npart_s-1;o++)if(i=n[o-1]+n[o]+n[o+1],fo(o+1<e.npart_s),i>0){var s,l;(s=t[o-1])<t[o]&&(s=t[o]),s<t[o+1]&&(s=t[o+1]),fo(e.numlines_s[o-1]+e.numlines_s[o]+e.numlines_s[o+1]-1>0),(l=0|(i=20*(3*s-i)/(i*(e.numlines_s[o-1]+e.numlines_s[o]+e.numlines_s[o+1]-1))))>a&&(l=a),r[o]=l}else r[o]=0;fo(o==e.npart_s-1),(i=n[o-1]+n[o])>0?((s=t[o-1])<t[o]&&(s=t[o]),fo(e.numlines_s[o-1]+e.numlines_s[o]-1>0),(l=0|(i=20*(2*s-i)/(i*(e.numlines_s[o-1]+e.numlines_s[o]-1))))>a&&(l=a),r[o]=l):r[o]=0,fo(o==e.npart_s-1)}(c,u,A,h),s=l=0;l<c.npart_s;l++){var g,v,C,y,k,w=c.s3ind_s[l][0],x=c.s3ind_s[l][1];for(g=h[w],v=1,y=c.s3_ss[s]*n[w]*d[h[w]],++s,++w;w<=x;)g+=h[w],v+=1,y=m(y,C=c.s3_ss[s]*n[w]*d[h[w]],w-l),++s,++w;y*=k=.5*d[g=(1+2*g)/(2*v)],r[l]=y,c.nb_s2[a][l]=c.nb_s1[a][l],c.nb_s1[a][l]=y,C=u[l],C*=c.minval_s[l],C*=k,r[l]>C&&(r[l]=C),c.masking_lower>1&&(r[l]*=c.masking_lower),r[l]>n[l]&&(r[l]=n[l]),c.masking_lower<1&&(r[l]*=c.masking_lower),fo(r[l]>=0)}for(;l<_o.CBANDS;++l)n[l]=0,r[l]=0}function D(e,t,n,r,a){var o,i=uo(_o.CBANDS),s=uo(_o.CBANDS),l=ho(_o.CBANDS+2);E(e,t,n,i,s),M(e,i,s,l);var c=0;for(o=0;o<e.npart_l;o++){var u,A,h,f=e.s3ind[o][0],p=e.s3ind[o][1],_=0,b=0;for(_=l[f],b+=1,A=e.s3_ll[c]*n[f]*d[l[f]],++c,++f;f<=p;)_+=l[f],b+=1,A=m(A,u=e.s3_ll[c]*n[f]*d[l[f]],f-o),++c,++f;if(A*=h=.5*d[_=(1+2*_)/(2*b)],e.blocktype_old[1&a]==_o.SHORT_TYPE){var g=2*e.nb_1[a][o];r[o]=g>0?Math.min(A,g):Math.min(A,.3*n[o])}else{var v=16*e.nb_2[a][o],C=2*e.nb_1[a][o];v<=0&&(v=A),C<=0&&(C=A),g=e.blocktype_old[1&a]==_o.NORM_TYPE?Math.min(C,v):C,r[o]=Math.min(A,g)}e.nb_2[a][o]=e.nb_1[a][o],e.nb_1[a][o]=A,u=i[o],u*=e.minval_l[o],u*=h,r[o]>u&&(r[o]=u),e.masking_lower>1&&(r[o]*=e.masking_lower),r[o]>n[o]&&(r[o]=n[o]),e.masking_lower<1&&(r[o]*=e.masking_lower),fo(r[o]>=0)}for(;o<_o.CBANDS;++o)n[o]=0,r[o]=0}function P(e,t,n,r,a,o,i){for(var s,l,c=2*o,u=o>0?Math.pow(10,a):1,d=0;d<i;++d){var A=e[2][d],h=e[3][d],f=t[0][d],p=t[1][d],_=t[2][d],m=t[3][d];if(f<=1.58*p&&p<=1.58*f){var b=n[d]*h,g=n[d]*A;l=Math.max(_,Math.min(m,b)),s=Math.max(m,Math.min(_,g))}else l=_,s=m;if(o>0){var v,C,y=r[d]*u;if(v=Math.min(Math.max(f,y),Math.max(p,y)),(C=(_=Math.max(l,y))+(m=Math.max(s,y)))>0&&v*c<C){var k=v*c/C;_*=k,m*=k}l=Math.min(_,l),s=Math.min(m,s)}l>A&&(l=A),s>h&&(s=h),t[2][d]=l,t[3][d]=s}}function j(e,t){var n;return(n=e>=0?27*-e:e*t)<=-72?0:Math.exp(n*o)}function V(e){var t,n,r,a,o=0;for(o=0;j(o,e)>1e-20;o-=1);for(r=o,a=0;Math.abs(a-r)>1e-12;)j(o=(a+r)/2,e)>0?a=o:r=o;for(t=r,o=0,o=0;j(o,e)>1e-20;o+=1);for(r=0,a=o;Math.abs(a-r)>1e-12;)j(o=(a+r)/2,e)>0?r=o:a=o;n=a;var i,s=0,l=1e3;for(i=0;i<=l;++i)s+=j(o=t+i*(n-t)/l,e);return(l+1)/(s*(n-t))}function z(e){var t,n,r,a;return t=e,n=(t*=t>=0?3:1.5)>=.5&&t<=2.5?8*((a=t-.5)*a-2*a):0,(r=15.811389+7.5*(t+=.474)-17.5*Math.sqrt(1+t*t))<=-60?0:(t=Math.exp((n+r)*o),t/=.6609193)}function F(e){return e<0&&(e=0),e*=.001,13*Math.atan(.76*e)+3.5*Math.atan(e*e/56.25)}function q(e,t,n,r,a,o,i,s,l,c,u,d){var A,h=uo(_o.CBANDS+1),f=s/(d>15?1152:384),p=ho(_o.HBLKSIZE);s/=l;var _=0,m=0;for(A=0;A<_o.CBANDS;A++){var b;for(M=F(s*_),h[A]=s*_,b=_;F(s*b)-M<.34&&b<=l/2;b++);for(e[A]=b-_,m=A+1;_<b;)fo(_<_o.HBLKSIZE),p[_++]=A;if(_>l/2){_=l/2,++A;break}}fo(A<_o.CBANDS),h[A]=s*_;for(var g=0;g<d;g++){var v,C,y,k,w;y=c[g],k=c[g+1],(v=0|Math.floor(.5+u*(y-.5)))<0&&(v=0),(C=0|Math.floor(.5+u*(k-.5)))>l/2&&(C=l/2),n[g]=(p[v]+p[C])/2,t[g]=p[C];var x=f*k;i[g]=(x-h[t[g]])/(h[t[g]+1]-h[t[g]]),i[g]<0?i[g]=0:i[g]>1&&(i[g]=1),w=F(s*c[g]*u),w=Math.min(w,15.5)/15.5,o[g]=Math.pow(10,1.25*(1-Math.cos(Math.PI*w))-2.5)}_=0;for(var E=0;E<m;E++){var M,B,S=e[E];M=F(s*_),B=F(s*(_+S-1)),r[E]=.5*(M+B),M=F(s*(_-.5)),B=F(s*(_+S-.5)),a[E]=B-M,_+=S}return m}function G(e,t,n,r,a,o){var i,s=Ao([_o.CBANDS,_o.CBANDS]),l=0;if(o)for(var c=0;c<t;c++)for(i=0;i<t;i++){var u=z(n[c]-n[i])*r[i];s[c][i]=u*a[c]}else for(i=0;i<t;i++){var d=15+Math.min(21/n[i],12),A=V(d);for(c=0;c<t;c++)u=A*j(n[c]-n[i],d)*r[i],s[c][i]=u*a[c]}for(c=0;c<t;c++){for(i=0;i<t&&!(s[c][i]>0);i++);for(e[c][0]=i,i=t-1;i>0&&!(s[c][i]>0);i--);e[c][1]=i,l+=e[c][1]-e[c][0]+1}var h=uo(l),f=0;for(c=0;c<t;c++)for(i=e[c][0];i<=e[c][1];i++)h[f++]=s[c][i];return h}function H(e){var t=F(e);return t=Math.min(t,15.5)/15.5,Math.pow(10,1.25*(1-Math.cos(Math.PI*t))-2.5)}function Y(e,t){return e<-.3&&(e=3410),e/=1e3,e=Math.max(.1,e),3.64*Math.pow(e,-.8)-6.8*Math.exp(-.6*Math.pow(e-3.4,2))+6*Math.exp(-.15*Math.pow(e-8.7,2))+.001*(.6+.04*t)*Math.pow(e,4)}this.L3psycho_anal_vbr=function(t,n,r,o,i,s,l,c,u,d){var A=t.internal_flags,h=uo(_o.HBLKSIZE),f=Ao([3,_o.HBLKSIZE_s]),p=Ao([2,_o.BLKSIZE]),_=Ao([2,3,_o.BLKSIZE_s]),m=Ao([4,_o.CBANDS]),v=Ao([4,_o.CBANDS]),y=Ao([4,3]),w=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],E=ho(2),M=t.mode==e.JOINT_STEREO?4:A.channels_out;(function(t,n,r,o,i,s,l,c,u,d){for(var A=Ao([2,576]),h=t.internal_flags,f=h.channels_out,p=t.mode==e.JOINT_STEREO?4:f,_=0;_<f;_++){firbuf=n[_];for(var m=r+576-350-a+192,b=0;b<576;b++){var g,v;g=firbuf[m+b+10],v=0;for(var C=0;C<9;C+=2)g+=I[C]*(firbuf[m+b+C]+firbuf[m+b+a-C]),v+=I[C+1]*(firbuf[m+b+C+1]+firbuf[m+b+a-C-1]);A[_][b]=g+v}i[o][_].en.assign(h.en[_]),i[o][_].thm.assign(h.thm[_]),p>2&&(s[o][_].en.assign(h.en[_+2]),s[o][_].thm.assign(h.thm[_+2]))}for(_=0;_<p;_++){var y=uo(12),k=uo(12),w=[0,0,0,0],x=A[1&_],E=0,M=3==_?h.nsPsy.attackthre_s:h.nsPsy.attackthre,B=1;if(2==_)for(b=0,C=576;C>0;++b,--C){var S=A[0][b],T=A[1][b];A[0][b]=S+T,A[1][b]=S-T}for(b=0;b<3;b++)k[b]=h.nsPsy.last_en_subshort[_][b+6],fo(h.nsPsy.last_en_subshort[_][b+4]>0),y[b]=k[b]/h.nsPsy.last_en_subshort[_][b+4],w[0]+=k[b];for(b=0;b<9;b++){for(var R=E+64,O=1;E<R;E++)O<Math.abs(x[E])&&(O=Math.abs(x[E]));h.nsPsy.last_en_subshort[_][b]=k[b+3]=O,w[1+b/3]+=O,O>k[b+3-2]?(fo(k[b+3-2]>0),O/=k[b+3-2]):O=k[b+3-2]>10*O?k[b+3-2]/(10*O):0,y[b+3]=O}for(b=0;b<3;++b){var N=k[3*b+3]+k[3*b+4]+k[3*b+5],L=1;6*k[3*b+5]<N&&(L*=.5,6*k[3*b+4]<N&&(L*=.5)),c[_][b]=L}if(t.analysis){var D=y[0];for(b=1;b<12;b++)D<y[b]&&(D=y[b]);h.pinfo.ers[o][_]=h.pinfo.ers_save[_],h.pinfo.ers_save[_]=D}for(b=0;b<12;b++)0==u[_][b/3]&&y[b]>M&&(u[_][b/3]=b%3+1);for(b=1;b<4;b++){var P=w[b-1],j=w[b];Math.max(P,j)<4e4&&P<1.7*j&&j<1.7*P&&(1==b&&u[_][0]<=u[_][b]&&(u[_][0]=0),u[_][b]=0)}u[_][0]<=h.nsPsy.lastAttacks[_]&&(u[_][0]=0),(3==h.nsPsy.lastAttacks[_]||u[_][0]+u[_][1]+u[_][2]+u[_][3]!=0)&&(B=0,0!=u[_][1]&&0!=u[_][0]&&(u[_][1]=0),0!=u[_][2]&&0!=u[_][1]&&(u[_][2]=0),0!=u[_][3]&&0!=u[_][2]&&(u[_][3]=0)),_<2?d[_]=B:0==B&&(d[0]=d[1]=0),l[_]=h.tot_ener[_]}})(t,n,r,o,i,s,u,y,w,E),function(e,t){var n=e.internal_flags;e.short_blocks==so.short_block_coupled&&(0==t[0]||0==t[1])&&(t[0]=t[1]=0);for(var r=0;r<n.channels_out;r++)e.short_blocks==so.short_block_dispensed&&(t[r]=1),e.short_blocks==so.short_block_forced&&(t[r]=0)}(t,E);for(var B=0;B<M;B++)S(t,n,r,B,o,h,p,V=1&B),R(t,o,B,h),0!=E[V]?D(A,h,m[B],v[B],B):N(A,B);for(E[0]+E[1]==2&&t.mode==e.JOINT_STEREO&&P(m,v,A.mld_cb_l,A.ATH.cb_l,t.ATHlower*A.ATH.adjust,t.msfix,A.npart_l),B=0;B<M;B++)0!=E[V=1&B]&&g(A,m[B],v[B],B);for(var j=0;j<3;j++){for(B=0;B<M;++B)0!=E[V=1&B]?O(A,B,j):(T(t,n,r,B,j,f,_,V),L(t,f,m[B],v[B],B,j));for(E[0]+E[1]==0&&t.mode==e.JOINT_STEREO&&P(m,v,A.mld_cb_s,A.ATH.cb_s,t.ATHlower*A.ATH.adjust,t.msfix,A.npart_s),B=0;B<M;++B)0==E[V=1&B]&&b(A,m[B],v[B],B,j)}for(B=0;B<M;B++){var V;if(0==E[V=1&B])for(var z=0;z<_o.SBMAX_s;z++){var F=uo(3);for(j=0;j<3;j++){var q=A.thm[B].s[z][j];if(q*=.8,w[B][j]>=2||1==w[B][j+1]){var G=0!=j?j-1:2,H=C(A.thm[B].s[z][G],q,.36);q=Math.min(q,H)}else 1==w[B][j]?(G=0!=j?j-1:2,H=C(A.thm[B].s[z][G],q,.18),q=Math.min(q,H)):(0!=j&&3==w[B][j-1]||0==j&&3==A.nsPsy.lastAttacks[B])&&(G=2!=j?j+1:0,H=C(A.thm[B].s[z][G],q,.18),q=Math.min(q,H));q*=y[B][j],F[j]=q}for(j=0;j<3;j++)A.thm[B].s[z][j]=F[j]}}for(B=0;B<M;B++)A.nsPsy.lastAttacks[B]=w[B][2];for(function(e,t,n){for(var r=e.internal_flags,a=0;a<r.channels_out;a++){var o=_o.NORM_TYPE;0!=t[a]?(fo(r.blocktype_old[a]!=_o.START_TYPE),r.blocktype_old[a]==_o.SHORT_TYPE&&(o=_o.STOP_TYPE)):(o=_o.SHORT_TYPE,r.blocktype_old[a]==_o.NORM_TYPE&&(r.blocktype_old[a]=_o.START_TYPE),r.blocktype_old[a]==_o.STOP_TYPE&&(r.blocktype_old[a]=_o.SHORT_TYPE)),n[a]=r.blocktype_old[a],r.blocktype_old[a]=o}}(t,E,d),B=0;B<M;B++){var Y,X,W,Z;B>1?(Y=c,X=-2,W=_o.NORM_TYPE,(d[0]==_o.SHORT_TYPE||d[1]==_o.SHORT_TYPE)&&(W=_o.SHORT_TYPE),Z=s[o][B-2]):(Y=l,X=0,W=d[B],Z=i[o][B]),W==_o.SHORT_TYPE?Y[X+B]=k(Z,A.masking_lower):Y[X+B]=x(Z,A.masking_lower),t.analysis&&(A.pinfo.pe[o][B]=Y[X+B])}return 0},this.psymodel_init=function(e){var r,a,o=e.internal_flags,i=!0,s=13,d=24,A=0,h=0,f=-8.25,p=-4.5,_=uo(_o.CBANDS),m=uo(_o.CBANDS),b=uo(_o.CBANDS),g=e.out_samplerate;switch(e.experimentalZ){default:case 0:i=!0;break;case 1:i=!(e.VBR==oo.vbr_mtrh||e.VBR==oo.vbr_mt);break;case 2:i=!1;break;case 3:s=8,A=-1.75,h=-.0125,f=-8.25,p=-2.25}for(o.ms_ener_ratio_old=.25,o.blocktype_old[0]=o.blocktype_old[1]=_o.NORM_TYPE,r=0;r<4;++r){for(var v=0;v<_o.CBANDS;++v)o.nb_1[r][v]=1e20,o.nb_2[r][v]=1e20,o.nb_s1[r][v]=o.nb_s2[r][v]=1;for(var C=0;C<_o.SBMAX_l;C++)o.en[r].l[C]=1e20,o.thm[r].l[C]=1e20;for(v=0;v<3;++v){for(C=0;C<_o.SBMAX_s;C++)o.en[r].s[C][v]=1e20,o.thm[r].s[C][v]=1e20;o.nsPsy.lastAttacks[r]=0}for(v=0;v<9;v++)o.nsPsy.last_en_subshort[r][v]=10}for(o.loudness_sq_save[0]=o.loudness_sq_save[1]=0,o.npart_l=q(o.numlines_l,o.bo_l,o.bm_l,_,m,o.mld_l,o.PSY.bo_l_weight,g,_o.BLKSIZE,o.scalefac_band.l,_o.BLKSIZE/1152,_o.SBMAX_l),fo(o.npart_l<_o.CBANDS),r=0;r<o.npart_l;r++){var y=A;_[r]>=s&&(y=h*(_[r]-s)/(d-s)+A*(d-_[r])/(d-s)),b[r]=Math.pow(10,y/10),o.numlines_l[r]>0?o.rnumlines_l[r]=1/o.numlines_l[r]:o.rnumlines_l[r]=0}for(o.s3_ll=G(o.s3ind,o.npart_l,_,m,b,i),v=0,r=0;r<o.npart_l;r++){x=io.MAX_VALUE;for(var k=0;k<o.numlines_l[r];k++,v++){var w=g*v/(1e3*_o.BLKSIZE);E=this.ATHformula(1e3*w,e)-20,E=Math.pow(10,.1*E),x>(E*=o.numlines_l[r])&&(x=E)}o.ATH.cb_l[r]=x,(x=20*_[r]/10-20)>6&&(x=100),x<-15&&(x=-15),x-=8,o.minval_l[r]=Math.pow(10,x/10)*o.numlines_l[r]}for(o.npart_s=q(o.numlines_s,o.bo_s,o.bm_s,_,m,o.mld_s,o.PSY.bo_s_weight,g,_o.BLKSIZE_s,o.scalefac_band.s,_o.BLKSIZE_s/384,_o.SBMAX_s),fo(o.npart_s<_o.CBANDS),v=0,r=0;r<o.npart_s;r++){var x;for(y=f,_[r]>=s&&(y=p*(_[r]-s)/(d-s)+f*(d-_[r])/(d-s)),b[r]=Math.pow(10,y/10),x=io.MAX_VALUE,k=0;k<o.numlines_s[r];k++,v++){var E;w=g*v/(1e3*_o.BLKSIZE_s),E=this.ATHformula(1e3*w,e)-20,E=Math.pow(10,.1*E),x>(E*=o.numlines_s[r])&&(x=E)}o.ATH.cb_s[r]=x,x=7*_[r]/12-7,_[r]>12&&(x*=1+3.1*Math.log(1+x)),_[r]<12&&(x*=1+2.3*Math.log(1-x)),x<-15&&(x=-15),x-=8,o.minval_s[r]=Math.pow(10,x/10)*o.numlines_s[r]}o.s3_ss=G(o.s3ind_s,o.npart_s,_,m,b,i),l=Math.pow(10,9/16),c=Math.pow(10,1.5),u=Math.pow(10,1.5),t.init_fft(o),o.decay=Math.exp(-1*n/(.01*g/192)),a=3.5,2&e.exp_nspsytune&&(a=1),Math.abs(e.msfix)>0&&(a=e.msfix),e.msfix=a;for(var M=0;M<o.npart_l;M++)o.s3ind[M][1]>o.npart_l-1&&(o.s3ind[M][1]=o.npart_l-1);var B=576*o.mode_gr/g;if(o.ATH.decay=Math.pow(10,-1.2*B),o.ATH.adjust=.01,o.ATH.adjustLimit=1,fo(o.bo_l[_o.SBMAX_l-1]<=o.npart_l),fo(o.bo_s[_o.SBMAX_s-1]<=o.npart_s),-1!=e.ATHtype){var S=e.out_samplerate/_o.BLKSIZE,T=0;for(w=0,r=0;r<_o.BLKSIZE/2;++r)w+=S,o.ATH.eql_w[r]=1/Math.pow(10,this.ATHformula(w,e)/10),T+=o.ATH.eql_w[r];for(T=1/T,r=_o.BLKSIZE/2;--r>=0;)o.ATH.eql_w[r]*=T}for(M=v=0;M<o.npart_s;++M)for(r=0;r<o.numlines_s[M];++r)++v;for(M=v=0;M<o.npart_l;++M)for(r=0;r<o.numlines_l[M];++r)++v;for(v=0,r=0;r<o.npart_l;r++)w=g*(v+o.numlines_l[r]/2)/(1*_o.BLKSIZE),o.mld_cb_l[r]=H(w),v+=o.numlines_l[r];for(;r<_o.CBANDS;++r)o.mld_cb_l[r]=1;for(v=0,r=0;r<o.npart_s;r++)w=g*(v+o.numlines_s[r]/2)/(1*_o.BLKSIZE_s),o.mld_cb_s[r]=H(w),v+=o.numlines_s[r];for(;r<_o.CBANDS;++r)o.mld_cb_s[r]=1;return 0},this.ATHformula=function(e,t){var n;switch(t.ATHtype){case 0:n=Y(e,9);break;case 1:n=Y(e,-1);break;case 2:default:n=Y(e,0);break;case 3:n=Y(e,1)+6;break;case 4:n=Y(e,t.ATHcurve)}return n}},bo=eo,go=function(){this.class_id=0,this.num_samples=0,this.num_channels=0,this.in_samplerate=0,this.out_samplerate=0,this.scale=0,this.scale_left=0,this.scale_right=0,this.analysis=!1,this.bWriteVbrTag=!1,this.decode_only=!1,this.quality=0,this.mode=bo.STEREO,this.force_ms=!1,this.free_format=!1,this.findReplayGain=!1,this.decode_on_the_fly=!1,this.write_id3tag_automatic=!1,this.brate=0,this.compression_ratio=0,this.copyright=0,this.original=0,this.extension=0,this.emphasis=0,this.error_protection=0,this.strict_ISO=!1,this.disable_reservoir=!1,this.quant_comp=0,this.quant_comp_short=0,this.experimentalY=!1,this.experimentalZ=0,this.exp_nspsytune=0,this.preset=0,this.VBR=null,this.VBR_q_frac=0,this.VBR_q=0,this.VBR_mean_bitrate_kbps=0,this.VBR_min_bitrate_kbps=0,this.VBR_max_bitrate_kbps=0,this.VBR_hard_min=0,this.lowpassfreq=0,this.highpassfreq=0,this.lowpasswidth=0,this.highpasswidth=0,this.maskingadjust=0,this.maskingadjust_short=0,this.ATHonly=!1,this.ATHshort=!1,this.noATH=!1,this.ATHtype=0,this.ATHcurve=0,this.ATHlower=0,this.athaa_type=0,this.athaa_loudapprox=0,this.athaa_sensitivity=0,this.short_blocks=null,this.useTemporal=!1,this.interChRatio=0,this.msfix=0,this.tune=!1,this.tune_value_a=0,this.version=0,this.encoder_delay=0,this.encoder_padding=0,this.framesize=0,this.frameNum=0,this.lame_allocated_gfp=0,this.internal_flags=null},vo=to(),Co={};Co.SFBMAX=3*vo.SBMAX_s;var yo=Co,ko=Ua.new_float,wo=Ua.new_int,xo=yo,Eo=function(){this.xr=ko(576),this.l3_enc=wo(576),this.scalefac=wo(xo.SFBMAX),this.xrpow_max=0,this.part2_3_length=0,this.big_values=0,this.count1=0,this.global_gain=0,this.scalefac_compress=0,this.block_type=0,this.mixed_block_flag=0,this.table_select=wo(3),this.subblock_gain=wo(4),this.region0_count=0,this.region1_count=0,this.preflag=0,this.scalefac_scale=0,this.count1table_select=0,this.part2_length=0,this.sfb_lmax=0,this.sfb_smin=0,this.psy_lmax=0,this.sfbmax=0,this.psymax=0,this.sfbdivide=0,this.width=wo(xo.SFBMAX),this.window=wo(xo.SFBMAX),this.count1bits=0,this.sfb_partition_table=null,this.slen=wo(4),this.max_nonzero_coeff=0;var e=this;function t(e){return new Int32Array(e)}this.assign=function(n){e.xr=function(e){return new Float32Array(e)}(n.xr),e.l3_enc=t(n.l3_enc),e.scalefac=t(n.scalefac),e.xrpow_max=n.xrpow_max,e.part2_3_length=n.part2_3_length,e.big_values=n.big_values,e.count1=n.count1,e.global_gain=n.global_gain,e.scalefac_compress=n.scalefac_compress,e.block_type=n.block_type,e.mixed_block_flag=n.mixed_block_flag,e.table_select=t(n.table_select),e.subblock_gain=t(n.subblock_gain),e.region0_count=n.region0_count,e.region1_count=n.region1_count,e.preflag=n.preflag,e.scalefac_scale=n.scalefac_scale,e.count1table_select=n.count1table_select,e.part2_length=n.part2_length,e.sfb_lmax=n.sfb_lmax,e.sfb_smin=n.sfb_smin,e.psy_lmax=n.psy_lmax,e.sfbmax=n.sfbmax,e.psymax=n.psymax,e.sfbdivide=n.sfbdivide,e.width=t(n.width),e.window=t(n.window),e.count1bits=n.count1bits,e.sfb_partition_table=n.sfb_partition_table.slice(0),e.slen=t(n.slen),e.max_nonzero_coeff=n.max_nonzero_coeff}},Mo=Ua.new_int,Bo=Eo,So=Ua.System,To=Ua.new_int,Ro=to(),Io=function(e,t,n,r){this.l=To(1+Ro.SBMAX_l),this.s=To(1+Ro.SBMAX_s),this.psfb21=To(1+Ro.PSFB21),this.psfb12=To(1+Ro.PSFB12);var a=this.l,o=this.s;4==arguments.length&&(this.arrL=arguments[0],this.arrS=arguments[1],this.arr21=arguments[2],this.arr12=arguments[3],So.arraycopy(this.arrL,0,a,0,Math.min(this.arrL.length,this.l.length)),So.arraycopy(this.arrS,0,o,0,Math.min(this.arrS.length,this.s.length)),So.arraycopy(this.arr21,0,this.psfb21,0,Math.min(this.arr21.length,this.psfb21.length)),So.arraycopy(this.arr12,0,this.psfb12,0,Math.min(this.arr12.length,this.psfb12.length)))},Oo=Ua.new_float,No=Ua.new_float_n,Lo=Ua.new_int,Do=to(),Po=Ua.new_byte,jo=Ua.new_double,Vo=Ua.new_float,zo=Ua.new_float_n,Fo=Ua.new_int,qo=Ua.new_int_n,Go=function(){this.tt=[[null,null],[null,null]],this.main_data_begin=0,this.private_bits=0,this.resvDrain_pre=0,this.resvDrain_post=0,this.scfsi=[Mo(4),Mo(4)];for(var e=0;e<2;e++)for(var t=0;t<2;t++)this.tt[e][t]=new Bo},Ho=Io,Yo=function(){this.last_en_subshort=No([4,9]),this.lastAttacks=Lo(4),this.pefirbuf=Oo(19),this.longfact=Oo(Do.SBMAX_l),this.shortfact=Oo(Do.SBMAX_s),this.attackthre=0,this.attackthre_s=0},Xo=function(){this.sum=0,this.seen=0,this.want=0,this.pos=0,this.size=0,this.bag=null,this.nVbrNumFrames=0,this.nBytesWritten=0,this.TotalFrameSize=0},Wo=Qa(),Zo=to(),Uo=yo;function Qo(){function e(){this.write_timing=0,this.ptr=0,this.buf=Po(40)}this.Class_ID=0,this.lame_encode_frame_init=0,this.iteration_init_init=0,this.fill_buffer_resample_init=0,this.mfbuf=zo([2,Qo.MFSIZE]),this.mode_gr=0,this.channels_in=0,this.channels_out=0,this.resample_ratio=0,this.mf_samples_to_encode=0,this.mf_size=0,this.VBR_min_bitrate=0,this.VBR_max_bitrate=0,this.bitrate_index=0,this.samplerate_index=0,this.mode_ext=0,this.lowpass1=0,this.lowpass2=0,this.highpass1=0,this.highpass2=0,this.noise_shaping=0,this.noise_shaping_amp=0,this.substep_shaping=0,this.psymodel=0,this.noise_shaping_stop=0,this.subblock_gain=0,this.use_best_huffman=0,this.full_outer_loop=0,this.l3_side=new Go,this.ms_ratio=Vo(2),this.padding=0,this.frac_SpF=0,this.slot_lag=0,this.tag_spec=null,this.nMusicCRC=0,this.OldValue=Fo(2),this.CurrentStep=Fo(2),this.masking_lower=0,this.bv_scf=Fo(576),this.pseudohalf=Fo(Uo.SFBMAX),this.sfb21_extra=!1,this.inbuf_old=new Array(2),this.blackfilt=new Array(2*Qo.BPC+1),this.itime=jo(2),this.sideinfo_len=0,this.sb_sample=zo([2,2,18,Zo.SBLIMIT]),this.amp_filter=Vo(32),this.header=new Array(Qo.MAX_HEADER_BUF),this.h_ptr=0,this.w_ptr=0,this.ancillary_flag=0,this.ResvSize=0,this.ResvMax=0,this.scalefac_band=new Ho,this.minval_l=Vo(Zo.CBANDS),this.minval_s=Vo(Zo.CBANDS),this.nb_1=zo([4,Zo.CBANDS]),this.nb_2=zo([4,Zo.CBANDS]),this.nb_s1=zo([4,Zo.CBANDS]),this.nb_s2=zo([4,Zo.CBANDS]),this.s3_ss=null,this.s3_ll=null,this.decay=0,this.thm=new Array(4),this.en=new Array(4),this.tot_ener=Vo(4),this.loudness_sq=zo([2,2]),this.loudness_sq_save=Vo(2),this.mld_l=Vo(Zo.SBMAX_l),this.mld_s=Vo(Zo.SBMAX_s),this.bm_l=Fo(Zo.SBMAX_l),this.bo_l=Fo(Zo.SBMAX_l),this.bm_s=Fo(Zo.SBMAX_s),this.bo_s=Fo(Zo.SBMAX_s),this.npart_l=0,this.npart_s=0,this.s3ind=qo([Zo.CBANDS,2]),this.s3ind_s=qo([Zo.CBANDS,2]),this.numlines_s=Fo(Zo.CBANDS),this.numlines_l=Fo(Zo.CBANDS),this.rnumlines_l=Vo(Zo.CBANDS),this.mld_cb_l=Vo(Zo.CBANDS),this.mld_cb_s=Vo(Zo.CBANDS),this.numlines_s_num1=0,this.numlines_l_num1=0,this.pe=Vo(4),this.ms_ratio_s_old=0,this.ms_ratio_l_old=0,this.ms_ener_ratio_old=0,this.blocktype_old=Fo(2),this.nsPsy=new Yo,this.VBR_seek_table=new Xo,this.ATH=null,this.PSY=null,this.nogap_total=0,this.nogap_current=0,this.decode_on_the_fly=!0,this.findReplayGain=!0,this.findPeakSample=!0,this.PeakSample=0,this.RadioGain=0,this.AudiophileGain=0,this.rgdata=null,this.noclipGainChange=0,this.noclipScale=0,this.bitrate_stereoMode_Hist=qo([16,5]),this.bitrate_blockType_Hist=qo([16,6]),this.pinfo=null,this.hip=null,this.in_buffer_nsamples=0,this.in_buffer_0=null,this.in_buffer_1=null,this.iteration_loop=null;for(var t=0;t<this.en.length;t++)this.en[t]=new Wo;for(t=0;t<this.thm.length;t++)this.thm[t]=new Wo;for(t=0;t<this.header.length;t++)this.header[t]=new e}Qo.MFSIZE=3456+Zo.ENCDELAY-Zo.MDCTDELAY,Qo.MAX_HEADER_BUF=256,Qo.MAX_BITS_PER_CHANNEL=4095,Qo.MAX_BITS_PER_GRANULE=7680,Qo.BPC=320;var Ko=Qo,Jo=Ua.new_float,$o=to(),ei=function(){this.useAdjust=0,this.aaSensitivityP=0,this.adjust=0,this.adjustLimit=0,this.decay=0,this.floor=0,this.l=Jo($o.SBMAX_l),this.s=Jo($o.SBMAX_s),this.psfb21=Jo($o.PSFB21),this.psfb12=Jo($o.PSFB12),this.cb_l=Jo($o.CBANDS),this.cb_s=Jo($o.CBANDS),this.eql_w=Jo($o.BLKSIZE/2)},ti=Ua.System,ni=Ua.Arrays;function ri(){var e=ri.RMS_WINDOW_TIME_NUMERATOR,t=ri.RMS_WINDOW_TIME_DENOMINATOR,n=[[.038575994352,-3.84664617118067,-.02160367184185,7.81501653005538,-.00123395316851,-11.34170355132042,-9291677959e-14,13.05504219327545,-.01655260341619,-12.28759895145294,.02161526843274,9.4829380631979,-.02074045215285,-5.87257861775999,.00594298065125,2.75465861874613,.00306428023191,-.86984376593551,.00012025322027,.13919314567432,.00288463683916],[.0541865640643,-3.47845948550071,-.02911007808948,6.36317777566148,-.00848709379851,-8.54751527471874,-.00851165645469,9.4769360780128,-.00834990904936,-8.81498681370155,.02245293253339,6.85401540936998,-.02596338512915,-4.39470996079559,.01624864962975,2.19611684890774,-.00240879051584,-.75104302451432,.00674613682247,.13149317958808,-.00187763777362],[.15457299681924,-2.37898834973084,-.09331049056315,2.84868151156327,-.06247880153653,-2.64577170229825,.02163541888798,2.23697657451713,-.05588393329856,-1.67148153367602,.04781476674921,1.00595954808547,.00222312597743,-.45953458054983,.03174092540049,.16378164858596,-.01390589421898,-.05032077717131,.00651420667831,.0234789740702,-.00881362733839],[.30296907319327,-1.61273165137247,-.22613988682123,1.0797749225997,-.08587323730772,-.2565625775407,.03282930172664,-.1627671912044,-.00915702933434,-.22638893773906,-.02364141202522,.39120800788284,-.00584456039913,-.22138138954925,.06276101321749,.04500235387352,-828086748e-14,.02005851806501,.00205861885564,.00302439095741,-.02950134983287],[.33642304856132,-1.49858979367799,-.2557224142557,.87350271418188,-.11828570177555,.12205022308084,.11921148675203,-.80774944671438,-.07834489609479,.47854794562326,-.0046997791438,-.12453458140019,-.0058950022444,-.04067510197014,.05724228140351,.08333755284107,.00832043980773,-.04237348025746,-.0163538138454,.02977207319925,-.0176017656815],[.4491525660845,-.62820619233671,-.14351757464547,.29661783706366,-.22784394429749,-.372563729424,-.01419140100551,.00213767857124,.04078262797139,-.42029820170918,-.12398163381748,.22199650564824,.04097565135648,.00613424350682,.10478503600251,.06747620744683,-.01863887810927,.05784820375801,-.03193428438915,.03222754072173,.00541907748707],[.56619470757641,-1.04800335126349,-.75464456939302,.29156311971249,.1624213774223,-.26806001042947,.16744243493672,.00819999645858,-.18901604199609,.45054734505008,.3093178284183,-.33032403314006,-.27562961986224,.0673936833311,.00647310677246,-.04784254229033,.08647503780351,.01639907836189,-.0378898455484,.01807364323573,-.00588215443421],[.58100494960553,-.51035327095184,-.53174909058578,-.31863563325245,-.14289799034253,-.20256413484477,.17520704835522,.1472815413433,.02377945217615,.38952639978999,.15558449135573,-.23313271880868,-.25344790059353,-.05246019024463,.01628462406333,-.02505961724053,.06920467763959,.02442357316099,-.03721611395801,.01818801111503,-.00749618797172],[.53648789255105,-.2504987195602,-.42163034350696,-.43193942311114,-.00275953611929,-.03424681017675,.04267842219415,-.04678328784242,-.10214864179676,.26408300200955,.14590772289388,.15113130533216,-.02459864859345,-.17556493366449,-.11202315195388,-.18823009262115,-.04060034127,.05477720428674,.0478866554818,.0470440968812,-.02217936801134]],r=[[.98621192462708,-1.97223372919527,-1.97242384925416,.97261396931306,.98621192462708],[.98500175787242,-1.96977855582618,-1.97000351574484,.9702284756635,.98500175787242],[.97938932735214,-1.95835380975398,-1.95877865470428,.95920349965459,.97938932735214],[.97531843204928,-1.95002759149878,-1.95063686409857,.95124613669835,.97531843204928],[.97316523498161,-1.94561023566527,-1.94633046996323,.94705070426118,.97316523498161],[.96454515552826,-1.92783286977036,-1.92909031105652,.93034775234268,.96454515552826],[.96009142950541,-1.91858953033784,-1.92018285901082,.92177618768381,.96009142950541],[.95856916599601,-1.9154210807478,-1.91713833199203,.91885558323625,.95856916599601],[.94597685600279,-1.88903307939452,-1.89195371200558,.89487434461664,.94597685600279]];function a(e,t,n,r,a,o){for(;0!=a--;)n[r]=1e-10+e[t+0]*o[0]-n[r-1]*o[1]+e[t-1]*o[2]-n[r-2]*o[3]+e[t-2]*o[4]-n[r-3]*o[5]+e[t-3]*o[6]-n[r-4]*o[7]+e[t-4]*o[8]-n[r-5]*o[9]+e[t-5]*o[10]-n[r-6]*o[11]+e[t-6]*o[12]-n[r-7]*o[13]+e[t-7]*o[14]-n[r-8]*o[15]+e[t-8]*o[16]-n[r-9]*o[17]+e[t-9]*o[18]-n[r-10]*o[19]+e[t-10]*o[20],++r,++t}function o(e,t,n,r,a,o){for(;0!=a--;)n[r]=e[t+0]*o[0]-n[r-1]*o[1]+e[t-1]*o[2]-n[r-2]*o[3]+e[t-2]*o[4],++r,++t}function i(e){return e*e}this.InitGainAnalysis=function(n,r){return function(n,r){for(var a=0;a<MAX_ORDER;a++)n.linprebuf[a]=n.lstepbuf[a]=n.loutbuf[a]=n.rinprebuf[a]=n.rstepbuf[a]=n.routbuf[a]=0;switch(0|r){case 48e3:n.reqindex=0;break;case 44100:n.reqindex=1;break;case 32e3:n.reqindex=2;break;case 24e3:n.reqindex=3;break;case 22050:n.reqindex=4;break;case 16e3:n.reqindex=5;break;case 12e3:n.reqindex=6;break;case 11025:n.reqindex=7;break;case 8e3:n.reqindex=8;break;default:return INIT_GAIN_ANALYSIS_ERROR}return n.sampleWindow=0|(r*e+t-1)/t,n.lsum=0,n.rsum=0,n.totsamp=0,ni.ill(n.A,0),INIT_GAIN_ANALYSIS_OK}(n,r)!=INIT_GAIN_ANALYSIS_OK?INIT_GAIN_ANALYSIS_ERROR:(n.linpre=MAX_ORDER,n.rinpre=MAX_ORDER,n.lstep=MAX_ORDER,n.rstep=MAX_ORDER,n.lout=MAX_ORDER,n.rout=MAX_ORDER,ni.fill(n.B,0),INIT_GAIN_ANALYSIS_OK)},this.AnalyzeSamples=function(e,t,s,l,c,u,d){var A,h,f,p,_,m,b;if(0==u)return GAIN_ANALYSIS_OK;switch(b=0,_=u,d){case 1:l=t,c=s;break;case 2:break;default:return GAIN_ANALYSIS_ERROR}for(u<MAX_ORDER?(ti.arraycopy(t,s,e.linprebuf,MAX_ORDER,u),ti.arraycopy(l,c,e.rinprebuf,MAX_ORDER,u)):(ti.arraycopy(t,s,e.linprebuf,MAX_ORDER,MAX_ORDER),ti.arraycopy(l,c,e.rinprebuf,MAX_ORDER,MAX_ORDER));_>0;){m=_>e.sampleWindow-e.totsamp?e.sampleWindow-e.totsamp:_,b<MAX_ORDER?(A=e.linpre+b,h=e.linprebuf,f=e.rinpre+b,p=e.rinprebuf,m>MAX_ORDER-b&&(m=MAX_ORDER-b)):(A=s+b,h=t,f=c+b,p=l),a(h,A,e.lstepbuf,e.lstep+e.totsamp,m,n[e.reqindex]),a(p,f,e.rstepbuf,e.rstep+e.totsamp,m,n[e.reqindex]),o(e.lstepbuf,e.lstep+e.totsamp,e.loutbuf,e.lout+e.totsamp,m,r[e.reqindex]),o(e.rstepbuf,e.rstep+e.totsamp,e.routbuf,e.rout+e.totsamp,m,r[e.reqindex]),A=e.lout+e.totsamp,h=e.loutbuf,f=e.rout+e.totsamp,p=e.routbuf;for(var g=m%8;0!=g--;)e.lsum+=i(h[A++]),e.rsum+=i(p[f++]);for(g=m/8;0!=g--;)e.lsum+=i(h[A+0])+i(h[A+1])+i(h[A+2])+i(h[A+3])+i(h[A+4])+i(h[A+5])+i(h[A+6])+i(h[A+7]),A+=8,e.rsum+=i(p[f+0])+i(p[f+1])+i(p[f+2])+i(p[f+3])+i(p[f+4])+i(p[f+5])+i(p[f+6])+i(p[f+7]),f+=8;if(_-=m,b+=m,e.totsamp+=m,e.totsamp==e.sampleWindow){var v=10*ri.STEPS_per_dB*Math.log10((e.lsum+e.rsum)/e.totsamp*.5+1e-37),C=v<=0?0:0|v;C>=e.A.length&&(C=e.A.length-1),e.A[C]++,e.lsum=e.rsum=0,ti.arraycopy(e.loutbuf,e.totsamp,e.loutbuf,0,MAX_ORDER),ti.arraycopy(e.routbuf,e.totsamp,e.routbuf,0,MAX_ORDER),ti.arraycopy(e.lstepbuf,e.totsamp,e.lstepbuf,0,MAX_ORDER),ti.arraycopy(e.rstepbuf,e.totsamp,e.rstepbuf,0,MAX_ORDER),e.totsamp=0}if(e.totsamp>e.sampleWindow)return GAIN_ANALYSIS_ERROR}return u<MAX_ORDER?(ti.arraycopy(e.linprebuf,u,e.linprebuf,0,MAX_ORDER-u),ti.arraycopy(e.rinprebuf,u,e.rinprebuf,0,MAX_ORDER-u),ti.arraycopy(t,s,e.linprebuf,MAX_ORDER-u,u),ti.arraycopy(l,c,e.rinprebuf,MAX_ORDER-u,u)):(ti.arraycopy(t,s+u-MAX_ORDER,e.linprebuf,0,MAX_ORDER),ti.arraycopy(l,c+u-MAX_ORDER,e.rinprebuf,0,MAX_ORDER)),GAIN_ANALYSIS_OK},this.GetTitleGain=function(e){for(var t=function(e,t){var n,r=0;for(n=0;n<t;n++)r+=e[n];if(0==r)return GAIN_NOT_ENOUGH_SAMPLES;var a=0|Math.ceil(r*(1-.95));for(n=t;n-- >0&&!((a-=e[n])<=0););return 64.82-n/ri.STEPS_per_dB}(e.A,e.A.length),n=0;n<e.A.length;n++)e.B[n]+=e.A[n],e.A[n]=0;for(n=0;n<MAX_ORDER;n++)e.linprebuf[n]=e.lstepbuf[n]=e.loutbuf[n]=e.rinprebuf[n]=e.rstepbuf[n]=e.routbuf[n]=0;return e.totsamp=0,e.lsum=e.rsum=0,t}}ri.STEPS_per_dB=100,ri.MAX_dB=120,ri.GAIN_NOT_ENOUGH_SAMPLES=-24601,ri.GAIN_ANALYSIS_ERROR=0,ri.GAIN_ANALYSIS_OK=1,ri.INIT_GAIN_ANALYSIS_ERROR=0,ri.INIT_GAIN_ANALYSIS_OK=1,ri.YULE_ORDER=10,ri.MAX_ORDER=ri.YULE_ORDER,ri.MAX_SAMP_FREQ=48e3,ri.RMS_WINDOW_TIME_NUMERATOR=1,ri.RMS_WINDOW_TIME_DENOMINATOR=20,ri.MAX_SAMPLES_PER_WINDOW=ri.MAX_SAMP_FREQ*ri.RMS_WINDOW_TIME_NUMERATOR/ri.RMS_WINDOW_TIME_DENOMINATOR+1;var ai=ri,oi=Ua.new_float,ii=Ua.new_int,si=ai,li=function(){this.linprebuf=oi(2*si.MAX_ORDER),this.linpre=0,this.lstepbuf=oi(si.MAX_SAMPLES_PER_WINDOW+si.MAX_ORDER),this.lstep=0,this.loutbuf=oi(si.MAX_SAMPLES_PER_WINDOW+si.MAX_ORDER),this.lout=0,this.rinprebuf=oi(2*si.MAX_ORDER),this.rinpre=0,this.rstepbuf=oi(si.MAX_SAMPLES_PER_WINDOW+si.MAX_ORDER),this.rstep=0,this.routbuf=oi(si.MAX_SAMPLES_PER_WINDOW+si.MAX_ORDER),this.rout=0,this.sampleWindow=0,this.totsamp=0,this.lsum=0,this.rsum=0,this.freqindex=0,this.first=0,this.A=ii(0|si.STEPS_per_dB*si.MAX_dB),this.B=ii(0|si.STEPS_per_dB*si.MAX_dB)},ci=function(e){this.bits=e},ui=Ua.new_float,di=Ua.new_int,Ai=Ua.assert,hi=ci,fi=to(),pi=yo,_i=Ko,mi=function(e){var t=e;this.quantize=t,this.iteration_loop=function(e,t,n,r){var a,o=e.internal_flags,i=ui(pi.SFBMAX),s=ui(576),l=di(2),c=0,u=o.l3_side,d=new hi(c);this.quantize.rv.ResvFrameBegin(e,d),c=d.bits;for(var A=0;A<o.mode_gr;A++){a=this.quantize.qupvt.on_pe(e,t,l,c,A,A),o.mode_ext==fi.MPG_MD_MS_LR&&(this.quantize.ms_convert(o.l3_side,A),this.quantize.qupvt.reduce_side(l,n[A],c,a));for(var h=0;h<o.channels_out;h++){var f,p,_=u.tt[A][h];_.block_type!=fi.SHORT_TYPE?(f=0,p=o.PSY.mask_adjust-f):(f=0,p=o.PSY.mask_adjust_short-f),o.masking_lower=Math.pow(10,.1*p),this.quantize.init_outer_loop(o,_),this.quantize.init_xrpow(o,_,s)&&(this.quantize.qupvt.calc_xmin(e,r[A][h],_,i),this.quantize.outer_loop(e,_,i,s,h,l[h])),this.quantize.iteration_finish_one(o,A,h),Ai(_.part2_3_length<=_i.MAX_BITS_PER_CHANNEL),Ai(_.part2_3_length<=l[h])}}this.quantize.rv.ResvFrameEnd(o,c)}};function bi(e,t,n,r){this.xlen=e,this.linmax=t,this.table=n,this.hlen=r}var gi={t1HB:[1,1,1,0],t2HB:[1,2,1,3,1,1,3,2,0],t3HB:[3,2,1,1,1,1,3,2,0],t5HB:[1,2,6,5,3,1,4,4,7,5,7,1,6,1,1,0],t6HB:[7,3,5,1,6,2,3,2,5,4,4,1,3,3,2,0],t7HB:[1,2,10,19,16,10,3,3,7,10,5,3,11,4,13,17,8,4,12,11,18,15,11,2,7,6,9,14,3,1,6,4,5,3,2,0],t8HB:[3,4,6,18,12,5,5,1,2,16,9,3,7,3,5,14,7,3,19,17,15,13,10,4,13,5,8,11,5,1,12,4,4,1,1,0],t9HB:[7,5,9,14,15,7,6,4,5,5,6,7,7,6,8,8,8,5,15,6,9,10,5,1,11,7,9,6,4,1,14,4,6,2,6,0],t10HB:[1,2,10,23,35,30,12,17,3,3,8,12,18,21,12,7,11,9,15,21,32,40,19,6,14,13,22,34,46,23,18,7,20,19,33,47,27,22,9,3,31,22,41,26,21,20,5,3,14,13,10,11,16,6,5,1,9,8,7,8,4,4,2,0],t11HB:[3,4,10,24,34,33,21,15,5,3,4,10,32,17,11,10,11,7,13,18,30,31,20,5,25,11,19,59,27,18,12,5,35,33,31,58,30,16,7,5,28,26,32,19,17,15,8,14,14,12,9,13,14,9,4,1,11,4,6,6,6,3,2,0],t12HB:[9,6,16,33,41,39,38,26,7,5,6,9,23,16,26,11,17,7,11,14,21,30,10,7,17,10,15,12,18,28,14,5,32,13,22,19,18,16,9,5,40,17,31,29,17,13,4,2,27,12,11,15,10,7,4,1,27,12,8,12,6,3,1,0],t13HB:[1,5,14,21,34,51,46,71,42,52,68,52,67,44,43,19,3,4,12,19,31,26,44,33,31,24,32,24,31,35,22,14,15,13,23,36,59,49,77,65,29,40,30,40,27,33,42,16,22,20,37,61,56,79,73,64,43,76,56,37,26,31,25,14,35,16,60,57,97,75,114,91,54,73,55,41,48,53,23,24,58,27,50,96,76,70,93,84,77,58,79,29,74,49,41,17,47,45,78,74,115,94,90,79,69,83,71,50,59,38,36,15,72,34,56,95,92,85,91,90,86,73,77,65,51,44,43,42,43,20,30,44,55,78,72,87,78,61,46,54,37,30,20,16,53,25,41,37,44,59,54,81,66,76,57,54,37,18,39,11,35,33,31,57,42,82,72,80,47,58,55,21,22,26,38,22,53,25,23,38,70,60,51,36,55,26,34,23,27,14,9,7,34,32,28,39,49,75,30,52,48,40,52,28,18,17,9,5,45,21,34,64,56,50,49,45,31,19,12,15,10,7,6,3,48,23,20,39,36,35,53,21,16,23,13,10,6,1,4,2,16,15,17,27,25,20,29,11,17,12,16,8,1,1,0,1],t15HB:[7,12,18,53,47,76,124,108,89,123,108,119,107,81,122,63,13,5,16,27,46,36,61,51,42,70,52,83,65,41,59,36,19,17,15,24,41,34,59,48,40,64,50,78,62,80,56,33,29,28,25,43,39,63,55,93,76,59,93,72,54,75,50,29,52,22,42,40,67,57,95,79,72,57,89,69,49,66,46,27,77,37,35,66,58,52,91,74,62,48,79,63,90,62,40,38,125,32,60,56,50,92,78,65,55,87,71,51,73,51,70,30,109,53,49,94,88,75,66,122,91,73,56,42,64,44,21,25,90,43,41,77,73,63,56,92,77,66,47,67,48,53,36,20,71,34,67,60,58,49,88,76,67,106,71,54,38,39,23,15,109,53,51,47,90,82,58,57,48,72,57,41,23,27,62,9,86,42,40,37,70,64,52,43,70,55,42,25,29,18,11,11,118,68,30,55,50,46,74,65,49,39,24,16,22,13,14,7,91,44,39,38,34,63,52,45,31,52,28,19,14,8,9,3,123,60,58,53,47,43,32,22,37,24,17,12,15,10,2,1,71,37,34,30,28,20,17,26,21,16,10,6,8,6,2,0],t16HB:[1,5,14,44,74,63,110,93,172,149,138,242,225,195,376,17,3,4,12,20,35,62,53,47,83,75,68,119,201,107,207,9,15,13,23,38,67,58,103,90,161,72,127,117,110,209,206,16,45,21,39,69,64,114,99,87,158,140,252,212,199,387,365,26,75,36,68,65,115,101,179,164,155,264,246,226,395,382,362,9,66,30,59,56,102,185,173,265,142,253,232,400,388,378,445,16,111,54,52,100,184,178,160,133,257,244,228,217,385,366,715,10,98,48,91,88,165,157,148,261,248,407,397,372,380,889,884,8,85,84,81,159,156,143,260,249,427,401,392,383,727,713,708,7,154,76,73,141,131,256,245,426,406,394,384,735,359,710,352,11,139,129,67,125,247,233,229,219,393,743,737,720,885,882,439,4,243,120,118,115,227,223,396,746,742,736,721,712,706,223,436,6,202,224,222,218,216,389,386,381,364,888,443,707,440,437,1728,4,747,211,210,208,370,379,734,723,714,1735,883,877,876,3459,865,2,377,369,102,187,726,722,358,711,709,866,1734,871,3458,870,434,0,12,10,7,11,10,17,11,9,13,12,10,7,5,3,1,3],t24HB:[15,13,46,80,146,262,248,434,426,669,653,649,621,517,1032,88,14,12,21,38,71,130,122,216,209,198,327,345,319,297,279,42,47,22,41,74,68,128,120,221,207,194,182,340,315,295,541,18,81,39,75,70,134,125,116,220,204,190,178,325,311,293,271,16,147,72,69,135,127,118,112,210,200,188,352,323,306,285,540,14,263,66,129,126,119,114,214,202,192,180,341,317,301,281,262,12,249,123,121,117,113,215,206,195,185,347,330,308,291,272,520,10,435,115,111,109,211,203,196,187,353,332,313,298,283,531,381,17,427,212,208,205,201,193,186,177,169,320,303,286,268,514,377,16,335,199,197,191,189,181,174,333,321,305,289,275,521,379,371,11,668,184,183,179,175,344,331,314,304,290,277,530,383,373,366,10,652,346,171,168,164,318,309,299,287,276,263,513,375,368,362,6,648,322,316,312,307,302,292,284,269,261,512,376,370,364,359,4,620,300,296,294,288,282,273,266,515,380,374,369,365,361,357,2,1033,280,278,274,267,264,259,382,378,372,367,363,360,358,356,0,43,20,19,17,15,13,11,9,7,6,4,7,5,3,1,3],t32HB:[1,10,8,20,12,20,16,32,14,12,24,0,28,16,24,16],t33HB:[15,28,26,48,22,40,36,64,14,24,20,32,12,16,8,0],t1l:[1,4,3,5],t2l:[1,4,7,4,5,7,6,7,8],t3l:[2,3,7,4,4,7,6,7,8],t5l:[1,4,7,8,4,5,8,9,7,8,9,10,8,8,9,10],t6l:[3,4,6,8,4,4,6,7,5,6,7,8,7,7,8,9],t7l:[1,4,7,9,9,10,4,6,8,9,9,10,7,7,9,10,10,11,8,9,10,11,11,11,8,9,10,11,11,12,9,10,11,12,12,12],t8l:[2,4,7,9,9,10,4,4,6,10,10,10,7,6,8,10,10,11,9,10,10,11,11,12,9,9,10,11,12,12,10,10,11,11,13,13],t9l:[3,4,6,7,9,10,4,5,6,7,8,10,5,6,7,8,9,10,7,7,8,9,9,10,8,8,9,9,10,11,9,9,10,10,11,11],t10l:[1,4,7,9,10,10,10,11,4,6,8,9,10,11,10,10,7,8,9,10,11,12,11,11,8,9,10,11,12,12,11,12,9,10,11,12,12,12,12,12,10,11,12,12,13,13,12,13,9,10,11,12,12,12,13,13,10,10,11,12,12,13,13,13],t11l:[2,4,6,8,9,10,9,10,4,5,6,8,10,10,9,10,6,7,8,9,10,11,10,10,8,8,9,11,10,12,10,11,9,10,10,11,11,12,11,12,9,10,11,12,12,13,12,13,9,9,9,10,11,12,12,12,9,9,10,11,12,12,12,12],t12l:[4,4,6,8,9,10,10,10,4,5,6,7,9,9,10,10,6,6,7,8,9,10,9,10,7,7,8,8,9,10,10,10,8,8,9,9,10,10,10,11,9,9,10,10,10,11,10,11,9,9,9,10,10,11,11,12,10,10,10,11,11,11,11,12],t13l:[1,5,7,8,9,10,10,11,10,11,12,12,13,13,14,14,4,6,8,9,10,10,11,11,11,11,12,12,13,14,14,14,7,8,9,10,11,11,12,12,11,12,12,13,13,14,15,15,8,9,10,11,11,12,12,12,12,13,13,13,13,14,15,15,9,9,11,11,12,12,13,13,12,13,13,14,14,15,15,16,10,10,11,12,12,12,13,13,13,13,14,13,15,15,16,16,10,11,12,12,13,13,13,13,13,14,14,14,15,15,16,16,11,11,12,13,13,13,14,14,14,14,15,15,15,16,18,18,10,10,11,12,12,13,13,14,14,14,14,15,15,16,17,17,11,11,12,12,13,13,13,15,14,15,15,16,16,16,18,17,11,12,12,13,13,14,14,15,14,15,16,15,16,17,18,19,12,12,12,13,14,14,14,14,15,15,15,16,17,17,17,18,12,13,13,14,14,15,14,15,16,16,17,17,17,18,18,18,13,13,14,15,15,15,16,16,16,16,16,17,18,17,18,18,14,14,14,15,15,15,17,16,16,19,17,17,17,19,18,18,13,14,15,16,16,16,17,16,17,17,18,18,21,20,21,18],t15l:[3,5,6,8,8,9,10,10,10,11,11,12,12,12,13,14,5,5,7,8,9,9,10,10,10,11,11,12,12,12,13,13,6,7,7,8,9,9,10,10,10,11,11,12,12,13,13,13,7,8,8,9,9,10,10,11,11,11,12,12,12,13,13,13,8,8,9,9,10,10,11,11,11,11,12,12,12,13,13,13,9,9,9,10,10,10,11,11,11,11,12,12,13,13,13,14,10,9,10,10,10,11,11,11,11,12,12,12,13,13,14,14,10,10,10,11,11,11,11,12,12,12,12,12,13,13,13,14,10,10,10,11,11,11,11,12,12,12,12,13,13,14,14,14,10,10,11,11,11,11,12,12,12,13,13,13,13,14,14,14,11,11,11,11,12,12,12,12,12,13,13,13,13,14,15,14,11,11,11,11,12,12,12,12,13,13,13,13,14,14,14,15,12,12,11,12,12,12,13,13,13,13,13,13,14,14,15,15,12,12,12,12,12,13,13,13,13,14,14,14,14,14,15,15,13,13,13,13,13,13,13,13,14,14,14,14,15,15,14,15,13,13,13,13,13,13,13,14,14,14,14,14,15,15,15,15],t16_5l:[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,11,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,11,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,12,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,13,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,12,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,13,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,13,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,13,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,13,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,14,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,13,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,14,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,14,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,14,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,14,11,11,11,12,12,13,13,13,14,14,14,14,14,14,14,12],t16l:[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,10,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,10,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,11,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,12,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,11,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,12,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,12,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,12,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,12,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,13,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,12,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,13,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,13,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,13,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,13,10,10,10,11,11,12,12,12,13,13,13,13,13,13,13,10],t24l:[4,5,7,8,9,10,10,11,11,12,12,12,12,12,13,10,5,6,7,8,9,10,10,11,11,11,12,12,12,12,12,10,7,7,8,9,9,10,10,11,11,11,11,12,12,12,13,9,8,8,9,9,10,10,10,11,11,11,11,12,12,12,12,9,9,9,9,10,10,10,10,11,11,11,12,12,12,12,13,9,10,9,10,10,10,10,11,11,11,11,12,12,12,12,12,9,10,10,10,10,10,11,11,11,11,12,12,12,12,12,13,9,11,10,10,10,11,11,11,11,12,12,12,12,12,13,13,10,11,11,11,11,11,11,11,11,11,12,12,12,12,13,13,10,11,11,11,11,11,11,11,12,12,12,12,12,13,13,13,10,12,11,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,10,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,10,13,12,12,12,12,12,12,13,13,13,13,13,13,13,13,10,9,9,9,9,9,9,9,9,9,9,9,10,10,10,10,6],t32l:[1,5,5,7,5,8,7,9,5,7,7,9,7,9,9,10],t33l:[4,5,5,6,5,6,6,7,5,6,6,7,6,7,7,8]};gi.ht=[new bi(0,0,null,null),new bi(2,0,gi.t1HB,gi.t1l),new bi(3,0,gi.t2HB,gi.t2l),new bi(3,0,gi.t3HB,gi.t3l),new bi(0,0,null,null),new bi(4,0,gi.t5HB,gi.t5l),new bi(4,0,gi.t6HB,gi.t6l),new bi(6,0,gi.t7HB,gi.t7l),new bi(6,0,gi.t8HB,gi.t8l),new bi(6,0,gi.t9HB,gi.t9l),new bi(8,0,gi.t10HB,gi.t10l),new bi(8,0,gi.t11HB,gi.t11l),new bi(8,0,gi.t12HB,gi.t12l),new bi(16,0,gi.t13HB,gi.t13l),new bi(0,0,null,gi.t16_5l),new bi(16,0,gi.t15HB,gi.t15l),new bi(1,1,gi.t16HB,gi.t16l),new bi(2,3,gi.t16HB,gi.t16l),new bi(3,7,gi.t16HB,gi.t16l),new bi(4,15,gi.t16HB,gi.t16l),new bi(6,63,gi.t16HB,gi.t16l),new bi(8,255,gi.t16HB,gi.t16l),new bi(10,1023,gi.t16HB,gi.t16l),new bi(13,8191,gi.t16HB,gi.t16l),new bi(4,15,gi.t24HB,gi.t24l),new bi(5,31,gi.t24HB,gi.t24l),new bi(6,63,gi.t24HB,gi.t24l),new bi(7,127,gi.t24HB,gi.t24l),new bi(8,255,gi.t24HB,gi.t24l),new bi(9,511,gi.t24HB,gi.t24l),new bi(11,2047,gi.t24HB,gi.t24l),new bi(13,8191,gi.t24HB,gi.t24l),new bi(0,0,gi.t32HB,gi.t32l),new bi(0,0,gi.t33HB,gi.t33l)],gi.largetbl=[65540,327685,458759,589832,655369,655370,720906,720907,786443,786444,786444,851980,851980,851980,917517,655370,262149,393222,524295,589832,655369,720906,720906,720907,786443,786443,786444,851980,917516,851980,917516,655370,458759,524295,589832,655369,720905,720906,786442,786443,851979,786443,851979,851980,851980,917516,917517,720905,589832,589832,655369,720905,720906,786442,786442,786443,851979,851979,917515,917516,917516,983052,983052,786441,655369,655369,720905,720906,786442,786442,851978,851979,851979,917515,917516,917516,983052,983052,983053,720905,655370,655369,720906,720906,786442,851978,851979,917515,851979,917515,917516,983052,983052,983052,1048588,786441,720906,720906,720906,786442,851978,851979,851979,851979,917515,917516,917516,917516,983052,983052,1048589,786441,720907,720906,786442,786442,851979,851979,851979,917515,917516,983052,983052,983052,983052,1114125,1114125,786442,720907,786443,786443,851979,851979,851979,917515,917515,983051,983052,983052,983052,1048588,1048589,1048589,786442,786443,786443,786443,851979,851979,917515,917515,983052,983052,983052,983052,1048588,983053,1048589,983053,851978,786444,851979,786443,851979,917515,917516,917516,917516,983052,1048588,1048588,1048589,1114125,1114125,1048589,786442,851980,851980,851979,851979,917515,917516,983052,1048588,1048588,1048588,1048588,1048589,1048589,983053,1048589,851978,851980,917516,917516,917516,917516,983052,983052,983052,983052,1114124,1048589,1048589,1048589,1048589,1179661,851978,983052,917516,917516,917516,983052,983052,1048588,1048588,1048589,1179661,1114125,1114125,1114125,1245197,1114125,851978,917517,983052,851980,917516,1048588,1048588,983052,1048589,1048589,1114125,1179661,1114125,1245197,1114125,1048589,851978,655369,655369,655369,720905,720905,786441,786441,786441,851977,851977,851977,851978,851978,851978,851978,655366],gi.table23=[65538,262147,458759,262148,327684,458759,393222,458759,524296],gi.table56=[65539,262148,458758,524296,262148,327684,524294,589831,458757,524294,589831,655368,524295,524295,589832,655369],gi.bitrate_table=[[0,8,16,24,32,40,48,56,64,80,96,112,128,144,160,-1],[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],[0,8,16,24,32,40,48,56,64,-1,-1,-1,-1,-1,-1,-1]],gi.samplerate_table=[[22050,24e3,16e3,-1],[44100,48e3,32e3,-1],[11025,12e3,8e3,-1]],gi.scfsi_band=[0,6,11,16,21];var vi,Ci,yi,ki,wi,xi,Ei,Mi,Bi=gi;function Si(){if(Ci)return vi;Ci=1;var e=Io,t=Ua.VbrMode,n=Ua.Float,r=Ua.Util,a=Ua.new_float,o=Ua.new_int,i=Ua.assert,s=to(),l=ci,c=Ko;function u(){var d=Ri(),A=null,h=null,f=null;function p(e){return i(0<=e+u.Q_MAX2&&e<u.Q_MAX),C[e+u.Q_MAX2]}this.setModules=function(e,t,n){A=e,h=t,f=n},this.IPOW20=function(e){return i(0<=e&&e<u.Q_MAX),y[e]};var _=2220446049250313e-31,m=u.IXMAX_VAL+2,b=u.Q_MAX,g=u.Q_MAX2;u.LARGE_BITS,this.nr_of_sfb_block=[[[6,5,5,5],[9,9,9,9],[6,9,9,9]],[[6,5,7,3],[9,9,12,6],[6,9,12,6]],[[11,10,0,0],[18,18,0,0],[15,18,0,0]],[[7,7,7,0],[12,12,12,0],[6,15,12,0]],[[6,6,6,3],[12,9,9,6],[6,12,9,6]],[[8,8,5,0],[15,12,9,0],[6,18,9,0]]];var v=[0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,2,2,3,3,3,2,0];this.pretab=v,this.sfBandIndex=[new e([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,24,32,42,56,74,100,132,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new e([0,6,12,18,24,30,36,44,54,66,80,96,114,136,162,194,232,278,332,394,464,540,576],[0,4,8,12,18,26,36,48,62,80,104,136,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new e([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new e([0,4,8,12,16,20,24,30,36,44,52,62,74,90,110,134,162,196,238,288,342,418,576],[0,4,8,12,16,22,30,40,52,66,84,106,136,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new e([0,4,8,12,16,20,24,30,36,42,50,60,72,88,106,128,156,190,230,276,330,384,576],[0,4,8,12,16,22,28,38,50,64,80,100,126,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new e([0,4,8,12,16,20,24,30,36,44,54,66,82,102,126,156,194,240,296,364,448,550,576],[0,4,8,12,16,22,30,42,58,78,104,138,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new e([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new e([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new e([0,12,24,36,48,60,72,88,108,132,160,192,232,280,336,400,476,566,568,570,572,574,576],[0,8,16,24,36,52,72,96,124,160,162,164,166,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0])];var C=a(b+g+1),y=a(b),k=a(m),w=a(m);function x(e,t){var n=f.ATHformula(t,e);return n-=100,Math.pow(10,n/10+e.ATHlower)}function E(e){this.s=e}this.adj43=w,this.iteration_init=function(e){var t,r=e.internal_flags,a=r.l3_side;if(0==r.iteration_init_init){for(r.iteration_init_init=1,a.main_data_begin=0,function(e){for(var t=e.internal_flags.ATH.l,r=e.internal_flags.ATH.psfb21,a=e.internal_flags.ATH.s,o=e.internal_flags.ATH.psfb12,i=e.internal_flags,l=e.out_samplerate,c=0;c<s.SBMAX_l;c++){var u=i.scalefac_band.l[c],d=i.scalefac_band.l[c+1];t[c]=n.MAX_VALUE;for(var A=u;A<d;A++){var h=x(e,A*l/1152);t[c]=Math.min(t[c],h)}}for(c=0;c<s.PSFB21;c++)for(u=i.scalefac_band.psfb21[c],d=i.scalefac_band.psfb21[c+1],r[c]=n.MAX_VALUE,A=u;A<d;A++)h=x(e,A*l/1152),r[c]=Math.min(r[c],h);for(c=0;c<s.SBMAX_s;c++){for(u=i.scalefac_band.s[c],d=i.scalefac_band.s[c+1],a[c]=n.MAX_VALUE,A=u;A<d;A++)h=x(e,A*l/384),a[c]=Math.min(a[c],h);a[c]*=i.scalefac_band.s[c+1]-i.scalefac_band.s[c]}for(c=0;c<s.PSFB12;c++){for(u=i.scalefac_band.psfb12[c],d=i.scalefac_band.psfb12[c+1],o[c]=n.MAX_VALUE,A=u;A<d;A++)h=x(e,A*l/384),o[c]=Math.min(o[c],h);o[c]*=i.scalefac_band.s[13]-i.scalefac_band.s[12]}if(e.noATH){for(c=0;c<s.SBMAX_l;c++)t[c]=1e-20;for(c=0;c<s.PSFB21;c++)r[c]=1e-20;for(c=0;c<s.SBMAX_s;c++)a[c]=1e-20;for(c=0;c<s.PSFB12;c++)o[c]=1e-20}i.ATH.floor=10*Math.log10(x(e,-1))}(e),k[0]=0,t=1;t<m;t++)k[t]=Math.pow(t,4/3);for(t=0;t<m-1;t++)w[t]=t+1-Math.pow(.5*(k[t]+k[t+1]),.75);for(w[t]=.5,t=0;t<b;t++)y[t]=Math.pow(2,-.1875*(t-210));for(t=0;t<=b+g;t++)C[t]=Math.pow(2,.25*(t-210-g));var o,i,l,c;for(A.huffman_init(r),(t=e.exp_nspsytune>>2&63)>=32&&(t-=64),o=Math.pow(10,t/4/10),(t=e.exp_nspsytune>>8&63)>=32&&(t-=64),i=Math.pow(10,t/4/10),(t=e.exp_nspsytune>>14&63)>=32&&(t-=64),l=Math.pow(10,t/4/10),(t=e.exp_nspsytune>>20&63)>=32&&(t-=64),c=l*Math.pow(10,t/4/10),t=0;t<s.SBMAX_l;t++)u=t<=6?o:t<=13?i:t<=20?l:c,r.nsPsy.longfact[t]=u;for(t=0;t<s.SBMAX_s;t++){var u;u=t<=5?o:t<=10?i:t<=11?l:c,r.nsPsy.shortfact[t]=u}}},this.on_pe=function(e,t,n,r,a,i){var s,u,d=e.internal_flags,A=0,f=o(2),p=new l(A),_=h.ResvMaxBits(e,r,p,i),m=(A=p.bits)+_;for(m>c.MAX_BITS_PER_GRANULE&&(m=c.MAX_BITS_PER_GRANULE),s=0,u=0;u<d.channels_out;++u)n[u]=Math.min(c.MAX_BITS_PER_CHANNEL,A/d.channels_out),f[u]=0|n[u]*t[a][u]/700-n[u],f[u]>3*r/4&&(f[u]=3*r/4),f[u]<0&&(f[u]=0),f[u]+n[u]>c.MAX_BITS_PER_CHANNEL&&(f[u]=Math.max(0,c.MAX_BITS_PER_CHANNEL-n[u])),s+=f[u];if(s>_)for(u=0;u<d.channels_out;++u)f[u]=_*f[u]/s;for(u=0;u<d.channels_out;++u)n[u]+=f[u],_-=f[u];for(s=0,u=0;u<d.channels_out;++u)s+=n[u];if(s>c.MAX_BITS_PER_GRANULE)for(u=0;u<d.channels_out;++u)n[u]*=c.MAX_BITS_PER_GRANULE,n[u]/=s,n[u];return m},this.reduce_side=function(e,t,n,r){i(e[0]+e[1]<=c.MAX_BITS_PER_GRANULE);var a=.33*(.5-t)/.5;a<0&&(a=0),a>.5&&(a=.5);var o=0|.5*a*(e[0]+e[1]);o>c.MAX_BITS_PER_CHANNEL-e[0]&&(o=c.MAX_BITS_PER_CHANNEL-e[0]),o<0&&(o=0),e[1]>=125&&(e[1]-o>125?(e[0]<n&&(e[0]+=o),e[1]-=o):(e[0]+=e[1]-125,e[1]=125)),(o=e[0]+e[1])>r&&(e[0]=r*e[0]/o,e[1]=r*e[1]/o),i(e[0]<=c.MAX_BITS_PER_CHANNEL),i(e[1]<=c.MAX_BITS_PER_CHANNEL),i(e[0]+e[1]<=c.MAX_BITS_PER_GRANULE)},this.athAdjust=function(e,t,n){var a=90.30873362,o=r.FAST_LOG10_X(t,10),i=e*e,s=0;return o-=n,i>1e-20&&(s=1+r.FAST_LOG10_X(i,10/a)),s<0&&(s=0),o*=s,o+=n+a-94.82444863,Math.pow(10,.1*o)},this.calc_xmin=function(e,n,r,a){var o,i=0,l=e.internal_flags,c=0,u=0,A=l.ATH,h=r.xr,f=e.VBR==t.vbr_mtrh?1:0,p=l.masking_lower;for((e.VBR==t.vbr_mtrh||e.VBR==t.vbr_mt)&&(p=1),o=0;o<r.psy_lmax;o++){w=(k=e.VBR==t.vbr_rh||e.VBR==t.vbr_mtrh?athAdjust(A.adjust,A.l[o],A.floor):A.adjust*A.l[o])/(v=r.width[o]),x=_,S=v>>1,B=0;do{B+=T=h[c]*h[c],x+=T<w?T:w,B+=R=h[++c]*h[c],x+=R<w?R:w,c++}while(--S>0);B>k&&u++,o==s.SBPSY_l&&x<(M=k*l.nsPsy.longfact[o])&&(x=M),0!=f&&(k=x),e.ATHonly||(E=n.en.l[o])>0&&(M=B*n.thm.l[o]*p/E,0!=f&&(M*=l.nsPsy.longfact[o]),k<M&&(k=M)),a[i++]=0!=f?k:k*l.nsPsy.longfact[o]}var m=575;if(r.block_type!=s.SHORT_TYPE)for(var b=576;0!=b--&&d.EQ(h[b],0);)m=b;r.max_nonzero_coeff=m;for(var g=r.sfb_smin;o<r.psymax;g++,o+=3){var v,C,y;for(y=e.VBR==t.vbr_rh||e.VBR==t.vbr_mtrh?athAdjust(A.adjust,A.s[g],A.floor):A.adjust*A.s[g],v=r.width[o],C=0;C<3;C++){var k,w,x,E,M,B=0,S=v>>1;w=y/v,x=_;do{var T,R;B+=T=h[c]*h[c],x+=T<w?T:w,B+=R=h[++c]*h[c],x+=R<w?R:w,c++}while(--S>0);B>y&&u++,g==s.SBPSY_s&&x<(M=y*l.nsPsy.shortfact[g])&&(x=M),k=0!=f?x:y,e.ATHonly||e.ATHshort||(E=n.en.s[g][C])>0&&(M=B*n.thm.s[g][C]*p/E,0!=f&&(M*=l.nsPsy.shortfact[g]),k<M&&(k=M)),a[i++]=0!=f?k:k*l.nsPsy.shortfact[g]}e.useTemporal&&(a[i-3]>a[i-3+1]&&(a[i-3+1]+=(a[i-3]-a[i-3+1])*l.decay),a[i-3+1]>a[i-3+2]&&(a[i-3+2]+=(a[i-3+1]-a[i-3+2])*l.decay))}return u},this.calc_noise_core=function(e,t,n,r){var o=0,i=t.s,s=e.l3_enc;if(i>e.count1)for(;0!=n--;)c=e.xr[i],i++,o+=c*c,c=e.xr[i],i++,o+=c*c;else if(i>e.big_values){var l=a(2);for(l[0]=0,l[1]=r;0!=n--;)c=Math.abs(e.xr[i])-l[s[i]],i++,o+=c*c,c=Math.abs(e.xr[i])-l[s[i]],i++,o+=c*c}else for(;0!=n--;){var c;c=Math.abs(e.xr[i])-k[s[i]]*r,i++,o+=c*c,c=Math.abs(e.xr[i])-k[s[i]]*r,i++,o+=c*c}return t.s=i,o},this.calc_noise=function(e,t,n,a,o){var i,s,l=0,c=0,u=0,d=0,A=0,h=-20,f=0,_=e.scalefac,m=0;for(a.over_SSD=0,i=0;i<e.psymax;i++){var b,g=e.global_gain-(_[m++]+(0!=e.preflag?v[i]:0)<<e.scalefac_scale+1)-8*e.subblock_gain[e.window[i]],C=0;if(null!=o&&o.step[i]==g)C=o.noise[i],f+=e.width[i],n[l++]=C/t[c++],C=o.noise_log[i];else{var y,k=p(g);s=e.width[i]>>1,f+e.width[i]>e.max_nonzero_coeff&&(s=(y=e.max_nonzero_coeff-f+1)>0?y>>1:0);var w=new E(f);C=this.calc_noise_core(e,w,s,k),f=w.s,null!=o&&(o.step[i]=g,o.noise[i]=C),C=n[l++]=C/t[c++],C=r.FAST_LOG10(Math.max(C,1e-20)),null!=o&&(o.noise_log[i]=C)}null!=o&&(o.global_gain=e.global_gain),A+=C,C>0&&(b=Math.max(0|10*C+.5,1),a.over_SSD+=b*b,u++,d+=C),h=Math.max(h,C)}return a.over_count=u,a.tot_noise=A,a.over_noise=d,a.max_noise=h,u},this.set_pinfo=function(e,t,n,r,o){var l,c,u,d,A,h=e.internal_flags,f=0==t.scalefac_scale?.5:1,p=t.scalefac,_=a(L3Side.SFBMAX),m=a(L3Side.SFBMAX),b=new CalcNoiseResult;calc_xmin(e,n,t,_),calc_noise(t,_,m,b,null);var g=0;for(c=t.sfb_lmax,t.block_type!=s.SHORT_TYPE&&0==t.mixed_block_flag&&(c=22),l=0;l<c;l++){var C=h.scalefac_band.l[l],y=(k=h.scalefac_band.l[l+1])-C;for(d=0;g<k;g++)d+=t.xr[g]*t.xr[g];d/=y,A=1e15,h.pinfo.en[r][o][l]=A*d,h.pinfo.xfsf[r][o][l]=A*_[l]*m[l]/y,n.en.l[l]>0&&!e.ATHonly?d/=n.en.l[l]:d=0,h.pinfo.thr[r][o][l]=A*Math.max(d*n.thm.l[l],h.ATH.l[l]),h.pinfo.LAMEsfb[r][o][l]=0,0!=t.preflag&&l>=11&&(h.pinfo.LAMEsfb[r][o][l]=-f*v[l]),l<s.SBPSY_l&&(i(p[l]>=0),h.pinfo.LAMEsfb[r][o][l]-=f*p[l])}if(t.block_type==s.SHORT_TYPE)for(c=l,l=t.sfb_smin;l<s.SBMAX_s;l++){C=h.scalefac_band.s[l],y=(k=h.scalefac_band.s[l+1])-C;for(var k,w=0;w<3;w++){for(d=0,u=C;u<k;u++)d+=t.xr[g]*t.xr[g],g++;d=Math.max(d/y,1e-20),A=1e15,h.pinfo.en_s[r][o][3*l+w]=A*d,h.pinfo.xfsf_s[r][o][3*l+w]=A*_[c]*m[c]/y,n.en.s[l][w]>0?d/=n.en.s[l][w]:d=0,(e.ATHonly||e.ATHshort)&&(d=0),h.pinfo.thr_s[r][o][3*l+w]=A*Math.max(d*n.thm.s[l][w],h.ATH.s[l]),h.pinfo.LAMEsfb_s[r][o][3*l+w]=-2*t.subblock_gain[w],l<s.SBPSY_s&&(h.pinfo.LAMEsfb_s[r][o][3*l+w]-=f*p[c]),c++}}h.pinfo.LAMEqss[r][o]=t.global_gain,h.pinfo.LAMEmainbits[r][o]=t.part2_3_length+t.part2_length,h.pinfo.LAMEsfbits[r][o]=t.part2_length,h.pinfo.over[r][o]=b.over_count,h.pinfo.max_noise[r][o]=10*b.max_noise,h.pinfo.over_noise[r][o]=10*b.over_noise,h.pinfo.tot_noise[r][o]=10*b.tot_noise,h.pinfo.over_SSD[r][o]=b.over_SSD}}return u.Q_MAX=257,u.Q_MAX2=116,u.LARGE_BITS=1e5,u.IXMAX_VAL=8206,vi=u}function Ti(){if(ki)return yi;ki=1;var e=Ua.System,t=Ua.Arrays,n=Ua.new_int,r=Ua.assert,a=to(),o=Bi,i=Eo,s=Si();return yi=function l(){var c=null;function u(e){this.bits=0|e}this.qupvt=null,this.setModules=function(e){this.qupvt=e,c=e};var d=[[0,0],[0,0],[0,0],[0,0],[0,0],[0,1],[1,1],[1,1],[1,2],[2,2],[2,3],[2,3],[3,4],[3,4],[3,4],[4,5],[4,5],[4,6],[5,6],[5,6],[5,7],[6,7],[6,7]];function A(e,t,n,r,a,o){var i=.5946/t;for(e>>=1;0!=e--;)a[o++]=i>n[r++]?0:1,a[o++]=i>n[r++]?0:1}function h(e,t,n,r,a,o){var i=(e>>=1)%2;for(e>>=1;0!=e--;){var s,l,u,d,A,h,f,p;s=n[r++]*t,l=n[r++]*t,A=0|s,u=n[r++]*t,h=0|l,d=n[r++]*t,f=0|u,s+=c.adj43[A],p=0|d,l+=c.adj43[h],a[o++]=0|s,u+=c.adj43[f],a[o++]=0|l,d+=c.adj43[p],a[o++]=0|u,a[o++]=0|d}0!=i&&(A=0|(s=n[r++]*t),h=0|(l=n[r++]*t),s+=c.adj43[A],l+=c.adj43[h],a[o++]=0|s,a[o++]=0|l)}var f=[1,2,5,7,7,10,10,13,13,13,13,13,13,13,13];function p(e,t,n,r){var a=function(e,t,n){var r=0,a=0;do{var o=e[t++],i=e[t++];r<o&&(r=o),a<i&&(a=i)}while(t<n);return r<a&&(r=a),r}(e,t,n);switch(a){case 0:return a;case 1:return function(e,t,n,r){var a=0,i=o.ht[1].hlen;do{var s=2*e[t+0]+e[t+1];t+=2,a+=i[s]}while(t<n);return r.bits+=a,1}(e,t,n,r);case 2:case 3:return function(e,t,n,r,a){var i,s,l=0,c=o.ht[r].xlen;s=2==r?o.table23:o.table56;do{var u=e[t+0]*c+e[t+1];t+=2,l+=s[u]}while(t<n);return i=65535&l,(l>>=16)>i&&(l=i,r++),a.bits+=l,r}(e,t,n,f[a-1],r);case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:return function(e,t,n,r,a){var i=0,s=0,l=0,c=o.ht[r].xlen,u=o.ht[r].hlen,d=o.ht[r+1].hlen,A=o.ht[r+2].hlen;do{var h=e[t+0]*c+e[t+1];t+=2,i+=u[h],s+=d[h],l+=A[h]}while(t<n);var f=r;return i>s&&(i=s,f++),i>l&&(i=l,f=r+2),a.bits+=i,f}(e,t,n,f[a-1],r);default:if(a>s.IXMAX_VAL)return r.bits=s.LARGE_BITS,-1;var i,l;for(a-=15,i=24;i<32&&!(o.ht[i].linmax>=a);i++);for(l=i-8;l<24&&!(o.ht[l].linmax>=a);l++);return function(e,t,n,r,a,i){var s,l=65536*o.ht[r].xlen+o.ht[a].xlen,c=0;do{var u=e[t++],d=e[t++];0!=u&&(u>14&&(u=15,c+=l),u*=16),0!=d&&(d>14&&(d=15,c+=l),u+=d),c+=o.largetbl[u]}while(t<n);return s=65535&c,(c>>=16)>s&&(c=s,r=a),i.bits+=c,r}(e,t,n,l,i,r)}}function _(e,t,n,r,o,i,s,l){for(var c=t.big_values,d=2;d<a.SBMAX_l+1;d++){var A=e.scalefac_band.l[d];if(A>=c)break;var h=o[d-2]+t.count1bits;if(n.part2_3_length<=h)break;var f=new u(h),_=p(r,A,c,f);h=f.bits,!(n.part2_3_length<=h)&&(n.assign(t),n.part2_3_length=h,n.region0_count=i[d-2],n.region1_count=d-2-i[d-2],n.table_select[0]=s[d-2],n.table_select[1]=l[d-2],n.table_select[2]=_)}}this.noquant_count_bits=function(e,t,n){var i=t.l3_enc,s=Math.min(576,t.max_nonzero_coeff+2>>1<<1);for(null!=n&&(n.sfb_count1=0);s>1&&!(i[s-1]|i[s-2]);s-=2);t.count1=s;for(var l=0,c=0;s>3;s-=4){var d;if((2147483647&(i[s-1]|i[s-2]|i[s-3]|i[s-4]))>1)break;d=2*(2*(2*i[s-4]+i[s-3])+i[s-2])+i[s-1],l+=o.t32l[d],c+=o.t33l[d]}var A=l;if(t.count1table_select=0,l>c&&(A=c,t.count1table_select=1),t.count1bits=A,t.big_values=s,0==s)return A;if(t.block_type==a.SHORT_TYPE)(l=3*e.scalefac_band.s[3])>t.big_values&&(l=t.big_values),c=t.big_values;else if(t.block_type==a.NORM_TYPE){if(l=t.region0_count=e.bv_scf[s-2],c=t.region1_count=e.bv_scf[s-1],r(l+c+2<a.SBPSY_l),c=e.scalefac_band.l[l+c+2],l=e.scalefac_band.l[l+1],c<s){var h=new u(A);t.table_select[2]=p(i,c,s,h),A=h.bits}}else t.region0_count=7,t.region1_count=a.SBMAX_l-1-7-1,(l=e.scalefac_band.l[8])>(c=s)&&(l=c);if(l=Math.min(l,s),c=Math.min(c,s),0<l&&(h=new u(A),t.table_select[0]=p(i,0,l,h),A=h.bits),l<c&&(h=new u(A),t.table_select[1]=p(i,l,c,h),A=h.bits),2==e.use_best_huffman&&(t.part2_3_length=A,best_huffman_divide(e,t),A=t.part2_3_length),null!=n&&t.block_type==a.NORM_TYPE){for(var f=0;e.scalefac_band.l[f]<t.big_values;)f++;n.sfb_count1=f}return A},this.count_bits=function(e,n,o,i){var l=o.l3_enc,u=s.IXMAX_VAL/c.IPOW20(o.global_gain);if(o.xrpow_max>u)return s.LARGE_BITS;if(function(e,n,o,i,s){var l,u,d,f=0,p=0,_=0,m=0,b=n,g=0,v=b,C=0,y=e,k=0;for(d=null!=s&&i.global_gain==s.global_gain,u=i.block_type==a.SHORT_TYPE?38:21,l=0;l<=u;l++){var w=-1;if((d||i.block_type==a.NORM_TYPE)&&(w=i.global_gain-(i.scalefac[l]+(0!=i.preflag?c.pretab[l]:0)<<i.scalefac_scale+1)-8*i.subblock_gain[i.window[l]]),r(i.width[l]>=0),d&&s.step[l]==w)0!=p&&(h(p,o,y,k,v,C),p=0),0!=_&&(A(_,o,y,k,v,C),_=0);else{var x,E=i.width[l];if(f+i.width[l]>i.max_nonzero_coeff&&(x=i.max_nonzero_coeff-f+1,t.fill(n,i.max_nonzero_coeff,576,0),(E=x)<0&&(E=0),l=u+1),0==p&&0==_&&(v=b,C=g,y=e,k=m),null!=s&&s.sfb_count1>0&&l>=s.sfb_count1&&s.step[l]>0&&w>=s.step[l]?(0!=p&&(h(p,o,y,k,v,C),p=0,v=b,C=g,y=e,k=m),_+=E):(0!=_&&(A(_,o,y,k,v,C),_=0,v=b,C=g,y=e,k=m),p+=E),E<=0){0!=_&&(A(_,o,y,k,v,C),_=0),0!=p&&(h(p,o,y,k,v,C),p=0);break}}l<=u&&(g+=i.width[l],m+=i.width[l],f+=i.width[l])}0!=p&&(h(p,o,y,k,v,C),p=0),0!=_&&(A(_,o,y,k,v,C),_=0)}(n,l,c.IPOW20(o.global_gain),o,i),2&e.substep_shaping)for(var d=0,f=o.global_gain+o.scalefac_scale,p=.634521682242439/c.IPOW20(f),_=0;_<o.sfbmax;_++){var m,b=o.width[_];if(0==e.pseudohalf[_])d+=b;else for(m=d,d+=b;m<d;++m)l[m]=n[m]>=p?l[m]:0}return this.noquant_count_bits(e,o,i)},this.best_huffman_divide=function(e,t){var r=new i,l=t.l3_enc,c=n(23),d=n(23),A=n(23),h=n(23);if(t.block_type!=a.SHORT_TYPE||1!=e.mode_gr){r.assign(t),t.block_type==a.NORM_TYPE&&(function(e,t,n,r,a,o,i){for(var l=t.big_values,c=0;c<=22;c++)r[c]=s.LARGE_BITS;for(c=0;c<16;c++){var d=e.scalefac_band.l[c+1];if(d>=l)break;var A=0,h=new u(A),f=p(n,0,d,h);A=h.bits;for(var _=0;_<8;_++){var m=e.scalefac_band.l[c+_+2];if(m>=l)break;var b=A,g=p(n,d,m,h=new u(b));b=h.bits,r[c+_]>b&&(r[c+_]=b,a[c+_]=c,o[c+_]=f,i[c+_]=g)}}}(e,t,l,c,d,A,h),_(e,r,t,l,c,d,A,h));var f=r.big_values;if(!(0==f||(l[f-2]|l[f-1])>1||(f=t.count1+2,f>576))){r.assign(t),r.count1=f;for(var m=0,b=0;f>r.big_values;f-=4){var g=2*(2*(2*l[f-4]+l[f-3])+l[f-2])+l[f-1];m+=o.t32l[g],b+=o.t33l[g]}if(r.big_values=f,r.count1table_select=0,m>b&&(m=b,r.count1table_select=1),r.count1bits=m,r.block_type==a.NORM_TYPE)_(e,r,t,l,c,d,A,h);else{if(r.part2_3_length=m,(m=e.scalefac_band.l[8])>f&&(m=f),m>0){var v=new u(r.part2_3_length);r.table_select[0]=p(l,0,m,v),r.part2_3_length=v.bits}f>m&&(v=new u(r.part2_3_length),r.table_select[1]=p(l,m,f,v),r.part2_3_length=v.bits),t.part2_3_length>r.part2_3_length&&t.assign(r)}}}};var m=[1,1,1,1,8,2,2,2,4,4,4,8,8,8,16,16],b=[1,2,4,8,1,2,4,8,2,4,8,2,4,8,4,8],g=[0,0,0,0,3,1,1,1,2,2,2,3,3,3,4,4],v=[0,1,2,3,0,1,2,3,1,2,3,1,2,3,2,3];l.slen1_tab=g,l.slen2_tab=v,this.best_scalefac_store=function(e,t,n,r){var i,s,l,u,d=r.tt[t][n],A=0;for(l=0,i=0;i<d.sfbmax;i++){var h=d.width[i];for(l+=h,u=-h;u<0&&0==d.l3_enc[u+l];u++);0==u&&(d.scalefac[i]=A=-2)}if(0==d.scalefac_scale&&0==d.preflag){var f=0;for(i=0;i<d.sfbmax;i++)d.scalefac[i]>0&&(f|=d.scalefac[i]);if(!(1&f)&&0!=f){for(i=0;i<d.sfbmax;i++)d.scalefac[i]>0&&(d.scalefac[i]>>=1);d.scalefac_scale=A=1}}if(0==d.preflag&&d.block_type!=a.SHORT_TYPE&&2==e.mode_gr){for(i=11;i<a.SBPSY_l&&!(d.scalefac[i]<c.pretab[i]&&-2!=d.scalefac[i]);i++);if(i==a.SBPSY_l){for(i=11;i<a.SBPSY_l;i++)d.scalefac[i]>0&&(d.scalefac[i]-=c.pretab[i]);d.preflag=A=1}}for(s=0;s<4;s++)r.scfsi[n][s]=0;for(2==e.mode_gr&&1==t&&r.tt[0][n].block_type!=a.SHORT_TYPE&&r.tt[1][n].block_type!=a.SHORT_TYPE&&(function(e,t){for(var n,r=t.tt[1][e],i=t.tt[0][e],s=0;s<o.scfsi_band.length-1;s++){for(n=o.scfsi_band[s];n<o.scfsi_band[s+1]&&!(i.scalefac[n]!=r.scalefac[n]&&r.scalefac[n]>=0);n++);if(n==o.scfsi_band[s+1]){for(n=o.scfsi_band[s];n<o.scfsi_band[s+1];n++)r.scalefac[n]=-1;t.scfsi[e][s]=1}}var l=0,c=0;for(n=0;n<11;n++)-1!=r.scalefac[n]&&(c++,l<r.scalefac[n]&&(l=r.scalefac[n]));for(var u=0,d=0;n<a.SBPSY_l;n++)-1!=r.scalefac[n]&&(d++,u<r.scalefac[n]&&(u=r.scalefac[n]));for(s=0;s<16;s++)if(l<m[s]&&u<b[s]){var A=g[s]*c+v[s]*d;r.part2_length>A&&(r.part2_length=A,r.scalefac_compress=s)}}(n,r),A=0),i=0;i<d.sfbmax;i++)-2==d.scalefac[i]&&(d.scalefac[i]=0);0!=A&&(2==e.mode_gr?this.scale_bitcount(d):this.scale_bitcount_lsf(e,d))};var C=[0,18,36,54,54,36,54,72,54,72,90,72,90,108,108,126],y=[0,18,36,54,51,35,53,71,52,70,88,69,87,105,104,122],k=[0,10,20,30,33,21,31,41,32,42,52,43,53,63,64,74];this.scale_bitcount=function(e){var t,n,o,i=0,l=0,u=e.scalefac;if(r(function(e,t){for(var n=0;n<t;++n)if(e[n]<0)return!1;return!0}(u,e.sfbmax)),e.block_type==a.SHORT_TYPE)o=C,0!=e.mixed_block_flag&&(o=y);else if(o=k,0==e.preflag){for(n=11;n<a.SBPSY_l&&!(u[n]<c.pretab[n]);n++);if(n==a.SBPSY_l)for(e.preflag=1,n=11;n<a.SBPSY_l;n++)u[n]-=c.pretab[n]}for(n=0;n<e.sfbdivide;n++)i<u[n]&&(i=u[n]);for(;n<e.sfbmax;n++)l<u[n]&&(l=u[n]);for(e.part2_length=s.LARGE_BITS,t=0;t<16;t++)i<m[t]&&l<b[t]&&e.part2_length>o[t]&&(e.part2_length=o[t],e.scalefac_compress=t);return e.part2_length==s.LARGE_BITS};var w=[[15,15,7,7],[15,15,7,0],[7,3,0,0],[15,31,31,0],[7,7,7,0],[3,3,0,0]];this.scale_bitcount_lsf=function(t,o){var i,s,l,u,d,A,h,f,p=n(4),_=o.scalefac;for(i=0!=o.preflag?2:0,h=0;h<4;h++)p[h]=0;if(o.block_type==a.SHORT_TYPE){s=1;var m=c.nr_of_sfb_block[i][s];for(f=0,l=0;l<4;l++)for(u=m[l]/3,h=0;h<u;h++,f++)for(d=0;d<3;d++)_[3*f+d]>p[l]&&(p[l]=_[3*f+d])}else for(s=0,m=c.nr_of_sfb_block[i][s],f=0,l=0;l<4;l++)for(u=m[l],h=0;h<u;h++,f++)_[f]>p[l]&&(p[l]=_[f]);for(A=!1,l=0;l<4;l++)p[l]>w[i][l]&&(A=!0);if(!A){var b,g,v,C;for(o.sfb_partition_table=c.nr_of_sfb_block[i][s],l=0;l<4;l++)o.slen[l]=x[p[l]];switch(b=o.slen[0],g=o.slen[1],v=o.slen[2],C=o.slen[3],i){case 0:o.scalefac_compress=(5*b+g<<4)+(v<<2)+C;break;case 1:o.scalefac_compress=400+(5*b+g<<2)+v;break;case 2:o.scalefac_compress=500+3*b+g;break;default:e.err.printf("intensity stereo not implemented yet\n")}}if(!A)for(r(null!=o.sfb_partition_table),o.part2_length=0,l=0;l<4;l++)o.part2_length+=o.slen[l]*o.sfb_partition_table[l];return A};var x=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];this.huffman_init=function(e){for(var t=2;t<=576;t+=2){for(var n,r=0;e.scalefac_band.l[++r]<t;);for(n=d[r][0];e.scalefac_band.l[n+1]>t;)n--;for(n<0&&(n=d[r][0]),e.bv_scf[t-2]=n,n=d[r][1];e.scalefac_band.l[n+e.bv_scf[t-2]+2]>t;)n--;n<0&&(n=d[r][1]),e.bv_scf[t-1]=n}}},yi}function Ri(){if(xi)return wi;xi=1;var e=Ua.System,t=Ua.Arrays,n=Ua.new_byte,r=Ua.new_float_n,a=Ua.new_int,o=Ua.assert,i=Ti(),s=Bi,l=to(),c=Ko;function u(){var u=Ii(),d=this,A=null,h=null,f=null,p=null;this.setModules=function(e,t,n,r){A=e,h=t,f=n,p=r};var _=null,m=0,b=0,g=0;function v(t){e.arraycopy(t.header[t.w_ptr].buf,0,_,b,t.sideinfo_len),b+=t.sideinfo_len,m+=8*t.sideinfo_len,t.w_ptr=t.w_ptr+1&c.MAX_HEADER_BUF-1}function C(e,t,n){for(;n>0;){var r;0==g&&(g=8,b++,o(b<u.LAME_MAXMP3BUFFER),o(e.header[e.w_ptr].write_timing>=m),e.header[e.w_ptr].write_timing==m&&v(e),_[b]=0),n-=r=Math.min(n,g),g-=r,_[b]|=t>>n<<g,m+=r}}function y(e,t,n){for(;n>0;){var r;0==g&&(g=8,b++,o(b<u.LAME_MAXMP3BUFFER),_[b]=0),n-=r=Math.min(n,g),g-=r,_[b]|=t>>n<<g,m+=r}}function k(e,t){var n,r=e.internal_flags;if(t>=8&&(C(r,76,8),t-=8),t>=8&&(C(r,65,8),t-=8),t>=8&&(C(r,77,8),t-=8),t>=8&&(C(r,69,8),t-=8),t>=32){var a=f.getLameShortVersion();if(t>=32)for(n=0;n<a.length&&t>=8;++n)t-=8,C(r,a.charAt(n),8)}for(;t>=1;t-=1)C(r,r.ancillary_flag,1),r.ancillary_flag^=e.disable_reservoir?0:1}function w(e,t,n){for(var r=e.header[e.h_ptr].ptr;n>0;){var a=Math.min(n,8-(7&r));n-=a,e.header[e.h_ptr].buf[r>>3]|=t>>n<<8-(7&r)-a,r+=a}e.header[e.h_ptr].ptr=r}function x(e,t){e<<=8;for(var n=0;n<8;n++)65536&((t<<=1)^(e<<=1))&&(t^=32773);return t}function E(e,t){var n,r=s.ht[t.count1table_select+32],a=0,i=t.big_values,l=t.big_values;for(o(t.count1table_select<2),n=(t.count1-t.big_values)/4;n>0;--n){var c=0,u=0;0!=t.l3_enc[i+0]&&(u+=8,t.xr[l+0]<0&&c++),0!=t.l3_enc[i+1]&&(u+=4,c*=2,t.xr[l+1]<0&&c++),0!=t.l3_enc[i+2]&&(u+=2,c*=2,t.xr[l+2]<0&&c++),0!=t.l3_enc[i+3]&&(u++,c*=2,t.xr[l+3]<0&&c++),i+=4,l+=4,C(e,c+r.table[u],r.hlen[u]),a+=r.hlen[u]}return a}function M(e,t,n,r,a){var i=s.ht[t],l=0;if(0==t)return l;for(var c=n;c<r;c+=2){var u=0,d=0,A=i.xlen,h=i.xlen,f=0,p=a.l3_enc[c],_=a.l3_enc[c+1];if(0!=p&&(a.xr[c]<0&&f++,u--),t>15){if(p>14){var m=p-15;o(m<=i.linmax),f|=m<<1,d=A,p=15}if(_>14){var b=_-15;o(b<=i.linmax),f<<=A,f|=b,d+=A,_=15}h=16}0!=_&&(f<<=1,a.xr[c+1]<0&&f++,u--),p=p*h+_,d-=u,u+=i.hlen[p],C(e,i.table[p],u),C(e,f,d),l+=u+d}return l}function B(e,t){var n=3*e.scalefac_band.s[3];return n>t.big_values&&(n=t.big_values),M(e,t.table_select[0],0,n,t)+M(e,t.table_select[1],n,t.big_values,t)}function S(e,t){var n,r,a,i;n=t.big_values;var s=t.region0_count+1;return o(s<e.scalefac_band.l.length),a=e.scalefac_band.l[s],s+=t.region1_count+1,o(s<e.scalefac_band.l.length),a>n&&(a=n),(i=e.scalefac_band.l[s])>n&&(i=n),r=M(e,t.table_select[0],0,a,t),(r+=M(e,t.table_select[1],a,i,t))+M(e,t.table_select[2],i,n,t)}function T(){this.total=0}function R(t,n){var r,a,o,i,s,l=t.internal_flags;return s=l.w_ptr,-1==(i=l.h_ptr-1)&&(i=c.MAX_HEADER_BUF-1),r=l.header[i].write_timing-m,n.total=r,r>=0&&(a=1+i-s,i<s&&(a=1+i-s+c.MAX_HEADER_BUF),r-=8*a*l.sideinfo_len),r+=o=d.getframebits(t),n.total+=o,n.total%8!=0?n.total=1+n.total/8:n.total=n.total/8,n.total+=b+1,r<0&&e.err.println("strange error flushing buffer ... \n"),r}this.getframebits=function(e){var t,n=e.internal_flags;return t=0!=n.bitrate_index?s.bitrate_table[e.version][n.bitrate_index]:e.brate,8*(0|72e3*(e.version+1)*t/e.out_samplerate+n.padding)},this.CRC_writeheader=function(e,t){var n=65535;n=x(255&t[2],n),n=x(255&t[3],n);for(var r=6;r<e.sideinfo_len;r++)n=x(255&t[r],n);t[4]=byte(n>>8),t[5]=byte(255&n)},this.flush_bitstream=function(e){var t,n,r=e.internal_flags,a=r.h_ptr-1;if(-1==a&&(a=c.MAX_HEADER_BUF-1),t=r.l3_side,!((n=R(e,new T))<0)){if(k(e,n),o(r.header[a].write_timing+this.getframebits(e)==m),r.ResvSize=0,t.main_data_begin=0,r.findReplayGain){var i=A.GetTitleGain(r.rgdata);o(NEQ(i,GainAnalysis.GAIN_NOT_ENOUGH_SAMPLES)),r.RadioGain=0|Math.floor(10*i+.5)}r.findPeakSample&&(r.noclipGainChange=0|Math.ceil(20*Math.log10(r.PeakSample/32767)*10),r.noclipGainChange>0&&(EQ(e.scale,1)||EQ(e.scale,0))?r.noclipScale=Math.floor(32767/r.PeakSample*100)/100:r.noclipScale=-1)}},this.add_dummy_byte=function(e,t,n){for(var r,a=e.internal_flags;n-- >0;)for(y(0,t,8),r=0;r<c.MAX_HEADER_BUF;++r)a.header[r].write_timing+=8},this.format_bitstream=function(n){var r,a=n.internal_flags;r=a.l3_side;var s=this.getframebits(n);k(n,r.resvDrain_pre),function(n,r){var a,i,s,u=n.internal_flags;if(a=u.l3_side,u.header[u.h_ptr].ptr=0,t.fill(u.header[u.h_ptr].buf,0,u.sideinfo_len,0),n.out_samplerate<16e3?w(u,4094,12):w(u,4095,12),w(u,n.version,1),w(u,1,2),w(u,n.error_protection?0:1,1),w(u,u.bitrate_index,4),w(u,u.samplerate_index,2),w(u,u.padding,1),w(u,n.extension,1),w(u,n.mode.ordinal(),2),w(u,u.mode_ext,2),w(u,n.copyright,1),w(u,n.original,1),w(u,n.emphasis,2),n.error_protection&&w(u,0,16),1==n.version){for(o(a.main_data_begin>=0),w(u,a.main_data_begin,9),2==u.channels_out?w(u,a.private_bits,3):w(u,a.private_bits,5),s=0;s<u.channels_out;s++){var d;for(d=0;d<4;d++)w(u,a.scfsi[s][d],1)}for(i=0;i<2;i++)for(s=0;s<u.channels_out;s++)w(u,(A=a.tt[i][s]).part2_3_length+A.part2_length,12),w(u,A.big_values/2,9),w(u,A.global_gain,8),w(u,A.scalefac_compress,4),A.block_type!=l.NORM_TYPE?(w(u,1,1),w(u,A.block_type,2),w(u,A.mixed_block_flag,1),14==A.table_select[0]&&(A.table_select[0]=16),w(u,A.table_select[0],5),14==A.table_select[1]&&(A.table_select[1]=16),w(u,A.table_select[1],5),w(u,A.subblock_gain[0],3),w(u,A.subblock_gain[1],3),w(u,A.subblock_gain[2],3)):(w(u,0,1),14==A.table_select[0]&&(A.table_select[0]=16),w(u,A.table_select[0],5),14==A.table_select[1]&&(A.table_select[1]=16),w(u,A.table_select[1],5),14==A.table_select[2]&&(A.table_select[2]=16),w(u,A.table_select[2],5),o(0<=A.region0_count&&A.region0_count<16),o(0<=A.region1_count&&A.region1_count<8),w(u,A.region0_count,4),w(u,A.region1_count,3)),w(u,A.preflag,1),w(u,A.scalefac_scale,1),w(u,A.count1table_select,1)}else for(o(a.main_data_begin>=0),w(u,a.main_data_begin,8),w(u,a.private_bits,u.channels_out),i=0,s=0;s<u.channels_out;s++){var A;w(u,(A=a.tt[i][s]).part2_3_length+A.part2_length,12),w(u,A.big_values/2,9),w(u,A.global_gain,8),w(u,A.scalefac_compress,9),A.block_type!=l.NORM_TYPE?(w(u,1,1),w(u,A.block_type,2),w(u,A.mixed_block_flag,1),14==A.table_select[0]&&(A.table_select[0]=16),w(u,A.table_select[0],5),14==A.table_select[1]&&(A.table_select[1]=16),w(u,A.table_select[1],5),w(u,A.subblock_gain[0],3),w(u,A.subblock_gain[1],3),w(u,A.subblock_gain[2],3)):(w(u,0,1),14==A.table_select[0]&&(A.table_select[0]=16),w(u,A.table_select[0],5),14==A.table_select[1]&&(A.table_select[1]=16),w(u,A.table_select[1],5),14==A.table_select[2]&&(A.table_select[2]=16),w(u,A.table_select[2],5),o(0<=A.region0_count&&A.region0_count<16),o(0<=A.region1_count&&A.region1_count<8),w(u,A.region0_count,4),w(u,A.region1_count,3)),w(u,A.scalefac_scale,1),w(u,A.count1table_select,1)}n.error_protection&&CRC_writeheader(u,u.header[u.h_ptr].buf);var h=u.h_ptr;o(u.header[h].ptr==8*u.sideinfo_len),u.h_ptr=h+1&c.MAX_HEADER_BUF-1,u.header[u.h_ptr].write_timing=u.header[h].write_timing+r,u.h_ptr==u.w_ptr&&e.err.println("Error: MAX_HEADER_BUF too small in bitstream.c \n")}(n,s);var u=8*a.sideinfo_len;if(u+=function(e){var t,n,r,a,s=0,c=e.internal_flags,u=c.l3_side;if(1==e.version)for(t=0;t<2;t++)for(n=0;n<c.channels_out;n++){var d=u.tt[t][n],A=i.slen1_tab[d.scalefac_compress],h=i.slen2_tab[d.scalefac_compress];for(a=0,r=0;r<d.sfbdivide;r++)-1!=d.scalefac[r]&&(C(c,d.scalefac[r],A),a+=A);for(;r<d.sfbmax;r++)-1!=d.scalefac[r]&&(C(c,d.scalefac[r],h),a+=h);o(a==d.part2_length),d.block_type==l.SHORT_TYPE?a+=B(c,d):a+=S(c,d),a+=E(c,d),o(a==d.part2_3_length+d.part2_length),s+=a}else for(t=0,n=0;n<c.channels_out;n++){d=u.tt[t][n];var f,p,_=0;if(o(null!=d.sfb_partition_table),a=0,r=0,p=0,d.block_type==l.SHORT_TYPE){for(;p<4;p++){var m=d.sfb_partition_table[p]/3,b=d.slen[p];for(f=0;f<m;f++,r++)C(c,Math.max(d.scalefac[3*r+0],0),b),C(c,Math.max(d.scalefac[3*r+1],0),b),C(c,Math.max(d.scalefac[3*r+2],0),b),_+=3*b}a+=B(c,d)}else{for(;p<4;p++)for(m=d.sfb_partition_table[p],b=d.slen[p],f=0;f<m;f++,r++)C(c,Math.max(d.scalefac[r],0),b),_+=b;a+=S(c,d)}a+=E(c,d),o(a==d.part2_3_length),o(_==d.part2_length),s+=_+a}return s}(n),k(n,r.resvDrain_post),u+=r.resvDrain_post,r.main_data_begin+=(s-u)/8,R(n,new T)!=a.ResvSize&&e.err.println("Internal buffer inconsistency. flushbits <> ResvSize"),8*r.main_data_begin!=a.ResvSize&&(e.err.printf("bit reservoir error: \nl3_side.main_data_begin: %d \nResvoir size:             %d \nresv drain (post)         %d \nresv drain (pre)          %d \nheader and sideinfo:      %d \ndata bits:                %d \ntotal bits:               %d (remainder: %d) \nbitsperframe:             %d \n",8*r.main_data_begin,a.ResvSize,r.resvDrain_post,r.resvDrain_pre,8*a.sideinfo_len,u-r.resvDrain_post-8*a.sideinfo_len,u,u%8,s),e.err.println("This is a fatal error.  It has several possible causes:"),e.err.println("90%%  LAME compiled with buggy version of gcc using advanced optimizations"),e.err.println(" 9%%  Your system is overclocked"),e.err.println(" 1%%  bug in LAME encoding library"),a.ResvSize=8*r.main_data_begin),m>1e9){var d;for(d=0;d<c.MAX_HEADER_BUF;++d)a.header[d].write_timing-=m;m=0}return 0},this.copy_buffer=function(t,n,o,i,s){var l=b+1;if(l<=0)return 0;if(0!=i&&l>i)return-1;if(e.arraycopy(_,0,n,o,l),b=-1,g=0,0!=s){var c=a(1);if(c[0]=t.nMusicCRC,p.updateMusicCRC(c,n,o,l),t.nMusicCRC=c[0],l>0&&(t.VBR_seek_table.nBytesWritten+=l),t.decode_on_the_fly)for(var u,d=r([2,1152]),f=l,m=-1;0!=m;)if(m=h.hip_decode1_unclipped(t.hip,n,o,f,d[0],d[1]),f=0,-1==m&&(m=0),m>0){if(t.findPeakSample){for(u=0;u<m;u++)d[0][u]>t.PeakSample?t.PeakSample=d[0][u]:-d[0][u]>t.PeakSample&&(t.PeakSample=-d[0][u]);if(t.channels_out>1)for(u=0;u<m;u++)d[1][u]>t.PeakSample?t.PeakSample=d[1][u]:-d[1][u]>t.PeakSample&&(t.PeakSample=-d[1][u])}if(t.findReplayGain&&A.AnalyzeSamples(t.rgdata,d[0],0,d[1],0,m,t.channels_out)==GainAnalysis.GAIN_ANALYSIS_ERROR)return-6}}return l},this.init_bit_stream_w=function(e){_=n(u.LAME_MAXMP3BUFFER),e.h_ptr=e.w_ptr=0,e.header[e.h_ptr].write_timing=0,b=-1,g=0,m=0}}return u.EQ=function(e,t){return Math.abs(e)>Math.abs(t)?Math.abs(e-t)<=1e-6*Math.abs(e):Math.abs(e-t)<=1e-6*Math.abs(t)},u.NEQ=function(e,t){return!u.EQ(e,t)},wi=u}function Ii(){if(Mi)return Ei;Mi=1;var e=Ua.System,t=Ua.VbrMode,n=Ua.ShortBlock,r=Ua.new_float,a=Ua.new_int_n,o=Ua.new_short_n,i=Ua.assert,s=mo,l=go,c=Ko,u=ei,d=li,A=mi,h=Ri(),f=Bi,p=to();return Ei=function _(){var m=eo,b=this;_.V9=410,_.V8=420,_.V7=430,_.V6=440,_.V5=450,_.V4=460,_.V3=470,_.V2=480,_.V1=490,_.V0=500,_.R3MIX=1e3,_.STANDARD=1001,_.EXTREME=1002,_.INSANE=1003,_.STANDARD_FAST=1004,_.EXTREME_FAST=1005,_.MEDIUM=1006,_.MEDIUM_FAST=1007,_.LAME_MAXMP3BUFFER=147456;var g,v,C,y,k,w,x,E,M=new s;function B(){this.mask_adjust=0,this.mask_adjust_short=0,this.bo_l_weight=r(p.SBMAX_l),this.bo_s_weight=r(p.SBMAX_s)}function S(){this.lowerlimit=0}function T(e,t){this.lowpass=t}this.enc=new p,this.setModules=function(e,t,n,r,a,o,i,s,l){g=e,v=t,C=n,y=r,k=a,w=o,x=s,E=l,this.enc.setModules(v,M,y,w)};var R=4294479419;function I(e){return e>1?0:e<=0?1:Math.cos(Math.PI/2*e)}function O(e,t){switch(e){case 44100:return t.version=1,0;case 48e3:return t.version=1,1;case 32e3:return t.version=1,2;case 22050:case 11025:return t.version=0,0;case 24e3:case 12e3:return t.version=0,1;case 16e3:case 8e3:return t.version=0,2;default:return t.version=0,-1}}function N(e,t,n){n<16e3&&(t=2);for(var r=f.bitrate_table[t][1],a=2;a<=14;a++)f.bitrate_table[t][a]>0&&Math.abs(f.bitrate_table[t][a]-e)<Math.abs(r-e)&&(r=f.bitrate_table[t][a]);return r}function L(e,t,n){n<16e3&&(t=2);for(var r=0;r<=14;r++)if(f.bitrate_table[t][r]>0&&f.bitrate_table[t][r]==e)return r;return-1}function D(e,t){var n=[new T(8,2e3),new T(16,3700),new T(24,3900),new T(32,5500),new T(40,7e3),new T(48,7500),new T(56,1e4),new T(64,11e3),new T(80,13500),new T(96,15100),new T(112,15600),new T(128,17e3),new T(160,17500),new T(192,18600),new T(224,19400),new T(256,19700),new T(320,20500)],r=b.nearestBitrateFullIndex(t);e.lowerlimit=n[r].lowpass}function P(e){var t=p.BLKSIZE+e.framesize-p.FFTOFFSET;return Math.max(t,512+e.framesize-32)}function j(e,t,n,r,a,o){var i=b.enc.lame_encode_mp3_frame(e,t,n,r,a,o);return e.frameNum++,i}function V(){this.n_in=0,this.n_out=0}function z(){this.num_used=0}function F(e,t){return 0!=t?F(t,e%t):e}function q(e,t,n){var r=Math.PI*t;(e/=n)<0&&(e=0),e>1&&(e=1);var a=e-.5,o=.42-.5*Math.cos(2*e*Math.PI)+.08*Math.cos(4*e*Math.PI);return Math.abs(a)<1e-9?r/Math.PI:o*Math.sin(n*r*a)/(Math.PI*n*a)}function G(e,t,n,a,o,s,l,u,d){var A,h,f=e.internal_flags,p=0,_=e.out_samplerate/F(e.out_samplerate,e.in_samplerate);_>c.BPC&&(_=c.BPC);var m=Math.abs(f.resample_ratio-Math.floor(.5+f.resample_ratio))<1e-4?1:0,b=1/f.resample_ratio;b>1&&(b=1);var g=31;g%2==0&&--g;var v=(g+=m)+1;if(0==f.fill_buffer_resample_init){for(f.inbuf_old[0]=r(v),f.inbuf_old[1]=r(v),A=0;A<=2*_;++A)f.blackfilt[A]=r(v);for(f.itime[0]=0,f.itime[1]=0,p=0;p<=2*_;p++){var C=0,y=(p-_)/(2*_);for(A=0;A<=g;A++)C+=f.blackfilt[p][A]=q(A-y,b,g);for(A=0;A<=g;A++)f.blackfilt[p][A]/=C}f.fill_buffer_resample_init=1}var k=f.inbuf_old[d];for(h=0;h<a;h++){var w,x;if(w=h*f.resample_ratio,g+(p=0|Math.floor(w-f.itime[d]))-g/2>=l)break;y=w-f.itime[d]-(p+g%2*.5),x=0|Math.floor(2*y*_+_+.5);var E=0;for(A=0;A<=g;++A){var M=0|A+p-g/2;E+=(M<0?k[v+M]:o[s+M])*f.blackfilt[x][A]}t[n+h]=E}if(u.num_used=Math.min(l,g+p-g/2),f.itime[d]+=u.num_used-h*f.resample_ratio,u.num_used>=v)for(A=0;A<v;A++)k[A]=o[s+u.num_used+A-v];else{var B=v-u.num_used;for(A=0;A<B;++A)k[A]=k[A+u.num_used];for(p=0;A<v;++A,++p)k[A]=o[s+p];i(p==u.num_used)}return h}function H(e,t,n,r,a,o){var i=e.internal_flags;if(i.resample_ratio<.9999||i.resample_ratio>1.0001)for(var s=0;s<i.channels_out;s++){var l=new z;o.n_out=G(e,t[s],i.mf_size,e.framesize,n[s],r,a,l,s),o.n_in=l.num_used}else{o.n_out=Math.min(e.framesize,a),o.n_in=o.n_out;for(var c=0;c<o.n_out;++c)t[0][i.mf_size+c]=n[0][r+c],2==i.channels_out&&(t[1][i.mf_size+c]=n[1][r+c])}}this.lame_init=function(){var e=new l;return function(e){var n;e.class_id=R,n=e.internal_flags=new c,e.mode=m.NOT_SET,e.original=1,e.in_samplerate=44100,e.num_channels=2,e.num_samples=-1,e.bWriteVbrTag=!0,e.quality=-1,e.short_blocks=null,n.subblock_gain=-1,e.lowpassfreq=0,e.highpassfreq=0,e.lowpasswidth=-1,e.highpasswidth=-1,e.VBR=t.vbr_off,e.VBR_q=4,e.ATHcurve=-1,e.VBR_mean_bitrate_kbps=128,e.VBR_min_bitrate_kbps=0,e.VBR_max_bitrate_kbps=0,e.VBR_hard_min=0,n.VBR_min_bitrate=1,n.VBR_max_bitrate=13,e.quant_comp=-1,e.quant_comp_short=-1,e.msfix=-1,n.resample_ratio=1,n.OldValue[0]=180,n.OldValue[1]=180,n.CurrentStep[0]=4,n.CurrentStep[1]=4,n.masking_lower=1,n.nsPsy.attackthre=-1,n.nsPsy.attackthre_s=-1,e.scale=-1,e.athaa_type=-1,e.ATHtype=-1,e.athaa_loudapprox=-1,e.athaa_sensitivity=0,e.useTemporal=null,e.interChRatio=-1,n.mf_samples_to_encode=p.ENCDELAY+p.POSTDELAY,e.encoder_padding=0,n.mf_size=p.ENCDELAY-p.MDCTDELAY,e.findReplayGain=!1,e.decode_on_the_fly=!1,n.decode_on_the_fly=!1,n.findReplayGain=!1,n.findPeakSample=!1,n.RadioGain=0,n.AudiophileGain=0,n.noclipGainChange=0,n.noclipScale=-1,e.preset=0,e.write_id3tag_automatic=!0}(e),e.lame_allocated_gfp=1,e},this.nearestBitrateFullIndex=function(e){var t=[8,16,24,32,40,48,56,64,80,96,112,128,160,192,224,256,320],n=0,r=0,a=0,o=0;o=t[16],a=16,r=t[16],n=16;for(var i=0;i<16;i++)if(Math.max(e,t[i+1])!=e){o=t[i+1],a=i+1,r=t[i],n=i;break}return o-e>e-r?n:a},this.lame_init_params=function(r){var o,l=r.internal_flags;if(l.Class_ID=0,null==l.ATH&&(l.ATH=new u),null==l.PSY&&(l.PSY=new B),null==l.rgdata&&(l.rgdata=new d),l.channels_in=r.num_channels,1==l.channels_in&&(r.mode=m.MONO),l.channels_out=r.mode==m.MONO?1:2,l.mode_ext=p.MPG_MD_MS_LR,r.mode==m.MONO&&(r.force_ms=!1),r.VBR==t.vbr_off&&128!=r.VBR_mean_bitrate_kbps&&0==r.brate&&(r.brate=r.VBR_mean_bitrate_kbps),r.VBR==t.vbr_off||r.VBR==t.vbr_mtrh||r.VBR==t.vbr_mt||(r.free_format=!1),r.VBR==t.vbr_off&&0==r.brate&&h.EQ(r.compression_ratio,0)&&(r.compression_ratio=11.025),r.VBR==t.vbr_off&&r.compression_ratio>0&&(0==r.out_samplerate&&(r.out_samplerate=map2MP3Frequency(int(.97*r.in_samplerate))),r.brate=0|16*r.out_samplerate*l.channels_out/(1e3*r.compression_ratio),l.samplerate_index=O(r.out_samplerate,r),r.free_format||(r.brate=N(r.brate,r.version,r.out_samplerate))),0!=r.out_samplerate&&(r.out_samplerate<16e3?(r.VBR_mean_bitrate_kbps=Math.max(r.VBR_mean_bitrate_kbps,8),r.VBR_mean_bitrate_kbps=Math.min(r.VBR_mean_bitrate_kbps,64)):r.out_samplerate<32e3?(r.VBR_mean_bitrate_kbps=Math.max(r.VBR_mean_bitrate_kbps,8),r.VBR_mean_bitrate_kbps=Math.min(r.VBR_mean_bitrate_kbps,160)):(r.VBR_mean_bitrate_kbps=Math.max(r.VBR_mean_bitrate_kbps,32),r.VBR_mean_bitrate_kbps=Math.min(r.VBR_mean_bitrate_kbps,320))),0==r.lowpassfreq){var c=16e3;switch(r.VBR){case t.vbr_off:D(_=new S,r.brate),c=_.lowerlimit;break;case t.vbr_abr:var _;D(_=new S,r.VBR_mean_bitrate_kbps),c=_.lowerlimit;break;case t.vbr_rh:var b=[19500,19e3,18600,18e3,17500,16e3,15600,14900,12500,1e4,3950];if(0<=r.VBR_q&&r.VBR_q<=9){var T=b[r.VBR_q],P=b[r.VBR_q+1],j=r.VBR_q_frac;c=linear_int(T,P,j)}else c=19500;break;default:b=[19500,19e3,18500,18e3,17500,16500,15500,14500,12500,9500,3950],0<=r.VBR_q&&r.VBR_q<=9?(T=b[r.VBR_q],P=b[r.VBR_q+1],j=r.VBR_q_frac,c=linear_int(T,P,j)):c=19500}r.mode==m.MONO&&(r.VBR==t.vbr_off||r.VBR==t.vbr_abr)&&(c*=1.5),r.lowpassfreq=0|c}if(0==r.out_samplerate&&(2*r.lowpassfreq>r.in_samplerate&&(r.lowpassfreq=r.in_samplerate/2),r.out_samplerate=function(e,t){var n=44100;return t>=48e3?n=48e3:t>=44100?n=44100:t>=32e3?n=32e3:t>=24e3?n=24e3:t>=22050?n=22050:t>=16e3?n=16e3:t>=12e3?n=12e3:t>=11025?n=11025:t>=8e3&&(n=8e3),-1==e?n:(e<=15960&&(n=44100),e<=15250&&(n=32e3),e<=11220&&(n=24e3),e<=9970&&(n=22050),e<=7230&&(n=16e3),e<=5420&&(n=12e3),e<=4510&&(n=11025),e<=3970&&(n=8e3),t<n?t>44100?48e3:t>32e3?44100:t>24e3?32e3:t>22050?24e3:t>16e3?22050:t>12e3?16e3:t>11025?12e3:t>8e3?11025:8e3:n)}(0|r.lowpassfreq,r.in_samplerate)),r.lowpassfreq=Math.min(20500,r.lowpassfreq),r.lowpassfreq=Math.min(r.out_samplerate/2,r.lowpassfreq),r.VBR==t.vbr_off&&(r.compression_ratio=16*r.out_samplerate*l.channels_out/(1e3*r.brate)),r.VBR==t.vbr_abr&&(r.compression_ratio=16*r.out_samplerate*l.channels_out/(1e3*r.VBR_mean_bitrate_kbps)),r.bWriteVbrTag||(r.findReplayGain=!1,r.decode_on_the_fly=!1,l.findPeakSample=!1),l.findReplayGain=r.findReplayGain,l.decode_on_the_fly=r.decode_on_the_fly,l.decode_on_the_fly&&(l.findPeakSample=!0),l.findReplayGain&&g.InitGainAnalysis(l.rgdata,r.out_samplerate)==GainAnalysis.INIT_GAIN_ANALYSIS_ERROR)return r.internal_flags=null,-6;switch(l.decode_on_the_fly&&!r.decode_only&&(null!=l.hip&&E.hip_decode_exit(l.hip),l.hip=E.hip_decode_init()),l.mode_gr=r.out_samplerate<=24e3?1:2,r.framesize=576*l.mode_gr,r.encoder_delay=p.ENCDELAY,l.resample_ratio=r.in_samplerate/r.out_samplerate,r.VBR){case t.vbr_mt:case t.vbr_rh:case t.vbr_mtrh:r.compression_ratio=[5.7,6.5,7.3,8.2,10,11.9,13,14,15,16.5][r.VBR_q];break;case t.vbr_abr:r.compression_ratio=16*r.out_samplerate*l.channels_out/(1e3*r.VBR_mean_bitrate_kbps);break;default:r.compression_ratio=16*r.out_samplerate*l.channels_out/(1e3*r.brate)}if(r.mode==m.NOT_SET&&(r.mode=m.JOINT_STEREO),r.highpassfreq>0?(l.highpass1=2*r.highpassfreq,r.highpasswidth>=0?l.highpass2=2*(r.highpassfreq+r.highpasswidth):l.highpass2=2*r.highpassfreq,l.highpass1/=r.out_samplerate,l.highpass2/=r.out_samplerate):(l.highpass1=0,l.highpass2=0),r.lowpassfreq>0?(l.lowpass2=2*r.lowpassfreq,r.lowpasswidth>=0?(l.lowpass1=2*(r.lowpassfreq-r.lowpasswidth),l.lowpass1<0&&(l.lowpass1=0)):l.lowpass1=2*r.lowpassfreq,l.lowpass1/=r.out_samplerate,l.lowpass2/=r.out_samplerate):(l.lowpass1=0,l.lowpass2=0),function(t){var n=t.internal_flags,r=32,a=-1;if(n.lowpass1>0){for(var o=999,i=0;i<=31;i++)(u=i/31)>=n.lowpass2&&(r=Math.min(r,i)),n.lowpass1<u&&u<n.lowpass2&&(o=Math.min(o,i));n.lowpass1=999==o?(r-.75)/31:(o-.75)/31,n.lowpass2=r/31}if(n.highpass2>0&&n.highpass2<.75/31*.9&&(n.highpass1=0,n.highpass2=0,e.err.println("Warning: highpass filter disabled.  highpass frequency too small\n")),n.highpass2>0){var s=-1;for(i=0;i<=31;i++)(u=i/31)<=n.highpass1&&(a=Math.max(a,i)),n.highpass1<u&&u<n.highpass2&&(s=Math.max(s,i));n.highpass1=a/31,n.highpass2=-1==s?(a+.75)/31:(s+.75)/31}for(i=0;i<32;i++){var l,c,u=i/31;l=n.highpass2>n.highpass1?I((n.highpass2-u)/(n.highpass2-n.highpass1+1e-20)):1,c=n.lowpass2>n.lowpass1?I((u-n.lowpass1)/(n.lowpass2-n.lowpass1+1e-20)):1,n.amp_filter[i]=l*c}}(r),l.samplerate_index=O(r.out_samplerate,r),l.samplerate_index<0)return r.internal_flags=null,-1;if(r.VBR==t.vbr_off){if(r.free_format)l.bitrate_index=0;else if(r.brate=N(r.brate,r.version,r.out_samplerate),l.bitrate_index=L(r.brate,r.version,r.out_samplerate),l.bitrate_index<=0)return r.internal_flags=null,-1}else l.bitrate_index=1;r.analysis&&(r.bWriteVbrTag=!1),null!=l.pinfo&&(r.bWriteVbrTag=!1),v.init_bit_stream_w(l);for(var V=l.samplerate_index+3*r.version+6*(r.out_samplerate<16e3?1:0),z=0;z<p.SBMAX_l+1;z++)l.scalefac_band.l[z]=y.sfBandIndex[V].l[z];for(z=0;z<p.PSFB21+1;z++){var F=(l.scalefac_band.l[22]-l.scalefac_band.l[21])/p.PSFB21,q=l.scalefac_band.l[21]+z*F;l.scalefac_band.psfb21[z]=q}for(l.scalefac_band.psfb21[p.PSFB21]=576,z=0;z<p.SBMAX_s+1;z++)l.scalefac_band.s[z]=y.sfBandIndex[V].s[z];for(z=0;z<p.PSFB12+1;z++)F=(l.scalefac_band.s[13]-l.scalefac_band.s[12])/p.PSFB12,q=l.scalefac_band.s[12]+z*F,l.scalefac_band.psfb12[z]=q;for(l.scalefac_band.psfb12[p.PSFB12]=192,1==r.version?l.sideinfo_len=1==l.channels_out?21:36:l.sideinfo_len=1==l.channels_out?13:21,r.error_protection&&(l.sideinfo_len+=2),function(e){var t=e.internal_flags;e.frameNum=0,e.write_id3tag_automatic&&x.id3tag_write_v2(e),t.bitrate_stereoMode_Hist=a([16,5]),t.bitrate_blockType_Hist=a([16,6]),t.PeakSample=0,e.bWriteVbrTag&&w.InitVbrTag(e)}(r),l.Class_ID=R,o=0;o<19;o++)l.nsPsy.pefirbuf[o]=700*l.mode_gr*l.channels_out;switch(-1==r.ATHtype&&(r.ATHtype=4),i(r.VBR_q<=9),i(r.VBR_q>=0),r.VBR){case t.vbr_mt:r.VBR=t.vbr_mtrh;case t.vbr_mtrh:null==r.useTemporal&&(r.useTemporal=!1),C.apply_preset(r,500-10*r.VBR_q,0),r.quality<0&&(r.quality=LAME_DEFAULT_QUALITY),r.quality<5&&(r.quality=0),r.quality>5&&(r.quality=5),l.PSY.mask_adjust=r.maskingadjust,l.PSY.mask_adjust_short=r.maskingadjust_short,r.experimentalY?l.sfb21_extra=!1:l.sfb21_extra=r.out_samplerate>44e3,l.iteration_loop=new VBRNewIterationLoop(k);break;case t.vbr_rh:C.apply_preset(r,500-10*r.VBR_q,0),l.PSY.mask_adjust=r.maskingadjust,l.PSY.mask_adjust_short=r.maskingadjust_short,r.experimentalY?l.sfb21_extra=!1:l.sfb21_extra=r.out_samplerate>44e3,r.quality>6&&(r.quality=6),r.quality<0&&(r.quality=LAME_DEFAULT_QUALITY),l.iteration_loop=new VBROldIterationLoop(k);break;default:var G;l.sfb21_extra=!1,r.quality<0&&(r.quality=LAME_DEFAULT_QUALITY),(G=r.VBR)==t.vbr_off&&(r.VBR_mean_bitrate_kbps=r.brate),C.apply_preset(r,r.VBR_mean_bitrate_kbps,0),r.VBR=G,l.PSY.mask_adjust=r.maskingadjust,l.PSY.mask_adjust_short=r.maskingadjust_short,G==t.vbr_off?l.iteration_loop=new A(k):l.iteration_loop=new ABRIterationLoop(k)}if(i(r.scale>=0),r.VBR!=t.vbr_off){if(l.VBR_min_bitrate=1,l.VBR_max_bitrate=14,r.out_samplerate<16e3&&(l.VBR_max_bitrate=8),0!=r.VBR_min_bitrate_kbps&&(r.VBR_min_bitrate_kbps=N(r.VBR_min_bitrate_kbps,r.version,r.out_samplerate),l.VBR_min_bitrate=L(r.VBR_min_bitrate_kbps,r.version,r.out_samplerate),l.VBR_min_bitrate<0)||0!=r.VBR_max_bitrate_kbps&&(r.VBR_max_bitrate_kbps=N(r.VBR_max_bitrate_kbps,r.version,r.out_samplerate),l.VBR_max_bitrate=L(r.VBR_max_bitrate_kbps,r.version,r.out_samplerate),l.VBR_max_bitrate<0))return-1;r.VBR_min_bitrate_kbps=f.bitrate_table[r.version][l.VBR_min_bitrate],r.VBR_max_bitrate_kbps=f.bitrate_table[r.version][l.VBR_max_bitrate],r.VBR_mean_bitrate_kbps=Math.min(f.bitrate_table[r.version][l.VBR_max_bitrate],r.VBR_mean_bitrate_kbps),r.VBR_mean_bitrate_kbps=Math.max(f.bitrate_table[r.version][l.VBR_min_bitrate],r.VBR_mean_bitrate_kbps)}return r.tune&&(l.PSY.mask_adjust+=r.tune_value_a,l.PSY.mask_adjust_short+=r.tune_value_a),function(e){var t=e.internal_flags;switch(e.quality){default:case 9:t.psymodel=0,t.noise_shaping=0,t.noise_shaping_amp=0,t.noise_shaping_stop=0,t.use_best_huffman=0,t.full_outer_loop=0;break;case 8:e.quality=7;case 7:t.psymodel=1,t.noise_shaping=0,t.noise_shaping_amp=0,t.noise_shaping_stop=0,t.use_best_huffman=0,t.full_outer_loop=0;break;case 6:case 5:t.psymodel=1,0==t.noise_shaping&&(t.noise_shaping=1),t.noise_shaping_amp=0,t.noise_shaping_stop=0,-1==t.subblock_gain&&(t.subblock_gain=1),t.use_best_huffman=0,t.full_outer_loop=0;break;case 4:t.psymodel=1,0==t.noise_shaping&&(t.noise_shaping=1),t.noise_shaping_amp=0,t.noise_shaping_stop=0,-1==t.subblock_gain&&(t.subblock_gain=1),t.use_best_huffman=1,t.full_outer_loop=0;break;case 3:t.psymodel=1,0==t.noise_shaping&&(t.noise_shaping=1),t.noise_shaping_amp=1,t.noise_shaping_stop=1,-1==t.subblock_gain&&(t.subblock_gain=1),t.use_best_huffman=1,t.full_outer_loop=0;break;case 2:t.psymodel=1,0==t.noise_shaping&&(t.noise_shaping=1),0==t.substep_shaping&&(t.substep_shaping=2),t.noise_shaping_amp=1,t.noise_shaping_stop=1,-1==t.subblock_gain&&(t.subblock_gain=1),t.use_best_huffman=1,t.full_outer_loop=0;break;case 1:case 0:t.psymodel=1,0==t.noise_shaping&&(t.noise_shaping=1),0==t.substep_shaping&&(t.substep_shaping=2),t.noise_shaping_amp=2,t.noise_shaping_stop=1,-1==t.subblock_gain&&(t.subblock_gain=1),t.use_best_huffman=1,t.full_outer_loop=0}}(r),i(r.scale>=0),r.athaa_type<0?l.ATH.useAdjust=3:l.ATH.useAdjust=r.athaa_type,l.ATH.aaSensitivityP=Math.pow(10,r.athaa_sensitivity/-10),null==r.short_blocks&&(r.short_blocks=n.short_block_allowed),r.short_blocks==n.short_block_allowed&&(r.mode==m.JOINT_STEREO||r.mode==m.STEREO)&&(r.short_blocks=n.short_block_coupled),r.quant_comp<0&&(r.quant_comp=1),r.quant_comp_short<0&&(r.quant_comp_short=0),r.msfix<0&&(r.msfix=0),r.exp_nspsytune=1|r.exp_nspsytune,r.internal_flags.nsPsy.attackthre<0&&(r.internal_flags.nsPsy.attackthre=s.NSATTACKTHRE),r.internal_flags.nsPsy.attackthre_s<0&&(r.internal_flags.nsPsy.attackthre_s=s.NSATTACKTHRE_S),i(r.scale>=0),r.scale<0&&(r.scale=1),r.ATHtype<0&&(r.ATHtype=4),r.ATHcurve<0&&(r.ATHcurve=4),r.athaa_loudapprox<0&&(r.athaa_loudapprox=2),r.interChRatio<0&&(r.interChRatio=0),null==r.useTemporal&&(r.useTemporal=!0),l.slot_lag=l.frac_SpF=0,r.VBR==t.vbr_off&&(l.slot_lag=l.frac_SpF=72e3*(r.version+1)*r.brate%r.out_samplerate|0),y.iteration_init(r),M.psymodel_init(r),i(r.scale>=0),0},this.lame_encode_flush=function(e,t,n,r){var a,i,s,l,c=e.internal_flags,u=o([2,1152]),d=0,A=c.mf_samples_to_encode-p.POSTDELAY,h=P(e);if(c.mf_samples_to_encode<1)return 0;for(a=0,e.in_samplerate!=e.out_samplerate&&(A+=16*e.out_samplerate/e.in_samplerate),(s=e.framesize-A%e.framesize)<576&&(s+=e.framesize),e.encoder_padding=s,l=(A+s)/e.framesize;l>0&&d>=0;){var f=h-c.mf_size,_=e.frameNum;f*=e.in_samplerate,(f/=e.out_samplerate)>1152&&(f=1152),f<1&&(f=1),i=r-a,0==r&&(i=0),n+=d=this.lame_encode_buffer(e,u[0],u[1],f,t,n,i),a+=d,l-=_!=e.frameNum?1:0}if(c.mf_samples_to_encode=0,d<0||(i=r-a,0==r&&(i=0),v.flush_bitstream(e),(d=v.copy_buffer(c,t,n,i,1))<0))return d;if(n+=d,i=r-(a+=d),0==r&&(i=0),e.write_id3tag_automatic){if(x.id3tag_write_v1(e),(d=v.copy_buffer(c,t,n,i,0))<0)return d;a+=d}return a},this.lame_encode_buffer=function(e,t,n,a,o,s,l){var u=e.internal_flags,d=[null,null];if(u.Class_ID!=R)return-3;if(0==a)return 0;(function(e,t){(null==e.in_buffer_0||e.in_buffer_nsamples<t)&&(e.in_buffer_0=r(t),e.in_buffer_1=r(t),e.in_buffer_nsamples=t)})(u,a),d[0]=u.in_buffer_0,d[1]=u.in_buffer_1;for(var A=0;A<a;A++)d[0][A]=t[A],u.channels_in>1&&(d[1][A]=n[A]);return function(e,t,n,r,a,o,s){var l,u,d,A,f,_=e.internal_flags,m=0,b=[null,null],C=[null,null];if(_.Class_ID!=R)return-3;if(0==r)return 0;if((f=v.copy_buffer(_,a,o,s,0))<0)return f;if(o+=f,m+=f,C[0]=t,C[1]=n,h.NEQ(e.scale,0)&&h.NEQ(e.scale,1))for(u=0;u<r;++u)C[0][u]*=e.scale,2==_.channels_out&&(C[1][u]*=e.scale);if(h.NEQ(e.scale_left,0)&&h.NEQ(e.scale_left,1))for(u=0;u<r;++u)C[0][u]*=e.scale_left;if(h.NEQ(e.scale_right,0)&&h.NEQ(e.scale_right,1))for(u=0;u<r;++u)C[1][u]*=e.scale_right;if(2==e.num_channels&&1==_.channels_out)for(u=0;u<r;++u)C[0][u]=.5*(C[0][u]+C[1][u]),C[1][u]=0;A=P(e),b[0]=_.mfbuf[0],b[1]=_.mfbuf[1];for(var y=0;r>0;){var k,w,x=[null,null];x[0]=C[0],x[1]=C[1];var E=new V;if(H(e,b,x,y,r,E),k=E.n_in,w=E.n_out,_.findReplayGain&&!_.decode_on_the_fly&&g.AnalyzeSamples(_.rgdata,b[0],_.mf_size,b[1],_.mf_size,w,_.channels_out)==GainAnalysis.GAIN_ANALYSIS_ERROR)return-6;if(r-=k,y+=k,_.channels_out,_.mf_size+=w,i(_.mf_size<=c.MFSIZE),_.mf_samples_to_encode<1&&(_.mf_samples_to_encode=p.ENCDELAY+p.POSTDELAY),_.mf_samples_to_encode+=w,_.mf_size>=A){var M=s-m;if(0==s&&(M=0),(l=j(e,b[0],b[1],a,o,M))<0)return l;for(o+=l,m+=l,_.mf_size-=e.framesize,_.mf_samples_to_encode-=e.framesize,d=0;d<_.channels_out;d++)for(u=0;u<_.mf_size;u++)b[d][u]=b[d][u+e.framesize]}}return m}(e,d[0],d[1],a,o,s,l)}},Ei}var Oi=Ua.VbrMode,Ni=Ua.new_float,Li=Ua.new_int,Di=Ua.System,Pi=Ua.VbrMode,ji=Ua.Util,Vi=Ua.Arrays,zi=Ua.new_float,Fi=Ua.assert,qi=function(){this.setModules=function(e,t){}},Gi=function(){this.over_noise=0,this.tot_noise=0,this.max_noise=0,this.over_count=0,this.over_SSD=0,this.bits=0},Hi=function(){this.global_gain=0,this.sfb_count1=0,this.step=Li(39),this.noise=Ni(39),this.noise_log=Ni(39)},Yi=to(),Xi=Eo,Wi=yo,Zi=Ua.assert,Ui=Ua.System,Qi=Ua.VbrMode,Ki=Ua.ShortBlock,Ji=Ua.Arrays,$i=Ua.new_byte,es=Ua.assert;function ts(){var e,t,n;this.setModules=function(r,a,o){e=r,t=a,n=o};var r=ts.NUMTOCENTRIES,a=ts.MAXFRAMESIZE,o=r+4+4+4+4+4+9+1+1+8+1+1+3+1+1+2+4+2+2,i="Xing",s="Info",l=[0,49345,49537,320,49921,960,640,49729,50689,1728,1920,51009,1280,50625,50305,1088,52225,3264,3456,52545,3840,53185,52865,3648,2560,51905,52097,2880,51457,2496,2176,51265,55297,6336,6528,55617,6912,56257,55937,6720,7680,57025,57217,8e3,56577,7616,7296,56385,5120,54465,54657,5440,55041,6080,5760,54849,53761,4800,4992,54081,4352,53697,53377,4160,61441,12480,12672,61761,13056,62401,62081,12864,13824,63169,63361,14144,62721,13760,13440,62529,15360,64705,64897,15680,65281,16320,16e3,65089,64001,15040,15232,64321,14592,63937,63617,14400,10240,59585,59777,10560,60161,11200,10880,59969,60929,11968,12160,61249,11520,60865,60545,11328,58369,9408,9600,58689,9984,59329,59009,9792,8704,58049,58241,9024,57601,8640,8320,57409,40961,24768,24960,41281,25344,41921,41601,25152,26112,42689,42881,26432,42241,26048,25728,42049,27648,44225,44417,27968,44801,28608,28288,44609,43521,27328,27520,43841,26880,43457,43137,26688,30720,47297,47489,31040,47873,31680,31360,47681,48641,32448,32640,48961,32e3,48577,48257,31808,46081,29888,30080,46401,30464,47041,46721,30272,29184,45761,45953,29504,45313,29120,28800,45121,20480,37057,37249,20800,37633,21440,21120,37441,38401,22208,22400,38721,21760,38337,38017,21568,39937,23744,23936,40257,24320,40897,40577,24128,23040,39617,39809,23360,39169,22976,22656,38977,34817,18624,18816,35137,19200,35777,35457,19008,19968,36545,36737,20288,36097,19904,19584,35905,17408,33985,34177,17728,34561,18368,18048,34369,33281,17088,17280,33601,16640,33217,32897,16448];function c(e,t){var n=255&e[t+0];return n<<=8,n|=255&e[t+1],n<<=8,n|=255&e[t+2],(n<<=8)|255&e[t+3]}function u(e,t,n){e[t+0]=255&n>>24,e[t+1]=255&n>>16,e[t+2]=255&n>>8,e[t+3]=255&n}function d(e,t,n){e[t+0]=255&n>>8,e[t+1]=255&n}function A(e,t,n){return 255&(e<<t|n&~(-1<<t))}function h(t,n){var r=t.internal_flags;n[0]=A(n[0],8,255),n[1]=A(n[1],3,7),n[1]=A(n[1],1,t.out_samplerate<16e3?0:1),n[1]=A(n[1],1,t.version),n[1]=A(n[1],2,1),n[1]=A(n[1],1,t.error_protection?0:1),n[2]=A(n[2],4,r.bitrate_index),n[2]=A(n[2],2,r.samplerate_index),n[2]=A(n[2],1,0),n[2]=A(n[2],1,t.extension),n[3]=A(n[3],2,t.mode.ordinal()),n[3]=A(n[3],2,r.mode_ext),n[3]=A(n[3],1,t.copyright),n[3]=A(n[3],1,t.original),n[3]=A(n[3],2,t.emphasis),n[0]=255;var a,o,i=241&n[1];a=1==t.version?128:t.out_samplerate<16e3?32:64,t.VBR==Qi.vbr_off&&(a=t.brate),o=t.free_format?0:255&16*e.BitrateIndex(a,t.version,t.out_samplerate),1==t.version?(n[1]=255&i|10,i=13&n[2],n[2]=255&(o|i)):(n[1]=255&i|2,i=13&n[2],n[2]=255&(o|i))}function f(e,t){return t>>8^l[255&(t^e)]}this.addVbrFrame=function(e){var t=e.internal_flags,n=Tables.bitrate_table[e.version][t.bitrate_index];es(null!=t.VBR_seek_table.bag),function(e,t){if(e.nVbrNumFrames++,e.sum+=t,e.seen++,!(e.seen<e.want)&&(e.pos<e.size&&(e.bag[e.pos]=e.sum,e.pos++,e.seen=0),e.pos==e.size)){for(var n=1;n<e.size;n+=2)e.bag[n/2]=e.bag[n];e.want*=2,e.pos/=2}}(t.VBR_seek_table,n)},this.getVbrTag=function(e){var t=new VBRTagData,n=0;t.flags=0;var a=e[n+1]>>3&1,o=e[n+2]>>2&3,l=e[n+3]>>6&3,u=e[n+2]>>4&15;if(u=Tables.bitrate_table[a][u],e[n+1]>>4==14?t.samprate=Tables.samplerate_table[2][o]:t.samprate=Tables.samplerate_table[a][o],!function(e,t){return new String(e,t,4(),null).equals(i)||new String(e,t,4(),null).equals(s)}(e,n+=0!=a?3!=l?36:21:3!=l?21:13))return null;n+=4,t.hId=a;var d=t.flags=c(e,n);if(n+=4,1&d&&(t.frames=c(e,n),n+=4),2&d&&(t.bytes=c(e,n),n+=4),4&d){if(null!=t.toc)for(var A=0;A<r;A++)t.toc[A]=e[n+A];n+=r}t.vbrScale=-1,8&d&&(t.vbrScale=c(e,n),n+=4),t.headersize=72e3*(a+1)*u/t.samprate;var h=e[(n+=21)+0]<<4;h+=e[n+1]>>4;var f=(15&e[n+1])<<8;return(h<0||h>3e3)&&(h=-1),((f+=255&e[n+2])<0||f>3e3)&&(f=-1),t.encDelay=h,t.encPadding=f,t},this.InitVbrTag=function(e){var n,r=e.internal_flags;n=1==e.version?128:e.out_samplerate<16e3?32:64,e.VBR==Qi.vbr_off&&(n=e.brate);var i=72e3*(e.version+1)*n/e.out_samplerate,s=r.sideinfo_len+o;if(r.VBR_seek_table.TotalFrameSize=i,i<s||i>a)e.bWriteVbrTag=!1;else{r.VBR_seek_table.nVbrNumFrames=0,r.VBR_seek_table.nBytesWritten=0,r.VBR_seek_table.sum=0,r.VBR_seek_table.seen=0,r.VBR_seek_table.want=1,r.VBR_seek_table.pos=0,null==r.VBR_seek_table.bag&&(r.VBR_seek_table.bag=new int[400],r.VBR_seek_table.size=400);var l=$i(a);h(e,l);for(var c=r.VBR_seek_table.TotalFrameSize,u=0;u<c;++u)t.add_dummy_byte(e,255&l[u],1)}},this.updateMusicCRC=function(e,t,n,r){for(var a=0;a<r;++a)e[0]=f(t[n+a],e[0])},this.getLameTagFrame=function(e,a){var o=e.internal_flags;if(!e.bWriteVbrTag||o.Class_ID!=Lame.LAME_ID||o.VBR_seek_table.pos<=0)return 0;if(a.length<o.VBR_seek_table.TotalFrameSize)return o.VBR_seek_table.TotalFrameSize;Ji.fill(a,0,o.VBR_seek_table.TotalFrameSize,0),h(e,a);var l=$i(r);if(e.free_format)for(var c=1;c<r;++c)l[c]=255&255*c/100;else!function(e,t){if(!(e.pos<=0))for(var n=1;n<r;++n){var a=n/r,o=0|Math.floor(a*e.pos);o>e.pos-1&&(o=e.pos-1);var i=0|256*e.bag[o]/e.sum;i>255&&(i=255),t[n]=255&i}}(o.VBR_seek_table,l);var A=o.sideinfo_len;e.error_protection&&(A-=2),e.VBR==Qi.vbr_off?(a[A++]=255&s.charAt(0),a[A++]=255&s.charAt(1),a[A++]=255&s.charAt(2),a[A++]=255&s.charAt(3)):(a[A++]=255&i.charAt(0),a[A++]=255&i.charAt(1),a[A++]=255&i.charAt(2),a[A++]=255&i.charAt(3)),u(a,A,15),u(a,A+=4,o.VBR_seek_table.nVbrNumFrames),A+=4;var p=o.VBR_seek_table.nBytesWritten+o.VBR_seek_table.TotalFrameSize;u(a,A,0|p),A+=4,Ui.arraycopy(l,0,a,A,l.length),A+=l.length,e.error_protection&&t.CRC_writeheader(o,a);var _=0;for(c=0;c<A;c++)_=f(a[c],_);return A+=function(e,t,r,a,o){var i,s,l,c,A,h,p=e.internal_flags,_=0,m=e.encoder_delay,b=e.encoder_padding,g=100-10*e.VBR_q-e.quality,v=n.getLameVeryShortVersion(),C=[1,5,3,2,4,0,3],y=0|(e.lowpassfreq/100+.5>255?255:e.lowpassfreq/100+.5),k=0,w=0,x=e.internal_flags.noise_shaping,E=0,M=0,B=!!(1&e.exp_nspsytune),S=!!(2&e.exp_nspsytune),T=!1,R=!1,I=e.internal_flags.nogap_total,O=e.internal_flags.nogap_current,N=e.ATHtype;switch(e.VBR){case vbr_abr:A=e.VBR_mean_bitrate_kbps;break;case vbr_off:A=e.brate;break;default:A=e.VBR_min_bitrate_kbps}switch(i=0+(e.VBR.ordinal()<C.length?C[e.VBR.ordinal()]:0),p.findReplayGain&&(p.RadioGain>510&&(p.RadioGain=510),p.RadioGain<-510&&(p.RadioGain=-510),w=8192,w|=3072,p.RadioGain>=0?w|=p.RadioGain:(w|=512,w|=-p.RadioGain)),p.findPeakSample&&(k=Math.abs(0|p.PeakSample/32767*Math.pow(2,23)+.5)),-1!=I&&(O>0&&(R=!0),O<I-1&&(T=!0)),c=N+((B?1:0)<<4)+((S?1:0)<<5)+((T?1:0)<<6)+((R?1:0)<<7),g<0&&(g=0),e.mode){case MONO:E=0;break;case STEREO:E=1;break;case DUAL_CHANNEL:E=2;break;case JOINT_STEREO:E=e.force_ms?4:3;break;case NOT_SET:default:E=7}h=e.in_samplerate<=32e3?0:48e3==e.in_samplerate?2:e.in_samplerate>48e3?3:1,(e.short_blocks==Ki.short_block_forced||e.short_blocks==Ki.short_block_dispensed||-1==e.lowpassfreq&&-1==e.highpassfreq||e.scale_left<e.scale_right||e.scale_left>e.scale_right||e.disable_reservoir&&e.brate<320||e.noATH||e.ATHonly||0==N||e.in_samplerate<=32e3)&&(M=1),s=x+(E<<2)+(M<<5)+(h<<6),l=p.nMusicCRC,u(r,a+_,g),_+=4;for(var L=0;L<9;L++)r[a+_+L]=255&v.charAt(L);r[a+(_+=9)]=255&i,r[a+ ++_]=255&y,u(r,a+ ++_,k),d(r,a+(_+=4),w),d(r,a+(_+=2),0),r[a+(_+=2)]=255&c,r[a+ ++_]=A>=255?255:255&A,r[a+ ++_]=255&m>>4,r[a+_+1]=255&(m<<4)+(b>>8),r[a+_+2]=255&b,r[a+(_+=3)]=255&s,_++,r[a+_++]=0,d(r,a+_,e.preset),u(r,a+(_+=2),t),d(r,a+(_+=4),l),_+=2;for(var D=0;D<_;D++)o=f(r[a+D],o);return d(r,a+_,o),_+2}(e,p,a,A,_),o.VBR_seek_table.TotalFrameSize},this.putVbrTag=function(e,t){if(e.internal_flags.VBR_seek_table.pos<=0||(t.seek(t.length()),0==t.length()))return-1;var n=function(e){e.seek(0);var t=$i(10);return e.readFully(t),new String(t,"ISO-8859-1").startsWith("ID3")?0:((127&t[6])<<21|(127&t[7])<<14|(127&t[8])<<7|127&t[9])+t.length}(t);t.seek(n);var r=$i(a),o=getLameTagFrame(e,r);return o>r.length?-1:(o<1||t.write(r,0,o),0)}}ts.NUMTOCENTRIES=100,ts.MAXFRAMESIZE=2880;var ns=ts,rs=Ua.new_byte,as=Ua.assert,os=Ii(),is=function(){var e,t=Ii();function n(e,t,n,r,a,o,i,s,l,c,u,d,A,h,f){this.vbr_q=e,this.quant_comp=t,this.quant_comp_s=n,this.expY=r,this.st_lrm=a,this.st_s=o,this.masking_adj=i,this.masking_adj_short=s,this.ath_lower=l,this.ath_curve=c,this.ath_sensitivity=u,this.interch=d,this.safejoint=A,this.sfb21mod=h,this.msfix=f}function r(e,t,n,r,a,o,i,s,l,c,u,d,A,h){this.quant_comp=t,this.quant_comp_s=n,this.safejoint=r,this.nsmsfix=a,this.st_lrm=o,this.st_s=i,this.nsbass=s,this.scale=l,this.masking_adj=c,this.ath_lower=u,this.ath_curve=d,this.interch=A,this.sfscale=h}this.setModules=function(t){e=t};var a=[new n(0,9,9,0,5.2,125,-4.2,-6.3,4.8,1,0,0,2,21,.97),new n(1,9,9,0,5.3,125,-3.6,-5.6,4.5,1.5,0,0,2,21,1.35),new n(2,9,9,0,5.6,125,-2.2,-3.5,2.8,2,0,0,2,21,1.49),new n(3,9,9,1,5.8,130,-1.8,-2.8,2.6,3,-4,0,2,20,1.64),new n(4,9,9,1,6,135,-.7,-1.1,1.1,3.5,-8,0,2,0,1.79),new n(5,9,9,1,6.4,140,.5,.4,-7.5,4,-12,2e-4,0,0,1.95),new n(6,9,9,1,6.6,145,.67,.65,-14.7,6.5,-19,4e-4,0,0,2.3),new n(7,9,9,1,6.6,145,.8,.75,-19.7,8,-22,6e-4,0,0,2.7),new n(8,9,9,1,6.6,145,1.2,1.15,-27.5,10,-23,7e-4,0,0,0),new n(9,9,9,1,6.6,145,1.6,1.6,-36,11,-25,8e-4,0,0,0),new n(10,9,9,1,6.6,145,2,2,-36,12,-25,8e-4,0,0,0)],o=[new n(0,9,9,0,4.2,25,-7,-4,7.5,1,0,0,2,26,.97),new n(1,9,9,0,4.2,25,-5.6,-3.6,4.5,1.5,0,0,2,21,1.35),new n(2,9,9,0,4.2,25,-4.4,-1.8,2,2,0,0,2,18,1.49),new n(3,9,9,1,4.2,25,-3.4,-1.25,1.1,3,-4,0,2,15,1.64),new n(4,9,9,1,4.2,25,-2.2,.1,0,3.5,-8,0,2,0,1.79),new n(5,9,9,1,4.2,25,-1,1.65,-7.7,4,-12,2e-4,0,0,1.95),new n(6,9,9,1,4.2,25,-0,2.47,-7.7,6.5,-19,4e-4,0,0,2),new n(7,9,9,1,4.2,25,.5,2,-14.5,8,-22,6e-4,0,0,2),new n(8,9,9,1,4.2,25,1,2.4,-22,10,-23,7e-4,0,0,2),new n(9,9,9,1,4.2,25,1.5,2.95,-30,11,-25,8e-4,0,0,2),new n(10,9,9,1,4.2,25,2,2.95,-36,12,-30,8e-4,0,0,2)];function i(e,t,n){var r=e.VBR==Oi.vbr_rh?a:o,i=e.VBR_q_frac,s=r[t],l=r[t+1],c=s;s.st_lrm=s.st_lrm+i*(l.st_lrm-s.st_lrm),s.st_s=s.st_s+i*(l.st_s-s.st_s),s.masking_adj=s.masking_adj+i*(l.masking_adj-s.masking_adj),s.masking_adj_short=s.masking_adj_short+i*(l.masking_adj_short-s.masking_adj_short),s.ath_lower=s.ath_lower+i*(l.ath_lower-s.ath_lower),s.ath_curve=s.ath_curve+i*(l.ath_curve-s.ath_curve),s.ath_sensitivity=s.ath_sensitivity+i*(l.ath_sensitivity-s.ath_sensitivity),s.interch=s.interch+i*(l.interch-s.interch),s.msfix=s.msfix+i*(l.msfix-s.msfix),function(e,t){0>t&&(t=0),9<t&&(t=9),e.VBR_q=t,e.VBR_q_frac=0}(e,c.vbr_q),0!=n?e.quant_comp=c.quant_comp:Math.abs(e.quant_comp- -1)>0||(e.quant_comp=c.quant_comp),0!=n?e.quant_comp_short=c.quant_comp_s:Math.abs(e.quant_comp_short- -1)>0||(e.quant_comp_short=c.quant_comp_s),0!=c.expY&&(e.experimentalY=0!=c.expY),0!=n?e.internal_flags.nsPsy.attackthre=c.st_lrm:Math.abs(e.internal_flags.nsPsy.attackthre- -1)>0||(e.internal_flags.nsPsy.attackthre=c.st_lrm),0!=n?e.internal_flags.nsPsy.attackthre_s=c.st_s:Math.abs(e.internal_flags.nsPsy.attackthre_s- -1)>0||(e.internal_flags.nsPsy.attackthre_s=c.st_s),0!=n?e.maskingadjust=c.masking_adj:Math.abs(e.maskingadjust-0)>0||(e.maskingadjust=c.masking_adj),0!=n?e.maskingadjust_short=c.masking_adj_short:Math.abs(e.maskingadjust_short-0)>0||(e.maskingadjust_short=c.masking_adj_short),0!=n?e.ATHlower=-c.ath_lower/10:Math.abs(10*-e.ATHlower-0)>0||(e.ATHlower=-c.ath_lower/10),0!=n?e.ATHcurve=c.ath_curve:Math.abs(e.ATHcurve- -1)>0||(e.ATHcurve=c.ath_curve),0!=n?e.athaa_sensitivity=c.ath_sensitivity:Math.abs(e.athaa_sensitivity- -1)>0||(e.athaa_sensitivity=c.ath_sensitivity),c.interch>0&&(0!=n?e.interChRatio=c.interch:Math.abs(e.interChRatio- -1)>0||(e.interChRatio=c.interch)),c.safejoint>0&&(e.exp_nspsytune=e.exp_nspsytune|c.safejoint),c.sfb21mod>0&&(e.exp_nspsytune=e.exp_nspsytune|c.sfb21mod<<20),0!=n?e.msfix=c.msfix:Math.abs(e.msfix- -1)>0||(e.msfix=c.msfix),0==n&&(e.VBR_q=t,e.VBR_q_frac=i)}var s=[new r(8,9,9,0,0,6.6,145,0,.95,0,-30,11,.0012,1),new r(16,9,9,0,0,6.6,145,0,.95,0,-25,11,.001,1),new r(24,9,9,0,0,6.6,145,0,.95,0,-20,11,.001,1),new r(32,9,9,0,0,6.6,145,0,.95,0,-15,11,.001,1),new r(40,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new r(48,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new r(56,9,9,0,0,6.6,145,0,.95,0,-6,11,8e-4,1),new r(64,9,9,0,0,6.6,145,0,.95,0,-2,11,8e-4,1),new r(80,9,9,0,0,6.6,145,0,.95,0,0,8,7e-4,1),new r(96,9,9,0,2.5,6.6,145,0,.95,0,1,5.5,6e-4,1),new r(112,9,9,0,2.25,6.6,145,0,.95,0,2,4.5,5e-4,1),new r(128,9,9,0,1.95,6.4,140,0,.95,0,3,4,2e-4,1),new r(160,9,9,1,1.79,6,135,0,.95,-2,5,3.5,0,1),new r(192,9,9,1,1.49,5.6,125,0,.97,-4,7,3,0,0),new r(224,9,9,1,1.25,5.2,125,0,.98,-6,9,2,0,0),new r(256,9,9,1,.97,5.2,125,0,1,-8,10,1,0,0),new r(320,9,9,1,.9,5.2,125,0,1,-10,12,0,0,0)];function l(t,n,r){var a=n,o=e.nearestBitrateFullIndex(n);if(t.VBR=Oi.vbr_abr,t.VBR_mean_bitrate_kbps=a,t.VBR_mean_bitrate_kbps=Math.min(t.VBR_mean_bitrate_kbps,320),t.VBR_mean_bitrate_kbps=Math.max(t.VBR_mean_bitrate_kbps,8),t.brate=t.VBR_mean_bitrate_kbps,t.VBR_mean_bitrate_kbps>320&&(t.disable_reservoir=!0),s[o].safejoint>0&&(t.exp_nspsytune=2|t.exp_nspsytune),s[o].sfscale>0&&(t.internal_flags.noise_shaping=2),Math.abs(s[o].nsbass)>0){var i=int(4*s[o].nsbass);i<0&&(i+=64),t.exp_nspsytune=t.exp_nspsytune|i<<2}return 0!=r?t.quant_comp=s[o].quant_comp:Math.abs(t.quant_comp- -1)>0||(t.quant_comp=s[o].quant_comp),0!=r?t.quant_comp_short=s[o].quant_comp_s:Math.abs(t.quant_comp_short- -1)>0||(t.quant_comp_short=s[o].quant_comp_s),0!=r?t.msfix=s[o].nsmsfix:Math.abs(t.msfix- -1)>0||(t.msfix=s[o].nsmsfix),0!=r?t.internal_flags.nsPsy.attackthre=s[o].st_lrm:Math.abs(t.internal_flags.nsPsy.attackthre- -1)>0||(t.internal_flags.nsPsy.attackthre=s[o].st_lrm),0!=r?t.internal_flags.nsPsy.attackthre_s=s[o].st_s:Math.abs(t.internal_flags.nsPsy.attackthre_s- -1)>0||(t.internal_flags.nsPsy.attackthre_s=s[o].st_s),0!=r?t.scale=s[o].scale:Math.abs(t.scale- -1)>0||(t.scale=s[o].scale),0!=r?t.maskingadjust=s[o].masking_adj:Math.abs(t.maskingadjust-0)>0||(t.maskingadjust=s[o].masking_adj),s[o].masking_adj>0?0!=r?t.maskingadjust_short=.9*s[o].masking_adj:Math.abs(t.maskingadjust_short-0)>0||(t.maskingadjust_short=.9*s[o].masking_adj):0!=r?t.maskingadjust_short=1.1*s[o].masking_adj:Math.abs(t.maskingadjust_short-0)>0||(t.maskingadjust_short=1.1*s[o].masking_adj),0!=r?t.ATHlower=-s[o].ath_lower/10:Math.abs(10*-t.ATHlower-0)>0||(t.ATHlower=-s[o].ath_lower/10),0!=r?t.ATHcurve=s[o].ath_curve:Math.abs(t.ATHcurve- -1)>0||(t.ATHcurve=s[o].ath_curve),0!=r?t.interChRatio=s[o].interch:Math.abs(t.interChRatio- -1)>0||(t.interChRatio=s[o].interch),n}this.apply_preset=function(e,n,r){switch(n){case t.R3MIX:n=t.V3,e.VBR=Oi.vbr_mtrh;break;case t.MEDIUM:n=t.V4,e.VBR=Oi.vbr_rh;break;case t.MEDIUM_FAST:n=t.V4,e.VBR=Oi.vbr_mtrh;break;case t.STANDARD:n=t.V2,e.VBR=Oi.vbr_rh;break;case t.STANDARD_FAST:n=t.V2,e.VBR=Oi.vbr_mtrh;break;case t.EXTREME:n=t.V0,e.VBR=Oi.vbr_rh;break;case t.EXTREME_FAST:n=t.V0,e.VBR=Oi.vbr_mtrh;break;case t.INSANE:return n=320,e.preset=n,l(e,n,r),e.VBR=Oi.vbr_off,n}switch(e.preset=n,n){case t.V9:return i(e,9,r),n;case t.V8:return i(e,8,r),n;case t.V7:return i(e,7,r),n;case t.V6:return i(e,6,r),n;case t.V5:return i(e,5,r),n;case t.V4:return i(e,4,r),n;case t.V3:return i(e,3,r),n;case t.V2:return i(e,2,r),n;case t.V1:return i(e,1,r),n;case t.V0:return i(e,0,r),n}return 8<=n&&n<=320?l(e,n,r):(e.preset=0,n)}},ss=ai,ls=Si(),cs=function(){var e,t;this.rv=null,this.qupvt=null;var n,r,a=new qi;function o(e){this.ordinal=e}function i(e){for(var t=0;t<e.sfbmax;t++)if(e.scalefac[t]+e.subblock_gain[e.window[t]]==0)return!1;return!0}function s(e){return ji.FAST_LOG10(.368+.632*e*e*e)}function l(e,t,n,r,a){var o;switch(e){default:case 9:t.over_count>0?(o=n.over_SSD<=t.over_SSD,n.over_SSD==t.over_SSD&&(o=n.bits<t.bits)):o=n.max_noise<0&&10*n.max_noise+n.bits<=10*t.max_noise+t.bits;break;case 0:o=n.over_count<t.over_count||n.over_count==t.over_count&&n.over_noise<t.over_noise||n.over_count==t.over_count&&BitStream.EQ(n.over_noise,t.over_noise)&&n.tot_noise<t.tot_noise;break;case 8:n.max_noise=function(e,t){for(var n=1e-37,r=0;r<t.psymax;r++)n+=s(e[r]);return Math.max(1e-20,n)}(a,r);case 1:o=n.max_noise<t.max_noise;break;case 2:o=n.tot_noise<t.tot_noise;break;case 3:o=n.tot_noise<t.tot_noise&&n.max_noise<t.max_noise;break;case 4:o=n.max_noise<=0&&t.max_noise>.2||n.max_noise<=0&&t.max_noise<0&&t.max_noise>n.max_noise-.2&&n.tot_noise<t.tot_noise||n.max_noise<=0&&t.max_noise>0&&t.max_noise>n.max_noise-.2&&n.tot_noise<t.tot_noise+t.over_noise||n.max_noise>0&&t.max_noise>-.05&&t.max_noise>n.max_noise-.1&&n.tot_noise+n.over_noise<t.tot_noise+t.over_noise||n.max_noise>0&&t.max_noise>-.1&&t.max_noise>n.max_noise-.15&&n.tot_noise+n.over_noise+n.over_noise<t.tot_noise+t.over_noise+t.over_noise;break;case 5:o=n.over_noise<t.over_noise||BitStream.EQ(n.over_noise,t.over_noise)&&n.tot_noise<t.tot_noise;break;case 6:o=n.over_noise<t.over_noise||BitStream.EQ(n.over_noise,t.over_noise)&&(n.max_noise<t.max_noise||BitStream.EQ(n.max_noise,t.max_noise)&&n.tot_noise<=t.tot_noise);break;case 7:o=n.over_count<t.over_count||n.over_noise<t.over_noise}return 0==t.over_count&&(o=o&&n.bits<t.bits),o}function c(e,t,a,o,s){var l=e.internal_flags;!function(e,t,n,r,a){var o,i=e.internal_flags;o=0==t.scalefac_scale?1.2968395546510096:1.6817928305074292;for(var s=0,l=0;l<t.sfbmax;l++)s<n[l]&&(s=n[l]);var c=i.noise_shaping_amp;switch(3==c&&(c=a?2:1),c){case 2:break;case 1:s>1?s=Math.pow(s,.5):s*=.95;break;default:s>1?s=1:s*=.95}var u=0;for(l=0;l<t.sfbmax;l++){var d,A=t.width[l];if(u+=A,!(n[l]<s)){if(2&i.substep_shaping&&(i.pseudohalf[l]=0==i.pseudohalf[l]?1:0,0==i.pseudohalf[l]&&2==i.noise_shaping_amp))return;for(t.scalefac[l]++,d=-A;d<0;d++)r[u+d]*=o,r[u+d]>t.xrpow_max&&(t.xrpow_max=r[u+d]);if(2==i.noise_shaping_amp)return}}}(e,t,a,o,s);var c=i(t);return!(c||(c=2==l.mode_gr?r.scale_bitcount(t):r.scale_bitcount_lsf(l,t))&&(l.noise_shaping>1&&(Vi.fill(l.pseudohalf,0),0==t.scalefac_scale?(function(e,t){for(var r=0,a=0;a<e.sfbmax;a++){var o=e.width[a],i=e.scalefac[a];if(0!=e.preflag&&(i+=n.pretab[a]),r+=o,1&i){i++;for(var s=-o;s<0;s++)t[r+s]*=1.2968395546510096,t[r+s]>e.xrpow_max&&(e.xrpow_max=t[r+s])}e.scalefac[a]=i>>1}e.preflag=0,e.scalefac_scale=1}(t,o),c=!1):t.block_type==Yi.SHORT_TYPE&&l.subblock_gain>0&&(c=function(e,t,r){var a,o=t.scalefac;for(a=0;a<t.sfb_lmax;a++)if(o[a]>=16)return!0;for(var i=0;i<3;i++){var s=0,l=0;for(a=t.sfb_lmax+i;a<t.sfbdivide;a+=3)s<o[a]&&(s=o[a]);for(;a<t.sfbmax;a+=3)l<o[a]&&(l=o[a]);if(!(s<16&&l<8)){if(t.subblock_gain[i]>=7)return!0;t.subblock_gain[i]++;var c=e.scalefac_band.l[t.sfb_lmax];for(a=t.sfb_lmax+i;a<t.sfbmax;a+=3){var u=t.width[a],d=o[a];if((d-=4>>t.scalefac_scale)>=0)o[a]=d,c+=3*u;else{o[a]=0;var A=210+(d<<t.scalefac_scale+1);f=n.IPOW20(A),c+=u*(i+1);for(var h=-u;h<0;h++)r[c+h]*=f,r[c+h]>t.xrpow_max&&(t.xrpow_max=r[c+h]);c+=u*(3-i-1)}}var f=n.IPOW20(202);for(c+=t.width[a]*(i+1),h=-t.width[a];h<0;h++)r[c+h]*=f,r[c+h]>t.xrpow_max&&(t.xrpow_max=r[c+h])}}return!1}(l,t,o)||i(t))),c||(c=2==l.mode_gr?r.scale_bitcount(t):r.scale_bitcount_lsf(l,t)),c))}this.setModules=function(o,i,s,l){e=o,t=i,this.rv=i,n=s,this.qupvt=s,r=l,a.setModules(n,r)},this.ms_convert=function(e,t){for(var n=0;n<576;++n){var r=e.tt[t][0].xr[n],a=e.tt[t][1].xr[n];e.tt[t][0].xr[n]=(r+a)*(.5*ji.SQRT2),e.tt[t][1].xr[n]=(r-a)*(.5*ji.SQRT2)}},this.init_xrpow=function(e,t,n){var r=0,a=0|t.max_nonzero_coeff;if(t.xrpow_max=0,Vi.fill(n,a,576,0),r=function(e,t,n,r){r=0;for(var a=0;a<=n;++a){var o=Math.abs(e.xr[a]);r+=o,t[a]=Math.sqrt(o*Math.sqrt(o)),t[a]>e.xrpow_max&&(e.xrpow_max=t[a])}return r}(t,n,a,r),r>1e-20){var o=0;2&e.substep_shaping&&(o=1);for(var i=0;i<t.psymax;i++)e.pseudohalf[i]=o;return!0}return Vi.fill(t.l3_enc,0,576,0),!1},this.init_outer_loop=function(e,t){t.part2_3_length=0,t.big_values=0,t.count1=0,t.global_gain=210,t.scalefac_compress=0,t.table_select[0]=0,t.table_select[1]=0,t.table_select[2]=0,t.subblock_gain[0]=0,t.subblock_gain[1]=0,t.subblock_gain[2]=0,t.subblock_gain[3]=0,t.region0_count=0,t.region1_count=0,t.preflag=0,t.scalefac_scale=0,t.count1table_select=0,t.part2_length=0,t.sfb_lmax=Yi.SBPSY_l,t.sfb_smin=Yi.SBPSY_s,t.psy_lmax=e.sfb21_extra?Yi.SBMAX_l:Yi.SBPSY_l,t.psymax=t.psy_lmax,t.sfbmax=t.sfb_lmax,t.sfbdivide=11;for(var r=0;r<Yi.SBMAX_l;r++)t.width[r]=e.scalefac_band.l[r+1]-e.scalefac_band.l[r],t.window[r]=3;if(t.block_type==Yi.SHORT_TYPE){var a=zi(576);t.sfb_smin=0,t.sfb_lmax=0,0!=t.mixed_block_flag&&(t.sfb_smin=3,t.sfb_lmax=2*e.mode_gr+4),t.psymax=t.sfb_lmax+3*((e.sfb21_extra?Yi.SBMAX_s:Yi.SBPSY_s)-t.sfb_smin),t.sfbmax=t.sfb_lmax+3*(Yi.SBPSY_s-t.sfb_smin),t.sfbdivide=t.sfbmax-18,t.psy_lmax=t.sfb_lmax;var o=e.scalefac_band.l[t.sfb_lmax];for(Di.arraycopy(t.xr,0,a,0,576),r=t.sfb_smin;r<Yi.SBMAX_s;r++)for(var i=e.scalefac_band.s[r],s=e.scalefac_band.s[r+1],l=0;l<3;l++)for(var c=i;c<s;c++)t.xr[o++]=a[3*c+l];var u=t.sfb_lmax;for(r=t.sfb_smin;r<Yi.SBMAX_s;r++)t.width[u]=t.width[u+1]=t.width[u+2]=e.scalefac_band.s[r+1]-e.scalefac_band.s[r],t.window[u]=0,t.window[u+1]=1,t.window[u+2]=2,u+=3}t.count1bits=0,t.sfb_partition_table=n.nr_of_sfb_block[0][0],t.slen[0]=0,t.slen[1]=0,t.slen[2]=0,t.slen[3]=0,t.max_nonzero_coeff=575,Vi.fill(t.scalefac,0),function(e,t){var r=e.ATH,a=t.xr;if(t.block_type!=Yi.SHORT_TYPE)for(var o=!1,i=Yi.PSFB21-1;i>=0&&!o;i--){var s=e.scalefac_band.psfb21[i],l=e.scalefac_band.psfb21[i+1],c=n.athAdjust(r.adjust,r.psfb21[i],r.floor);e.nsPsy.longfact[21]>1e-12&&(c*=e.nsPsy.longfact[21]);for(var u=l-1;u>=s;u--){if(!(Math.abs(a[u])<c)){o=!0;break}a[u]=0}}else for(var d=0;d<3;d++)for(o=!1,i=Yi.PSFB12-1;i>=0&&!o;i--){l=(s=3*e.scalefac_band.s[12]+(e.scalefac_band.s[13]-e.scalefac_band.s[12])*d+(e.scalefac_band.psfb12[i]-e.scalefac_band.psfb12[0]))+(e.scalefac_band.psfb12[i+1]-e.scalefac_band.psfb12[i]);var A=n.athAdjust(r.adjust,r.psfb12[i],r.floor);for(e.nsPsy.shortfact[12]>1e-12&&(A*=e.nsPsy.shortfact[12]),u=l-1;u>=s;u--){if(!(Math.abs(a[u])<A)){o=!0;break}a[u]=0}}}(e,t)},o.BINSEARCH_NONE=new o(0),o.BINSEARCH_UP=new o(1),o.BINSEARCH_DOWN=new o(2),this.trancate_smallspectrums=function(e,t,a,o){var i=zi(Wi.SFBMAX);if((4&e.substep_shaping||t.block_type!=Yi.SHORT_TYPE)&&!(128&e.substep_shaping)){n.calc_noise(t,a,i,new Gi,null);for(var s=0;s<576;s++){var l=0;0!=t.l3_enc[s]&&(l=Math.abs(t.xr[s])),o[s]=l}s=0;var c=8;t.block_type==Yi.SHORT_TYPE&&(c=6);do{var u,d,A,h,f=t.width[c];if(s+=f,!(i[c]>=1||(Vi.sort(o,s-f,f),BitStream.EQ(o[s-1],0)))){u=(1-i[c])*a[c],d=0,h=0;do{var p;for(A=1;h+A<f&&!BitStream.NEQ(o[h+s-f],o[h+s+A-f]);A++);if(u<(p=o[h+s-f]*o[h+s-f]*A)){0!=h&&(d=o[h+s-f-1]);break}u-=p,h+=A}while(h<f);if(!BitStream.EQ(d,0))do{Math.abs(t.xr[s-f])<=d&&(t.l3_enc[s-f]=0)}while(--f>0)}}while(++c<t.psymax);t.part2_3_length=r.noquant_count_bits(e,t,null)}},this.outer_loop=function(e,t,a,i,s,u){var d=e.internal_flags,A=new Xi,h=zi(576),f=zi(Wi.SFBMAX),p=new Gi,_=new Hi,m=9999999,b=!1,g=!1,v=0;if(function(e,t,n,a,i){var s,l=e.CurrentStep[a],c=!1,u=e.OldValue[a],d=o.BINSEARCH_NONE;for(t.global_gain=u,n-=t.part2_length;;){var A;if(s=r.count_bits(e,i,t,null),1==l||s==n)break;s>n?(d==o.BINSEARCH_DOWN&&(c=!0),c&&(l/=2),d=o.BINSEARCH_UP,A=l):(d==o.BINSEARCH_UP&&(c=!0),c&&(l/=2),d=o.BINSEARCH_DOWN,A=-l),t.global_gain+=A,t.global_gain<0&&(t.global_gain=0,c=!0),t.global_gain>255&&(t.global_gain=255,c=!0)}for(Fi(t.global_gain>=0),Fi(t.global_gain<256);s>n&&t.global_gain<255;)t.global_gain++,s=r.count_bits(e,i,t,null);e.CurrentStep[a]=u-t.global_gain>=4?4:2,e.OldValue[a]=t.global_gain,t.part2_3_length=s}(d,t,u,s,i),0==d.noise_shaping)return 100;n.calc_noise(t,a,f,p,_),p.bits=t.part2_3_length,A.assign(t);var C=0;for(Di.arraycopy(i,0,h,0,576);!b;){do{var y,k=new Gi,w=255;if(y=2&d.substep_shaping?20:3,d.sfb21_extra&&(f[A.sfbmax]>1||A.block_type==Yi.SHORT_TYPE&&(f[A.sfbmax+1]>1||f[A.sfbmax+2]>1))||!c(e,A,f,i,g))break;0!=A.scalefac_scale&&(w=254);var x=u-A.part2_length;if(x<=0)break;for(;(A.part2_3_length=r.count_bits(d,i,A,_))>x&&A.global_gain<=w;)A.global_gain++;if(A.global_gain>w)break;if(0==p.over_count){for(;(A.part2_3_length=r.count_bits(d,i,A,_))>m&&A.global_gain<=w;)A.global_gain++;if(A.global_gain>w)break}if(n.calc_noise(A,a,f,k,_),k.bits=A.part2_3_length,0!=(l(t.block_type!=Yi.SHORT_TYPE?e.quant_comp:e.quant_comp_short,p,k,A,f)?1:0))m=t.part2_3_length,p=k,t.assign(A),C=0,Di.arraycopy(i,0,h,0,576);else if(0==d.full_outer_loop&&(++C>y&&0==p.over_count||3==d.noise_shaping_amp&&g&&C>30||3==d.noise_shaping_amp&&g&&A.global_gain-v>15))break}while(A.global_gain+A.scalefac_scale<255);3==d.noise_shaping_amp?g?b=!0:(A.assign(t),Di.arraycopy(h,0,i,0,576),C=0,v=A.global_gain,g=!0):b=!0}return Fi(t.global_gain+t.scalefac_scale<=255),e.VBR==Pi.vbr_rh||e.VBR==Pi.vbr_mtrh?Di.arraycopy(h,0,i,0,576):1&d.substep_shaping&&trancate_smallspectrums(d,t,a,i),p.over_count},this.iteration_finish_one=function(e,n,a){var o=e.l3_side,i=o.tt[n][a];r.best_scalefac_store(e,n,a,o),1==e.use_best_huffman&&r.best_huffman_divide(e,i),t.ResvAdjust(e,i)},this.VBR_encode_granule=function(e,t,n,r,a,o,i){var s,l=e.internal_flags,c=new Xi,u=zi(576),d=i,A=i+1,h=(i+o)/2,f=0,p=l.sfb21_extra;Fi(d<=LameInternalFlags.MAX_BITS_PER_CHANNEL),Vi.fill(c.l3_enc,0);do{l.sfb21_extra=!(h>d-42)&&p,outer_loop(e,t,n,r,a,h)<=0?(f=1,A=t.part2_3_length,c.assign(t),Di.arraycopy(r,0,u,0,576),s=(i=A-32)-o,h=(i+o)/2):(s=i-(o=h+32),h=(i+o)/2,0!=f&&(f=2,t.assign(c),Di.arraycopy(u,0,r,0,576)))}while(s>12);l.sfb21_extra=p,2==f&&Di.arraycopy(c.l3_enc,0,t.l3_enc,0,576),Fi(t.part2_3_length<=d)},this.get_framebits=function(n,r){var a=n.internal_flags;a.bitrate_index=a.VBR_min_bitrate;var o=e.getframebits(n);a.bitrate_index=1,o=e.getframebits(n);for(var i=1;i<=a.VBR_max_bitrate;i++){a.bitrate_index=i;var s=new MeanBits(o);r[i]=t.ResvFrameBegin(n,s),o=s.bits}},this.VBR_old_prepare=function(e,r,a,o,i,s,l,c,u){var d,A=e.internal_flags,h=0,f=1,p=0;A.bitrate_index=A.VBR_max_bitrate;var _=t.ResvFrameBegin(e,new MeanBits(0))/A.mode_gr;get_framebits(e,s);for(var m=0;m<A.mode_gr;m++){var b=n.on_pe(e,r,c[m],_,m,0);A.mode_ext==Yi.MPG_MD_MS_LR&&(ms_convert(A.l3_side,m),n.reduce_side(c[m],a[m],_,b));for(var g=0;g<A.channels_out;++g){var v=A.l3_side.tt[m][g];v.block_type!=Yi.SHORT_TYPE?(h=1.28/(1+Math.exp(3.5-r[m][g]/300))-.05,d=A.PSY.mask_adjust-h):(h=2.56/(1+Math.exp(3.5-r[m][g]/300))-.14,d=A.PSY.mask_adjust_short-h),A.masking_lower=Math.pow(10,.1*d),init_outer_loop(A,v),u[m][g]=n.calc_xmin(e,o[m][g],v,i[m][g]),0!=u[m][g]&&(f=0),l[m][g]=126,p+=c[m][g]}}for(m=0;m<A.mode_gr;m++)for(g=0;g<A.channels_out;g++)p>s[A.VBR_max_bitrate]&&(c[m][g]*=s[A.VBR_max_bitrate],c[m][g]/=p),l[m][g]>c[m][g]&&(l[m][g]=c[m][g]);return f},this.bitpressure_strategy=function(e,t,n,r){for(var a=0;a<e.mode_gr;a++)for(var o=0;o<e.channels_out;o++){for(var i=e.l3_side.tt[a][o],s=t[a][o],l=0,c=0;c<i.psy_lmax;c++)s[l++]*=1+.029*c*c/Yi.SBMAX_l/Yi.SBMAX_l;if(i.block_type==Yi.SHORT_TYPE)for(c=i.sfb_smin;c<Yi.SBMAX_s;c++)s[l++]*=1+.029*c*c/Yi.SBMAX_s/Yi.SBMAX_s,s[l++]*=1+.029*c*c/Yi.SBMAX_s/Yi.SBMAX_s,s[l++]*=1+.029*c*c/Yi.SBMAX_s/Yi.SBMAX_s;r[a][o]=0|Math.max(n[a][o],.9*r[a][o])}},this.VBR_new_prepare=function(e,r,a,o,i,s){var l,c=e.internal_flags,u=1,d=0,A=0;if(e.free_format){c.bitrate_index=0;var h=new MeanBits(d);l=t.ResvFrameBegin(e,h),d=h.bits,i[0]=l}else c.bitrate_index=c.VBR_max_bitrate,h=new MeanBits(d),t.ResvFrameBegin(e,h),d=h.bits,get_framebits(e,i),l=i[c.VBR_max_bitrate];for(var f=0;f<c.mode_gr;f++){n.on_pe(e,r,s[f],d,f,0),c.mode_ext==Yi.MPG_MD_MS_LR&&ms_convert(c.l3_side,f);for(var p=0;p<c.channels_out;++p){var _=c.l3_side.tt[f][p];c.masking_lower=Math.pow(10,.1*c.PSY.mask_adjust),init_outer_loop(c,_),0!=n.calc_xmin(e,a[f][p],_,o[f][p])&&(u=0),A+=s[f][p]}}for(f=0;f<c.mode_gr;f++)for(p=0;p<c.channels_out;p++)A>l&&(s[f][p]*=l,s[f][p]/=A);return u},this.calc_target_bits=function(r,a,o,i,s,l){var c,u,d,A,h=r.internal_flags,f=h.l3_side,p=0;h.bitrate_index=h.VBR_max_bitrate;var _=new MeanBits(p);for(l[0]=t.ResvFrameBegin(r,_),p=_.bits,h.bitrate_index=1,p=e.getframebits(r)-8*h.sideinfo_len,s[0]=p/(h.mode_gr*h.channels_out),p=r.VBR_mean_bitrate_kbps*r.framesize*1e3,1&h.substep_shaping&&(p*=1.09),p/=r.out_samplerate,p-=8*h.sideinfo_len,p/=h.mode_gr*h.channels_out,(c=.93+.07*(11-r.compression_ratio)/5.5)<.9&&(c=.9),c>1&&(c=1),u=0;u<h.mode_gr;u++){var m=0;for(d=0;d<h.channels_out;d++){if(i[u][d]=int(c*p),a[u][d]>700){var b=int((a[u][d]-700)/1.4),g=f.tt[u][d];i[u][d]=int(c*p),g.block_type==Yi.SHORT_TYPE&&b<p/2&&(b=p/2),b>3*p/2?b=3*p/2:b<0&&(b=0),i[u][d]+=b}i[u][d]>LameInternalFlags.MAX_BITS_PER_CHANNEL&&(i[u][d]=LameInternalFlags.MAX_BITS_PER_CHANNEL),m+=i[u][d]}if(m>LameInternalFlags.MAX_BITS_PER_GRANULE)for(d=0;d<h.channels_out;++d)i[u][d]*=LameInternalFlags.MAX_BITS_PER_GRANULE,i[u][d]/=m}if(h.mode_ext==Yi.MPG_MD_MS_LR)for(u=0;u<h.mode_gr;u++)n.reduce_side(i[u],o[u],p*h.channels_out,LameInternalFlags.MAX_BITS_PER_GRANULE);for(A=0,u=0;u<h.mode_gr;u++)for(d=0;d<h.channels_out;d++)i[u][d]>LameInternalFlags.MAX_BITS_PER_CHANNEL&&(i[u][d]=LameInternalFlags.MAX_BITS_PER_CHANNEL),A+=i[u][d];if(A>l[0])for(u=0;u<h.mode_gr;u++)for(d=0;d<h.channels_out;d++)i[u][d]*=l[0],i[u][d]/=A}},us=Ti(),ds=function(){var e;this.setModules=function(t){e=t},this.ResvFrameBegin=function(t,n){var r,a=t.internal_flags,o=a.l3_side,i=e.getframebits(t);n.bits=(i-8*a.sideinfo_len)/a.mode_gr;var s=2048*a.mode_gr-8;t.brate>320?r=8*int(1e3*t.brate/(t.out_samplerate/1152)/8+.5):(r=11520,t.strict_ISO&&(r=8*int(32e4/(t.out_samplerate/1152)/8+.5))),a.ResvMax=r-i,a.ResvMax>s&&(a.ResvMax=s),(a.ResvMax<0||t.disable_reservoir)&&(a.ResvMax=0);var l=n.bits*a.mode_gr+Math.min(a.ResvSize,a.ResvMax);return l>r&&(l=r),Zi(a.ResvMax%8==0),Zi(a.ResvMax>=0),o.resvDrain_pre=0,null!=a.pinfo&&(a.pinfo.mean_bits=n.bits/2,a.pinfo.resvsize=a.ResvSize),l},this.ResvMaxBits=function(e,t,n,r){var a,o=e.internal_flags,i=o.ResvSize,s=o.ResvMax;0!=r&&(i+=t),1&o.substep_shaping&&(s*=.9),n.bits=t,10*i>9*s?(a=i-9*s/10,n.bits+=a,o.substep_shaping|=128):(a=0,o.substep_shaping&=127,!e.disable_reservoir&&!(1&o.substep_shaping)&&(n.bits-=.1*t));var l=i<6*o.ResvMax/10?i:6*o.ResvMax/10;return(l-=a)<0&&(l=0),l},this.ResvAdjust=function(e,t){e.ResvSize-=t.part2_3_length+t.part2_length},this.ResvFrameEnd=function(e,t){var n,r=e.l3_side;e.ResvSize+=t*e.mode_gr;var a=0;r.resvDrain_post=0,r.resvDrain_pre=0,0!=(n=e.ResvSize%8)&&(a+=n),(n=e.ResvSize-a-e.ResvMax)>0&&(a+=n);var o=Math.min(8*r.main_data_begin,a)/8;r.resvDrain_pre+=8*o,a-=8*o,e.ResvSize-=8*o,r.main_data_begin-=o,r.resvDrain_post+=a,e.ResvSize-=a}},As=eo,hs=Ri();to();var fs=function(){this.getLameVersion=function(){return"3.98.4"},this.getLameShortVersion=function(){return"3.98.4"},this.getLameVeryShortVersion=function(){return"LAME3.98r"},this.getPsyVersion=function(){return"0.93"},this.getLameUrl=function(){return"http://www.mp3dev.org/"},this.getLameOsBitness=function(){return"32bits"}},ps=ns;function _s(){this.setModules=function(e,t){}}function ms(){this.setModules=function(e,t,n){}}function bs(){}function gs(){this.setModules=function(e,t){}}function vs(){this.dataOffset=0,this.dataLen=0,this.channels=0,this.sampleRate=0}function Cs(e){return e.charCodeAt(0)<<24|e.charCodeAt(1)<<16|e.charCodeAt(2)<<8|e.charCodeAt(3)}vs.RIFF=Cs("RIFF"),vs.WAVE=Cs("WAVE"),vs.fmt_=Cs("fmt "),vs.data=Cs("data"),vs.readHeader=function(e){var t=new vs,n=e.getUint32(0,!1);if(vs.RIFF==n&&(e.getUint32(4,!0),vs.WAVE==e.getUint32(8,!1)&&vs.fmt_==e.getUint32(12,!1))){var r=e.getUint32(16,!0),a=20;switch(r){case 16:case 18:t.channels=e.getUint16(a+2,!0),t.sampleRate=e.getUint32(a+4,!0);break;default:throw"extended fmt chunk not implemented"}a+=r;for(var o=vs.data,i=0;o!=n&&(n=e.getUint32(a,!1),i=e.getUint32(a+4,!0),o!=n);)a+=i+8;return t.dataLen=i,t.dataOffset=a+8,t}};var ys=Na.Mp3Encoder=function(e,t,n){3!=arguments.length&&(console.error("WARN: Mp3Encoder(channels, samplerate, kbps) not specified"),e=1,t=44100,n=128);var r=new os,a=new _s,o=new ss,i=new hs,s=new is,l=new ls,c=new cs,u=new ps,d=new fs,A=new gs,h=new ds,f=new us,p=new ms,_=new bs;r.setModules(o,i,s,l,c,u,d,A,_),i.setModules(o,_,d,u),A.setModules(i,d),s.setModules(r),c.setModules(i,h,l,f),l.setModules(f,h,r.enc.psy),h.setModules(i),f.setModules(l),u.setModules(r,i,d),a.setModules(p,_),p.setModules(d,A,s);var m=r.lame_init();m.num_channels=e,m.in_samplerate=t,m.brate=n,m.mode=As.STEREO,m.quality=3,m.bWriteVbrTag=!1,m.disable_reservoir=!0,m.write_id3tag_automatic=!1,r.lame_init_params(m);var b=1152,g=0|1.25*b+7200,v=rs(g);this.encodeBuffer=function(t,n){1==e&&(n=t),as(t.length==n.length),t.length>b&&(b=t.length,v=rs(g=0|1.25*b+7200));var a=r.lame_encode_buffer(m,t,n,t.length,v,0,g);return new Int8Array(v.subarray(0,a))},this.flush=function(){var e=r.lame_encode_flush(m,v,0,g);return new Int8Array(v.subarray(0,e))}},ks=(Na.WavHeader=vs,n(213));class ws{constructor(e,t){this.audioContext=e,this.sourceNode=t,this.isRecording=!1,this.scriptProcessor=null,this.mp3Encoder=null,this.mp3Data=[],this.sampleRate=this.audioContext.sampleRate,this.channels=2,this.bitRate=128}start(){this.isRecording||(console.log("Recording started..."),this.isRecording=!0,this.mp3Data=[],this.mp3Encoder=new ys(this.channels,this.sampleRate,this.bitRate),this.scriptProcessor=this.audioContext.createScriptProcessor(4096,this.channels,this.channels),this.sourceNode.connect(this.scriptProcessor),this.scriptProcessor.connect(this.audioContext.destination),this.scriptProcessor.onaudioprocess=e=>{if(!this.isRecording)return;const t=e.inputBuffer,n=t.getChannelData(0),r=t.numberOfChannels>1?t.getChannelData(1):n,a=new Int16Array(n.length),o=new Int16Array(r.length);for(let e=0;e<n.length;e++)a[e]=32767*Math.max(-1,Math.min(1,n[e])),o[e]=32767*Math.max(-1,Math.min(1,r[e]));const i=this.mp3Encoder.encodeBuffer(a,o);i.length>0&&this.mp3Data.push(i)})}stop(){if(!this.isRecording)return;console.log("Recording stopped."),this.isRecording=!1,this.sourceNode.disconnect(this.scriptProcessor),this.scriptProcessor.disconnect(this.audioContext.destination),this.scriptProcessor.onaudioprocess=null;const e=this.mp3Encoder.flush();e.length>0&&this.mp3Data.push(e)}download(e="mixtape.mp3"){if(0===this.mp3Data.length)return void console.warn("No recording data to download.");console.log("Preparing MP3 for download...");const t=new Blob(this.mp3Data,{type:"audio/mp3"});(0,ks.saveAs)(t,e)}}class xs{constructor(e){this.container=e,this.toggleBtn=this.container.querySelector("#skin-toggle-btn"),this.buttonsContainer=this.container.querySelector(".skin-buttons-container"),this.skinButtons=this.container.querySelectorAll(".skin-btn"),this.init()}init(){this.toggleBtn.addEventListener("click",()=>{this.buttonsContainer.classList.toggle("visible")}),this.skinButtons.forEach(e=>{e.addEventListener("click",()=>{const t=e.dataset.skin;this.setSkin(t),this.buttonsContainer.classList.remove("visible")})}),this.setSkin("light")}setSkin(e){document.body.className="",document.body.classList.add(`skin-${e}`),this.skinButtons.forEach(t=>{t.classList.toggle("active",t.dataset.skin===e)})}}class Es{constructor(e,t={}){this.element=e,this.knob=e.querySelector(".knob"),this.onChange=t.onChange||(()=>{}),this.min=void 0!==t.min?t.min:0,this.max=void 0!==t.max?t.max:100,this.defaultValue=void 0!==t.defaultValue?t.defaultValue:(this.min+this.max)/2,this.minAngle=-135,this.maxAngle=135,this.value=this.defaultValue,this.isDragging=!1,this.startY=0,this.startValue=0,this.valueDisplay=document.createElement("span"),this.valueDisplay.className="knob-value",this.knob.appendChild(this.valueDisplay),this.element.addEventListener("mousedown",this.onMouseDown.bind(this)),document.addEventListener("mousemove",this.onMouseMove.bind(this)),document.addEventListener("mouseup",this.onMouseUp.bind(this)),this.setValue(this.defaultValue)}onMouseDown(e){e.preventDefault(),this.isDragging=!0,this.startY=e.clientY,this.startValue=this.value,document.body.style.cursor="ns-resize"}onMouseMove(e){if(!this.isDragging)return;const t=this.startY-e.clientY,n=(this.max-this.min)/150,r=this.startValue+t*n;this.setValue(r)}onMouseUp(){this.isDragging=!1,document.body.style.cursor="default"}setValue(e){this.value=Math.max(this.min,Math.min(this.max,e)),this.valueDisplay.textContent=Math.round(this.value);const t=(this.value-this.min)/(this.max-this.min),n=this.minAngle+t*(this.maxAngle-this.minAngle);this.knob.style.transform=`rotate(${n}deg)`,this.onChange&&this.onChange(100*t)}getNormalizedValue(){return(this.value-this.min)/(this.max-this.min)*100}}class Ms{constructor(e,t){this.container=e,this.audioEngine=t,this.pads=this.container.querySelectorAll(".sampler-pad"),this.samples=new Array(this.pads.length).fill(null),this.hoverTimeout=null,this.init()}init(){this.pads.forEach(e=>{e.addEventListener("click",this.onPadClick.bind(this)),e.addEventListener("mouseenter",this.onPadMouseEnter.bind(this)),e.addEventListener("mouseleave",this.onPadMouseLeave.bind(this)),e.querySelector(".trash-icon").addEventListener("click",this.onTrashClick.bind(this))})}onPadClick(e){const t=e.currentTarget,n=parseInt(t.dataset.id,10);this.samples[n]?this.audioEngine.playSample(this.samples[n]):this.loadSample(n)}onPadMouseEnter(e){const t=e.currentTarget,n=parseInt(t.dataset.id,10);this.samples[n]&&(this.hoverTimeout=setTimeout(()=>{t.classList.add("delete-active")},2e3))}onPadMouseLeave(e){clearTimeout(this.hoverTimeout),e.currentTarget.classList.remove("delete-active")}onTrashClick(e){e.stopPropagation();const t=e.currentTarget.closest(".sampler-pad"),n=parseInt(t.dataset.id,10);this.deleteSample(n)}async loadSample(e){try{const t=document.createElement("input");t.type="file",t.accept="audio/*",t.onchange=async t=>{const n=t.target.files[0];if(!n)return;const r=await n.arrayBuffer(),a=await this.audioEngine.audioContext.decodeAudioData(r);a.duration>10?alert("Sample is too long! Please select a file that is 10 seconds or shorter."):(this.samples[e]=a,this.pads[e].classList.add("loaded"))},t.click()}catch(e){console.error("Error loading sample:",e)}}deleteSample(e){this.samples[e]=null;const t=this.pads[e];t.classList.remove("loaded"),t.classList.remove("delete-active")}}const Bs=["\n\n                                                                  ###        ##                                    \n                                                       ###       + +        @##                                    \n                                                      @--%        @#       @*@                                     \n                                                        @@        @#      @@                                       \n                                                          @ #    @-%##   %@                                        \n                                                           @%####= .*##%-+#                                        \n                                                            #           :%                                         \n                                                             -          *#                                         \n                                      #%@@%%%@%#####         @ .::.:::  *#                                         \n                        @%##########@=           .+%%###     =:-=+-:.:-+*###                   @@@%%##             \n                      @-          =.                  :@### *              ###                @         :*%@@@%### \n                    @+           :-                      %@.                .%# @@@@@%##    @#                  %##\n                  @#             @                       %                    %#       +%##@+                 -%#  \n                 @.             .+                      @                      @#        #%-                 ###   \n               @:               :.                     ..                      .#:        #                .%#     \n             @=                 -                      %                        %#        +:              =%#      \n           @#                   -::                   .:                        .#.       +:             %##       \n         @@.                    :::::::..     -% @    -:-=::::::::::-=====+**=:  #:.....::*            .@#         \n        @.           .-         .=::::::::::..-%:     +::-======+++++++=======-::#-:::::-*            +##          \n      @:            =@=         .#::::::::::::--       .     @@@@@@@@@@ @@-     ::::::**            .@#            \n    @+             #@@-          @**************       .     -@@@@@@@@@.@%     : @#:.              -%#             \n  @#                                 .%*                @     +@@@@@@@*@%      @@+                *:*%###          \n @.                                  .%*              .@        %@@@@@@:       @.               .#    .@##         \n*                                    .%*            *@###%                -..-@.               =-       @##        \n#                                    .%*          .%#*=:.:  ...::==::::--:..--=#             .#.        =##        \n%:::::::::::::...                    .%*          *       =*%*+=+*#%%*=-::-+:**             -*          -##        \n@::::::::::::::::::::::              .*:         -#        *::::::::::::::-=%-             *-:..       .%##        \n@:::::::::::----=====+:           .%*:.          :=          *:::::::::::-#.:::....      .%::::::::::::###         \n                     @:           .%*::..                   .:%%@#-::=#@%::::::::::::.  =%#@=::::::::+@            \n                     @.           .%*:::::::::::::::::::::::::%#      @#:::::::::::::::###   @@@%%@@@              \n                     %...::::::::::#=:::::::::::::::::::::::::@      @+:::::::::::::::%#                           \n                     %::::::=*%@@#+::::::::::::::-+*%@@@@@@               @@@@@@@@%*#@                             \n\n"];class Ss{constructor(e){this.element=e,this.originalText=e.textContent,this.characters="!<>-_\\/[]{}=+*|?#",this.animationInterval=null}start(e=.05,t=100){this.animationInterval&&this.stop(),this.animationInterval=setInterval(()=>{let t="";for(let n=0;n<this.originalText.length;n++){const r=this.originalText[n];""!==r.trim()&&Math.random()<e?t+=this.characters.charAt(Math.floor(Math.random()*this.characters.length)):t+=r}this.element.textContent=t},t)}stop(){clearInterval(this.animationInterval),this.element.textContent=this.originalText}}class Ts{constructor(){this.modal=null,this.onDownload=null,this.createModal()}createModal(){document.body.insertAdjacentHTML("beforeend",'\n      <div id="donation-modal" class="modal" style="display: none;">\n        <div class="modal-content">\n          <span class="close-btn">&times;</span>\n          <h2>Glad you are enjoying the 420% Sounbender</h2>\n          <p>In order to download your artwork you must support its development and my cannabis & green tea addiction . Always keep it 420% !</p>\n          <div class="donation-options">\n            <a href="https://paypal.me/stereoiii6" target="_blank" class="donation-btn paypal">PayPal</a>\n            <div class="crypto-donations">\n              <p><strong>Crypto:</strong></p>\n              <p>BTC<br/> <code>1JqQeeUP6mkGfcBhzu9BdoiF467fqPP94Y</code></p>\n              <p>ETH/POL/AVAX/BASE<br/> <code>0x8b8f021721ddfad63e1821480669ca84c67720b3</code></p>\n              <p>XMR<br/> <code>4Ae8TH2JmWFU2nTQK16FEqT4if84xAKxn5BiGqoJa8ELW4FExEgVVQyamqzTsxfgRab3s4vM5d5aZfLkdyupwubTTG7NZu5</code></p>\n              <p>TON<br/> <code>UQB7PGENGRJZHosZ5B36_GikGl11BIV80rQmi4DAlFEMJmLL</code></p>\n              <p>Every donation will be rewarded all you gotta do is share your proof of donation in our with our <a href=#>telegram bot</a></p> \n           </div>\n          </div>\n          <button id="download-now-btn" class="download-now-btn">Download Now</button>\n        </div>\n      </div>\n    '),this.modal=document.getElementById("donation-modal"),this.modal.querySelector(".close-btn").addEventListener("click",()=>this.hide()),this.modal.querySelector("#download-now-btn").addEventListener("click",()=>{this.onDownload&&this.onDownload(),this.hide()})}show(e){this.onDownload=e,this.modal.style.display="block"}hide(){this.modal.style.display="none"}}document.addEventListener("DOMContentLoaded",()=>{console.log("Application starting...");const t=new Rr,n=new ws(t.audioContext,t.getRecordingDestination()),r=new Ts;/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&document.querySelector(".mixer-container").classList.add("mobile-layout");const a={channelA:{files:[],selectedTrack:{file:null,index:-1,duration:0}},channelB:{files:[],selectedTrack:{file:null,index:-1,duration:0}},cueA:!1,cueB:!1};e.headerArt.textContent=Bs[0],new Ss(e.headerArt).start(),new xs(e.skinToggler);const o=e=>`${Math.floor(e/60)}:${Math.floor(e%60).toString().padStart(2,"0")}`;!function(t,n,r,a,o){function i(){t.setCueState("a",r.cueA),t.setCueState("b",r.cueB),t.setMasterCue(!r.cueA&&!r.cueB)}e.appContainer.addEventListener("click",()=>{"suspended"===t.audioContext.state&&t.audioContext.resume()},{once:!0}),e.recordBtn.addEventListener("click",()=>{n.start(),e.recordBtn.classList.add("active"),e.recordBtn.disabled=!0,e.stopRecordBtn.disabled=!1,e.downloadBtn.disabled=!0}),e.stopRecordBtn.addEventListener("click",()=>{n.stop(),e.recordBtn.classList.remove("active"),e.recordBtn.disabled=!1,e.stopRecordBtn.disabled=!0,e.downloadBtn.disabled=!1}),e.downloadBtn.addEventListener("click",()=>{o.show(()=>{n.download(`MyMixtape_${(new Date).toISOString()}.mp3`)})}),e.masterVolume.addEventListener("input",e=>{t.setMasterVolume(e.target.value)}),e.headphoneVolume.addEventListener("input",e=>{t.setHeadphoneVolume(e.target.value)}),e.crossfader.addEventListener("input",e=>{t.setCrossfader(e.target.value)}),e.channelA.playBtn.addEventListener("click",async()=>{if(r.channelA.selectedTrack.file)try{const{duration:n,bpm:a}=await t.loadTrack("a",r.channelA.selectedTrack.file);r.channelA.selectedTrack.duration=n,r.channelA.selectedTrack.bpm=a,e.channelA.tempoLabel.textContent=a?`Tempo: ${a} BPM`:"Tempo",t.playTrack("a",r.channelA.selectedTrack.index)}catch(t){console.error("Error playing track A:",t),e.channelA.tempoLabel.textContent="Tempo"}}),e.channelA.stopBtn.addEventListener("click",()=>{t.stopTrack("a"),e.channelA.timeCurrent.textContent="0:00",e.channelA.timeRemaining.textContent=`-${a(r.channelA.selectedTrack.duration)}`,e.channelA.timeSlider.value=0}),e.channelA.volumeSlider.addEventListener("input",e=>{t.setChannelVolume("a",e.target.value)}),e.channelA.tempoSlider.addEventListener("input",n=>{if(t.setTempo("a",n.target.value),r.channelA.selectedTrack.bpm){const t=Math.round(r.channelA.selectedTrack.bpm*(n.target.value/100));e.channelA.tempoLabel.textContent=`Tempo: ${t} BPM`}}),e.channelA.timeSlider.addEventListener("input",e=>{t.seekTrack("a",e.target.value)}),e.channelB.playBtn.addEventListener("click",async()=>{if(r.channelB.selectedTrack.file)try{const{duration:n,bpm:a}=await t.loadTrack("b",r.channelB.selectedTrack.file);r.channelB.selectedTrack.duration=n,r.channelB.selectedTrack.bpm=a,e.channelB.tempoLabel.textContent=a?`Tempo: ${a} BPM`:"Tempo",t.playTrack("b",r.channelB.selectedTrack.index)}catch(t){console.error("Error playing track B:",t),e.channelB.tempoLabel.textContent="Tempo"}}),e.channelB.stopBtn.addEventListener("click",()=>{t.stopTrack("b"),e.channelB.timeCurrent.textContent="0:00",e.channelB.timeRemaining.textContent=`-${a(r.channelB.selectedTrack.duration)}`,e.channelB.timeSlider.value=0}),e.channelB.volumeSlider.addEventListener("input",e=>{t.setChannelVolume("b",e.target.value)}),e.channelB.tempoSlider.addEventListener("input",n=>{if(t.setTempo("b",n.target.value),r.channelB.selectedTrack.bpm){const t=Math.round(r.channelB.selectedTrack.bpm*(n.target.value/100));e.channelB.tempoLabel.textContent=`Tempo: ${t} BPM`}}),e.channelB.timeSlider.addEventListener("input",e=>{t.seekTrack("b",e.target.value)}),e.channelA.cueBtn.addEventListener("click",()=>{e.channelA.cueBtn.disabled||(r.cueA=!r.cueA,e.channelA.cueBtn.classList.toggle("active",r.cueA),i())}),e.channelB.cueBtn.addEventListener("click",()=>{e.channelB.cueBtn.disabled||(r.cueB=!r.cueB,e.channelB.cueBtn.classList.toggle("active",r.cueB),i())})}(t,n,a,o,r),new Es(e.fxChorus,{min:0,max:100,defaultValue:0,onChange:e=>t.setChorus(e)}),new Es(e.fxReverb,{min:0,max:100,defaultValue:0,onChange:e=>t.setReverb(e)}),new Es(e.fxDelay,{min:0,max:100,defaultValue:0,onChange:e=>t.setDelay(e)}),new Ms(e.samplerPads,t);const i=new Oa(e.channelA.tracklist,(e,t)=>{a.channelA.selectedTrack={file:e,index:t,duration:0}});new Ir(e.channelA.selectDirectory,e.channelA.selectedPath,e=>{a.channelA.files=e,i.render(e)});const s=new Es(e.channelA.eqLow,{min:0,max:255,defaultValue:127}),l=new Es(e.channelA.eqMid,{min:0,max:255,defaultValue:127}),c=new Es(e.channelA.eqHigh,{min:0,max:255,defaultValue:127});s.onChange=e=>t.setChannelEQ("a",e,l.getNormalizedValue(),c.getNormalizedValue()),l.onChange=e=>t.setChannelEQ("a",s.getNormalizedValue(),e,c.getNormalizedValue()),c.onChange=e=>t.setChannelEQ("a",s.getNormalizedValue(),l.getNormalizedValue(),e);const u=new Oa(e.channelB.tracklist,(e,t)=>{a.channelB.selectedTrack={file:e,index:t,duration:0}});new Ir(e.channelB.selectDirectory,e.channelB.selectedPath,e=>{a.channelB.files=e,u.render(e)});const d=new Es(e.channelB.eqLow,{min:0,max:255,defaultValue:127}),A=new Es(e.channelB.eqMid,{min:0,max:255,defaultValue:127}),h=new Es(e.channelB.eqHigh,{min:0,max:255,defaultValue:127});d.onChange=e=>t.setChannelEQ("b",e,A.getNormalizedValue(),h.getNormalizedValue()),A.onChange=e=>t.setChannelEQ("b",d.getNormalizedValue(),e,h.getNormalizedValue()),h.onChange=e=>t.setChannelEQ("b",d.getNormalizedValue(),A.getNormalizedValue(),e);const f=async()=>{const t=await(async()=>{if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return console.warn("enumerateDevices() not supported."),!1;try{const e=(await navigator.mediaDevices.enumerateDevices()).filter(e=>"audiooutput"===e.kind),t=e.some(e=>e.label.toLowerCase().includes("headphone")||e.label.toLowerCase().includes("casque")||"default"!==e.deviceId&&"communications"!==e.deviceId);return e.length>1||t}catch(e){return console.error("Error enumerating devices:",e),!1}})();e.channelA.cueBtn.disabled=!t,e.channelB.cueBtn.disabled=!t;const n=t?"Cue":"Connect headphones to enable cue";e.channelA.cueBtn.title=n,e.channelB.cueBtn.title=n,t||!a.cueA&&!a.cueB||(a.cueA=!1,a.cueB=!1,e.channelA.cueBtn.classList.remove("active"),e.channelB.cueBtn.classList.remove("active"),handleCueChange())};navigator.mediaDevices&&navigator.mediaDevices.addEventListener("devicechange",f),f();const p=e.visualizer.getContext("2d"),_=t.analyser.frequencyBinCount,m=new Uint8Array(_);!function n(){const r=t.getPlaybackTime("a");e.channelA.timeCurrent.textContent=o(r.currentTime),e.channelA.timeRemaining.textContent=`-${o(r.remainingTime)}`,r.duration>0&&(e.channelA.timeSlider.value=r.currentTime/r.duration*100);const a=t.getPlaybackTime("b");e.channelB.timeCurrent.textContent=o(a.currentTime),e.channelB.timeRemaining.textContent=`-${o(a.remainingTime)}`,a.duration>0&&(e.channelB.timeSlider.value=a.currentTime/a.duration*100),requestAnimationFrame(n)}(),function n(){requestAnimationFrame(n),t.analyser.getByteFrequencyData(m),p.fillStyle=getComputedStyle(document.body).getPropertyValue("--primary-color")||"#282c34",p.fillRect(0,0,e.visualizer.width,e.visualizer.height);const r=e.visualizer.width/_*2.5;let a=0;for(let t=0;t<_;t++){const n=m[t]/2;p.fillStyle=getComputedStyle(document.body).getPropertyValue("--accent-color")||"#61dafb",p.fillRect(a,e.visualizer.height-n,r,n),a+=r+1}}(),console.log("UI Initialized. Click anywhere on the mixer to enable audio.")})})()})();
//# sourceMappingURL=bundle.js.map